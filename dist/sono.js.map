{"version":3,"file":null,"sources":["../core/utils/fake-context.js","../core/context.js","../core/utils/browser.js","../core/utils/file.js","../core/effects.js","../core/group.js","../node_modules/events/events.js","../core/utils/emitter.js","../core/utils/loader.js","../core/source/buffer-source.js","../core/utils/utils.js","../core/source/audio-source.js","../core/source/media-source.js","../core/source/microphone-source.js","../core/source/oscillator-source.js","../core/source/script-source.js","../core/sound.js","../core/utils/sound-group.js","../core/sono.js","../core/utils/isSafeNumber.js","../effects/AbstractEffect.js","../effects/analyser.js","../effects/compressor.js","../effects/distortion.js","../effects/echo.js","../effects/filter.js","../effects/flanger.js","../effects/panner.js","../effects/phaser.js","../core/utils/isDefined.js","../effects/reverb.js","../effects/script.js","../effects/index.js","../utils/microphone.js","../utils/recorder.js","../utils/waveform.js","../utils/waveformer.js"],"sourcesContent":["export default function FakeContext() {\n\n    const startTime = Date.now();\n\n    function fn() {}\n\n    function param() {\n        return {\n            value: 1,\n            defaultValue: 1,\n            linearRampToValueAtTime: fn,\n            setValueAtTime: fn,\n            exponentialRampToValueAtTime: fn,\n            setTargetAtTime: fn,\n            setValueCurveAtTime: fn,\n            cancelScheduledValues: fn\n        };\n    }\n\n    function fakeNode() {\n        return {\n            connect: fn,\n            disconnect: fn,\n            // analyser\n            frequencyBinCount: 0,\n            smoothingTimeConstant: 0,\n            fftSize: 0,\n            minDecibels: 0,\n            maxDecibels: 0,\n            getByteTimeDomainData: fn,\n            getByteFrequencyData: fn,\n            getFloatTimeDomainData: fn,\n            getFloatFrequencyData: fn,\n            // gain\n            gain: param(),\n            // panner\n            panningModel: 0,\n            setPosition: fn,\n            setOrientation: fn,\n            setVelocity: fn,\n            distanceModel: 0,\n            refDistance: 0,\n            maxDistance: 0,\n            rolloffFactor: 0,\n            coneInnerAngle: 360,\n            coneOuterAngle: 360,\n            coneOuterGain: 0,\n            // filter:\n            type: 0,\n            frequency: param(),\n            Q: param(),\n            detune: param(),\n            // delay\n            delayTime: param(),\n            // convolver\n            buffer: 0,\n            // compressor\n            threshold: param(),\n            knee: param(),\n            ratio: param(),\n            attack: param(),\n            release: param(),\n            reduction: param(),\n            // distortion\n            oversample: 0,\n            curve: 0,\n            // buffer\n            sampleRate: 1,\n            length: 0,\n            duration: 0,\n            numberOfChannels: 0,\n            getChannelData: function() {\n                return [];\n            },\n            copyFromChannel: fn,\n            copyToChannel: fn,\n            // listener\n            dopplerFactor: 0,\n            speedOfSound: 0,\n            // osc\n            start: fn\n        };\n    }\n\n    // ie9\n    if (!window.Uint8Array) {\n        window.Uint8Array = window.Float32Array = Array;\n    }\n\n    return {\n        isFake: true,\n        createAnalyser: fakeNode,\n        createBuffer: fakeNode,\n        createBiquadFilter: fakeNode,\n        createChannelMerger: fakeNode,\n        createChannelSplitter: fakeNode,\n        createDynamicsCompressor: fakeNode,\n        createConvolver: fakeNode,\n        createDelay: fakeNode,\n        createGain: fakeNode,\n        createOscillator: fakeNode,\n        createPanner: fakeNode,\n        createScriptProcessor: fakeNode,\n        createWaveShaper: fakeNode,\n        destination: fakeNode,\n        listener: fakeNode(),\n        state: '',\n        get currentTime() {\n            return (Date.now() - startTime) / 1000;\n        }\n    };\n}\n","import FakeContext from './utils/fake-context';\n\nfunction getContext() {\n    const desiredSampleRate = 44100;\n\n    const Ctx = window.AudioContext || window.webkitAudioContext || FakeContext;\n\n    let ctx = new Ctx();\n\n\t// Check if hack is necessary. Only occurs in iOS6+ devices\n\t// and only when you first boot the iPhone, or play a audio/video\n\t// with a different sample rate\n\t// https://github.com/Jam3/ios-safe-audio-context/blob/master/index.js\n    if (/(iPhone|iPad)/i.test(navigator.userAgent) && ctx.sampleRate !== desiredSampleRate) {\n        const buffer = ctx.createBuffer(1, 1, desiredSampleRate);\n        const dummy = ctx.createBufferSource();\n        dummy.buffer = buffer;\n        dummy.connect(ctx.destination);\n        dummy.start(0);\n        dummy.disconnect();\n\n        ctx.close(); // dispose old context\n        ctx = new Ctx();\n    }\n\n\t// Handles bug in Safari 9 OSX where AudioContext instance starts in 'suspended' state\n\n    const isSuspended = ctx.state === 'suspended';\n\n    if (isSuspended && typeof ctx.resume === 'function') {\n        window.setTimeout(function() {\n            ctx.resume();\n        }, 1000);\n    }\n\n    return ctx;\n}\n\nexport default getContext();\n","const browser = {};\n\nbrowser.handlePageVisibility = function(onHidden, onShown) {\n    let hidden,\n        visibilityChange;\n\n    if (typeof document.hidden !== 'undefined') {\n        hidden = 'hidden';\n        visibilityChange = 'visibilitychange';\n    } else if (typeof document.mozHidden !== 'undefined') {\n        hidden = 'mozHidden';\n        visibilityChange = 'mozvisibilitychange';\n    } else if (typeof document.msHidden !== 'undefined') {\n        hidden = 'msHidden';\n        visibilityChange = 'msvisibilitychange';\n    } else if (typeof document.webkitHidden !== 'undefined') {\n        hidden = 'webkitHidden';\n        visibilityChange = 'webkitvisibilitychange';\n    }\n\n    function onChange() {\n        if (document[hidden]) {\n            onHidden();\n        } else {\n            onShown();\n        }\n    }\n\n    if (typeof visibilityChange !== 'undefined') {\n        document.addEventListener(visibilityChange, onChange, false);\n    }\n};\n\nbrowser.handleTouchLock = function(context, onUnlock) {\n    const ua = navigator.userAgent,\n        locked = !!ua.match(\n            /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i);\n\n    function unlock() {\n        if (context && context.state === 'suspended') {\n            context.resume()\n                .then(function() {\n                    const buffer = context.createBuffer(1, 1, 44100);\n                    const source = context.createBufferSource();\n                    source.buffer = buffer;\n                    source.connect(context.destination);\n                    source.start(0);\n                    source.stop(0);\n                    source.disconnect();\n\n                    document.body.removeEventListener('touchend', unlock);\n                    onUnlock();\n                });\n        } else {\n            document.body.removeEventListener('touchend', unlock);\n            onUnlock();\n        }\n    }\n\n    if (locked) {\n        document.body.addEventListener('touchend', unlock, false);\n    }\n\n    return locked;\n};\n\nexport default browser;\n","const extensions = [];\nconst canPlay = {};\n\n/*\n * Initial tests\n */\n\nconst tests = [{\n    ext: 'ogg',\n    type: 'audio/ogg; codecs=\"vorbis\"'\n}, {\n    ext: 'mp3',\n    type: 'audio/mpeg;'\n}, {\n    ext: 'opus',\n    type: 'audio/ogg; codecs=\"opus\"'\n}, {\n    ext: 'wav',\n    type: 'audio/wav; codecs=\"1\"'\n}, {\n    ext: 'm4a',\n    type: 'audio/x-m4a;'\n}, {\n    ext: 'm4a',\n    type: 'audio/aac;'\n}];\n\nlet el = document.createElement('audio');\nif (el) {\n    tests.forEach(function(test) {\n        const canPlayType = !!el.canPlayType(test.type);\n        if (canPlayType && extensions.indexOf(test.ext) === -1) {\n            extensions.push(test.ext);\n        }\n        canPlay[test.ext] = canPlayType;\n    });\n    el = null;\n}\n\n/*\n * find a supported file\n */\n\nfunction getFileExtension(url) {\n    if (typeof url !== 'string') {\n        return '';\n    }\n    // from DataURL\n    if (url.slice(0, 5) === 'data:') {\n        const match = url.match(/data:audio\\/(ogg|mp3|opus|wav|m4a)/i);\n        if (match && match.length > 1) {\n            return match[1].toLowerCase();\n        }\n    }\n    // from Standard URL\n    url = url.split('?')[0];\n    url = url.slice(url.lastIndexOf('/') + 1);\n\n    const a = url.split('.');\n    if (a.length === 1 || (a[0] === '' && a.length === 2)) {\n        return '';\n    }\n    return a.pop()\n        .toLowerCase();\n}\n\nfunction getSupportedFile(fileNames) {\n    let name;\n\n    if (Array.isArray(fileNames)) {\n        // if array get the first one that works\n        for (let i = 0; i < fileNames.length; i++) {\n            name = fileNames[i];\n            const ext = getFileExtension(name);\n            if (extensions.indexOf(ext) > -1) {\n                break;\n            }\n        }\n    } else if (typeof fileNames === 'object') {\n        // if not array and is object\n        Object.keys(fileNames)\n            .some(function(key) {\n                name = fileNames[key];\n                const ext = getFileExtension(name);\n                return extensions.indexOf(ext) > -1;\n            });\n    }\n    // if string just return\n    return name || fileNames;\n}\n\n/*\n * infer file types\n */\n\nfunction isAudioBuffer(data) {\n    return !!(data &&\n        window.AudioBuffer &&\n        data instanceof window.AudioBuffer);\n}\n\nfunction isArrayBuffer(data) {\n    return !!(data &&\n        window.ArrayBuffer &&\n        data instanceof window.ArrayBuffer);\n}\n\nfunction isMediaElement(data) {\n    return !!(data &&\n        window.HTMLMediaElement &&\n        data instanceof window.HTMLMediaElement);\n}\n\nfunction isMediaStream(data) {\n    return !!(data &&\n        typeof data.getAudioTracks === 'function' &&\n        data.getAudioTracks()\n        .length &&\n        window.MediaStreamTrack &&\n        data.getAudioTracks()[0] instanceof window.MediaStreamTrack);\n}\n\nfunction isOscillatorType(data) {\n    return !!(data && typeof data === 'string' &&\n        (data === 'sine' || data === 'square' ||\n            data === 'sawtooth' || data === 'triangle'));\n}\n\nfunction isScriptConfig(data) {\n    return !!(data && typeof data === 'object' &&\n        data.bufferSize && data.channels && data.callback);\n}\n\nfunction isURL(data) {\n    return !!(data && typeof data === 'string' &&\n        (data.indexOf('.') > -1 || data.slice(0, 5) === 'data:'));\n}\n\nfunction containsURL(config) {\n    if (!config || isMediaElement(config)) {\n        return false;\n    }\n    // string, array or object with src/url/data property that is string, array or arraybuffer\n    const src = config.src || config.url || config.data || config;\n    return isURL(src) || isArrayBuffer(src) || (Array.isArray(src) && isURL(src[0]));\n}\n\nexport default {\n    canPlay,\n    containsURL,\n    extensions,\n    getFileExtension,\n    getSupportedFile,\n    isAudioBuffer,\n    isMediaElement,\n    isMediaStream,\n    isOscillatorType,\n    isScriptConfig,\n    isURL\n};\n","export default class Effects {\n    constructor(context) {\n        this.context = context;\n        this._destination = null;\n        this._source = null;\n        // this.panning = new Panner(this.context);\n\n        this._nodes = [];\n        this._nodes.has = node => this.has(node);\n        this._nodes.add = node => this.add(node);\n        this._nodes.remove = node => this.remove(node);\n        this._nodes.toggle = (node, force) => this.toggle(node, force);\n        this._nodes.removeAll = () => this.removeAll();\n\n        Object.keys(Effects.prototype).forEach(key => {\n            if (!this._nodes.hasOwnProperty(key) && typeof Effects.prototype[key] === 'function') {\n                // console.log('-->', key, this[key]);\n                // this._nodes[key] = Effects.prototype[key].bind(this);\n                // this._nodes[key] = (opts) => this[key](opts);\n                this._nodes[key] = this[key].bind(this);\n            }\n        });\n    }\n\n    setSource(node) {\n        this._source = node;\n        this._updateConnections();\n        return node;\n    }\n\n    setDestination(node) {\n        this._connectToDestination(node);\n        return node;\n    }\n\n    has(node) {\n        if (!node) {\n            return false;\n        }\n        return this._nodes.indexOf(node) > -1;\n    }\n\n    add(node) {\n        if (!node) {\n            return null;\n        }\n        if (this.has(node)) {\n            return node;\n        }\n        if (Array.isArray(node)) {\n            let n;\n            for (let i = 0; i < node.length; i++) {\n                n = this.add(node[i]);\n            }\n            return n;\n        }\n        this._nodes.push(node);\n        this._updateConnections();\n        return node;\n    }\n\n    remove(node) {\n        if (!node) {\n            return null;\n        }\n        if (!this.has(node)) {\n            return node;\n        }\n        const l = this._nodes.length;\n        for (let i = 0; i < l; i++) {\n            if (node === this._nodes[i]) {\n                this._nodes.splice(i, 1);\n                break;\n            }\n        }\n        node.disconnect();\n        this._updateConnections();\n        return node;\n    }\n\n    toggle(node, force) {\n        force = !!force;\n        const hasNode = this.has(node);\n        if (arguments.length > 1 && hasNode === force) {\n            return this;\n        }\n        if (hasNode) {\n            this.remove(node);\n        } else {\n            this.add(node);\n        }\n        return this;\n    }\n\n    removeAll() {\n        while (this._nodes.length) {\n            const node = this._nodes.pop();\n            node.disconnect();\n        }\n        this._updateConnections();\n        return this;\n    }\n\n    destroy() {\n        this.removeAll();\n        this.context = null;\n        this._destination = null;\n        if (this._source) {\n            this._source.disconnect();\n        }\n        this._source = null;\n    }\n\n    _connect(a, b) {\n        a.disconnect();\n        // console.log('> connect output', (a.name || a.constructor.name), 'to input', (b.name || b.constructor.name));\n        a.connect(b._in || b);\n    }\n\n    _connectToDestination(node) {\n        const lastNode = this._nodes[this._nodes.length - 1] || this._source;\n\n        if (lastNode) {\n            this._connect(lastNode, node);\n        }\n\n        this._destination = node;\n    }\n\n    _updateConnections() {\n        if (!this._source) {\n            return;\n        }\n\n        // console.log('updateConnections');\n\n        let node,\n            prev;\n\n        for (let i = 0; i < this._nodes.length; i++) {\n            node = this._nodes[i];\n            prev = i === 0 ? this._source : this._nodes[i - 1];\n            this._connect(prev, node);\n        }\n\n        if (this._destination) {\n            this._connectToDestination(this._destination);\n        }\n    }\n}\n","import Effects from './effects';\n\nexport default function Group(context, destination) {\n    const sounds = [];\n    const effects = new Effects(context);\n    const gain = context.createGain();\n    let preMuteVolume = 1;\n    let group = null;\n\n    if (context) {\n        effects.setSource(gain);\n        effects.setDestination(destination || context.destination);\n    }\n\n    /*\n     * Add / remove\n     */\n\n    function find(soundOrId, callback) {\n        let found;\n\n        if (!soundOrId && soundOrId !== 0) {\n            return found;\n        }\n\n        sounds.some(function(sound) {\n            if (sound === soundOrId || sound.id === soundOrId) {\n                found = sound;\n                return true;\n            }\n            return false;\n        });\n\n        if (found && callback) {\n            return callback(found);\n        }\n\n        return found;\n    }\n\n    function remove(soundOrId) {\n        find(soundOrId, (sound) => sounds.splice(sounds.indexOf(sound), 1));\n        return group;\n    }\n\n    function add(sound) {\n        sound.gain.disconnect();\n        sound.gain.connect(gain);\n\n        sounds.push(sound);\n\n        sound.once('destroy', remove);\n\n        return group;\n    }\n\n    /*\n     * Controls\n     */\n\n    function play(delay, offset) {\n        sounds.forEach((sound) => sound.play(delay, offset));\n        return group;\n    }\n\n    function pause() {\n        sounds.forEach((sound) => {\n            if (sound.playing) {\n                sound.pause();\n            }\n        });\n        return group;\n    }\n\n    function resume() {\n        sounds.forEach((sound) => {\n            if (sound.paused) {\n                sound.play();\n            }\n        });\n        return group;\n    }\n\n    function stop() {\n        sounds.forEach((sound) => sound.stop());\n        return group;\n    }\n\n    function seek(percent) {\n        sounds.forEach((sound) => sound.seek(percent));\n        return group;\n    }\n\n    function mute() {\n        preMuteVolume = group.volume;\n        group.volume = 0;\n        return group;\n    }\n\n    function unMute() {\n        group.volume = preMuteVolume || 1;\n        return group;\n    }\n\n    function setVolume(value) {\n        group.volume = value;\n        return group;\n    }\n\n    function fade(volume, duration) {\n        if (context) {\n            const param = gain.gain;\n            const time = context.currentTime;\n\n            param.cancelScheduledValues(time);\n            param.setValueAtTime(param.value, time);\n            // param.setValueAtTime(volume, time + duration);\n            param.linearRampToValueAtTime(volume, time + duration);\n            // param.setTargetAtTime(volume, time, duration);\n            // param.exponentialRampToValueAtTime(Math.max(volume, 0.0001), time + duration);\n        } else {\n            sounds.forEach((sound) => sound.fade(volume, duration));\n        }\n\n        return group;\n    }\n\n    /*\n     * Load\n     */\n\n    function load() {\n        sounds.forEach((sound) => sound.load(null, true));\n    }\n\n    /*\n     * Unload\n     */\n\n    function unload() {\n        sounds.forEach((sound) => sound.unload());\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        while (sounds.length) {\n            sounds.pop()\n                .destroy();\n        }\n    }\n\n    /*\n     * Api\n     */\n\n    group = {\n        add,\n        find,\n        remove,\n        play,\n        pause,\n        resume,\n        stop,\n        seek,\n        setVolume,\n        mute,\n        unMute,\n        fade,\n        load,\n        unload,\n        destroy,\n        gain,\n        get effects() {\n            return effects._nodes;\n        },\n        set effects(value) {\n            effects.removeAll().add(value);\n        },\n        get fx() {\n            return this.effects;\n        },\n        set fx(value) {\n            this.effects = value;\n        },\n        get sounds() {\n            return sounds;\n        },\n        get volume() {\n            return gain.gain.value;\n        },\n        set volume(value) {\n            if (isNaN(value)) {\n                return;\n            }\n\n            value = Math.min(Math.max(value, 0), 1);\n\n            if (context) {\n                gain.gain.cancelScheduledValues(context.currentTime);\n                gain.gain.value = value;\n                gain.gain.setValueAtTime(value, context.currentTime);\n            } else {\n                gain.gain.value = value;\n            }\n            sounds.forEach((sound) => {\n                if (!sound.context) {\n                    sound.groupVolume = value;\n                }\n            });\n        }\n    };\n\n    return group;\n}\n\nGroup.Effects = Effects;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","import events from 'events';\nconst {EventEmitter} = events;\n\nexport default class Emitter extends EventEmitter {\n    constructor() {\n        super();\n    }\n\n    off (type, listener) {\n        if (listener) {\n            return this.removeListener(type, listener);\n        }\n        if (type) {\n            return this.removeAllListeners(type);\n        }\n        return this.removeAllListeners();\n    }\n}\n","import Emitter from './emitter';\n\nexport default function Loader(url, deferLoad) {\n    const ERROR_STATE = ['', 'ABORTED', 'NETWORK', 'DECODE', 'SRC_NOT_SUPPORTED'];\n    const emitter = new Emitter();\n    let progress = 0,\n        audioContext,\n        isTouchLocked,\n        request,\n        timeout,\n        data;\n\n    // clean up\n\n    function removeListeners() {\n        emitter.off('error');\n        emitter.off('progress');\n        emitter.off('complete');\n        emitter.off('loaded');\n\n        if (data && typeof data.removeEventListener === 'function') {\n            data.removeEventListener('canplaythrough', readyHandler);\n            data.removeEventListener('error', errorHandler);\n        }\n\n        if (request) {\n            request.removeEventListener('progress', progressHandler);\n            request.removeEventListener('load', loadHandler);\n            request.removeEventListener('error', errorHandler);\n        }\n    }\n\n    function dispatchComplete(buffer) {\n        emitter.emit('progress', 1);\n        emitter.emit('loaded', buffer);\n        emitter.emit('complete', buffer);\n\n        removeListeners();\n    }\n\n    function progressHandler(event) {\n        if (event.lengthComputable) {\n            progress = event.loaded / event.total;\n            emitter.emit('progress', progress);\n        }\n    }\n\n    // error\n\n    function errorHandler(event) {\n        window.clearTimeout(timeout);\n\n        let message = event;\n\n        if (data && data.error) {\n            message = 'Media Error: ' + ERROR_STATE[data.error.code] + ' ' + url;\n        }\n\n        if (request) {\n            message = 'XHR Error: ' + request.status + ' ' + request.statusText + ' ' + url;\n        }\n\n        emitter.emit('error', message);\n\n        removeListeners();\n    }\n\n    function decodeArrayBuffer(arraybuffer) {\n        audioContext.decodeAudioData(arraybuffer, (buffer) => {\n            data = buffer;\n            request = null;\n            progress = 1;\n            dispatchComplete(buffer);\n        },\n        errorHandler\n        );\n    }\n\n    function loadHandler() {\n        decodeArrayBuffer(request.response);\n    }\n\n    function readyHandler() {\n        window.clearTimeout(timeout);\n        if (!data) {\n            return;\n        }\n        progress = 1;\n        dispatchComplete(data);\n    }\n\n    function cancel() {\n        removeListeners();\n\n        if (request && request.readyState !== 4) {\n            request.abort();\n        }\n        request = null;\n\n        window.clearTimeout(timeout);\n    }\n\n    function destroy() {\n        cancel();\n        request = null;\n        data = null;\n        audioContext = null;\n    }\n\n    // audio buffer\n\n    function loadArrayBuffer() {\n        if (url instanceof window.ArrayBuffer) {\n            decodeArrayBuffer(url);\n            return;\n        }\n        request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.responseType = 'arraybuffer';\n        request.addEventListener('progress', progressHandler);\n        request.addEventListener('load', loadHandler);\n        request.addEventListener('error', errorHandler);\n        request.send();\n    }\n\n    // audio element\n\n    function loadAudioElement() {\n        if (!data || !data.tagName) {\n            data = document.createElement('audio');\n        }\n\n        if (!isTouchLocked) {\n            // timeout because sometimes canplaythrough doesn't fire\n            window.clearTimeout(timeout);\n            timeout = window.setTimeout(readyHandler, 2000);\n            data.addEventListener('canplaythrough', readyHandler, false);\n        }\n\n        data.addEventListener('error', errorHandler, false);\n        data.preload = 'auto';\n        data.src = url;\n        data.load();\n\n        if (isTouchLocked) {\n            dispatchComplete(data);\n        }\n    }\n\n    function start(force = false) {\n        if (deferLoad && !force) {\n            return;\n        }\n        if (audioContext) {\n            loadArrayBuffer();\n        } else {\n            loadAudioElement();\n        }\n    }\n\n    // reload\n\n    function load(newUrl) {\n        url = newUrl;\n        start();\n    }\n\n    const api = {\n        on: emitter.on.bind(emitter),\n        once: emitter.once.bind(emitter),\n        off: emitter.off.bind(emitter),\n        load,\n        start,\n        cancel,\n        destroy\n    };\n\n    Object.defineProperties(api, {\n        data: {\n            get: function() {\n                return data;\n            }\n        },\n        progress: {\n            get: function() {\n                return progress;\n            }\n        },\n        audioContext: {\n            set: function(value) {\n                audioContext = value;\n            }\n        },\n        isTouchLocked: {\n            set: function(value) {\n                isTouchLocked = value;\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n\nLoader.Group = function() {\n    const emitter = new Emitter();\n    const queue = [];\n    let numLoaded = 0,\n        numTotal = 0,\n        currentLoader;\n\n    function progressHandler(progress) {\n        const loaded = numLoaded + progress;\n        emitter.emit('progress', loaded / numTotal);\n    }\n\n    function completeHandler() {\n        numLoaded++;\n        removeListeners();\n        emitter.emit('progress', numLoaded / numTotal);\n        next();\n    }\n\n    function errorHandler(e) {\n        console.error(e);\n        removeListeners();\n        emitter.emit('error', e);\n        next();\n    }\n\n    function next() {\n        if (queue.length === 0) {\n            currentLoader = null;\n            emitter.emit('complete');\n            return;\n        }\n\n        currentLoader = queue.pop();\n        currentLoader.on('progress', progressHandler);\n        currentLoader.once('loaded', completeHandler);\n        currentLoader.once('error', errorHandler);\n        currentLoader.start();\n    }\n\n    function removeListeners() {\n        currentLoader.off('progress', progressHandler);\n        currentLoader.off('loaded', completeHandler);\n        currentLoader.off('error', errorHandler);\n    }\n\n    function add(loader) {\n        queue.push(loader);\n        numTotal++;\n        return loader;\n    }\n\n    function start() {\n        numTotal = queue.length;\n        next();\n    }\n\n    return Object.freeze({\n        on: emitter.on.bind(emitter),\n        once: emitter.once.bind(emitter),\n        off: emitter.off.bind(emitter),\n        add,\n        start\n    });\n};\n","export default function BufferSource(buffer, context, onEnded) {\n    const api = {};\n    let ended = false,\n        endedCallback = onEnded,\n        loop = false,\n        paused = false,\n        pausedAt = 0,\n        playbackRate = 1,\n        playing = false,\n        sourceNode = null,\n        startedAt = 0;\n\n    function createSourceNode() {\n        if (!sourceNode && context) {\n            sourceNode = context.createBufferSource();\n            sourceNode.buffer = buffer;\n        }\n        return sourceNode;\n    }\n\n    /*\n     * Controls\n     */\n\n    function stop() {\n        if (sourceNode) {\n            sourceNode.onended = null;\n            try {\n                sourceNode.disconnect();\n                sourceNode.stop(0);\n            } catch (e) {}\n            sourceNode = null;\n        }\n\n        paused = false;\n        pausedAt = 0;\n        playing = false;\n        startedAt = 0;\n    }\n\n    function pause() {\n        const elapsed = context.currentTime - startedAt;\n        stop();\n        pausedAt = elapsed;\n        playing = false;\n        paused = true;\n    }\n\n    function endedHandler() {\n        stop();\n        ended = true;\n        if (typeof endedCallback === 'function') {\n            endedCallback(api);\n        }\n    }\n\n    function play(delay, offset = 0) {\n        if (playing) {\n            return;\n        }\n\n        delay = delay ? context.currentTime + delay : 0;\n        if (offset) {\n            pausedAt = 0;\n        }\n        if (pausedAt) {\n            offset = pausedAt;\n        }\n        while (offset > api.duration) {\n            offset = offset % api.duration;\n        }\n\n        createSourceNode();\n        sourceNode.onended = endedHandler;\n        sourceNode.start(delay, offset);\n\n        sourceNode.loop = loop;\n        sourceNode.playbackRate.value = playbackRate;\n\n        startedAt = context.currentTime - offset;\n        ended = false;\n        paused = false;\n        pausedAt = 0;\n        playing = true;\n    }\n\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        stop();\n        buffer = null;\n        context = null;\n        endedCallback = null;\n        sourceNode = null;\n    }\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        play: {\n            value: play\n        },\n        pause: {\n            value: pause\n        },\n        stop: {\n            value: stop\n        },\n        destroy: {\n            value: destroy\n        },\n        currentTime: {\n            get: function() {\n                if (pausedAt) {\n                    return pausedAt;\n                }\n                if (startedAt) {\n                    let time = context.currentTime - startedAt;\n                    if (time > api.duration) {\n                        time = time % api.duration;\n                    }\n                    return time;\n                }\n                return 0;\n            }\n        },\n        duration: {\n            get: function() {\n                return buffer ? buffer.duration : 0;\n            }\n        },\n        ended: {\n            get: function() {\n                return ended;\n            }\n        },\n        loop: {\n            get: function() {\n                return loop;\n            },\n            set: function(value) {\n                loop = !!value;\n                if (sourceNode) {\n                    sourceNode.loop = loop;\n                }\n            }\n        },\n        paused: {\n            get: function() {\n                return paused;\n            }\n        },\n        playbackRate: {\n            get: function() {\n                return playbackRate;\n            },\n            set: function(value) {\n                playbackRate = value;\n                if (sourceNode) {\n                    sourceNode.playbackRate.value = playbackRate;\n                }\n            }\n        },\n        playing: {\n            get: function() {\n                return playing;\n            }\n        },\n        progress: {\n            get: function() {\n                return api.duration ? api.currentTime / api.duration : 0;\n            }\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","import context from '../context';\n\nlet offlineCtx;\n/*\nIn contrast with a standard AudioContext, an OfflineAudioContext doesn't render\nthe audio to the device hardware;\ninstead, it generates it, as fast as it can, and outputs the result to an AudioBuffer.\n*/\nfunction getOfflineContext(numOfChannels, length, sampleRate) {\n    if (offlineCtx) {\n        return offlineCtx;\n    }\n    numOfChannels = numOfChannels || 2;\n    sampleRate = sampleRate || 44100;\n    length = sampleRate || numOfChannels;\n\n    const OfflineCtx = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n\n    offlineCtx = (OfflineCtx ? new OfflineCtx(numOfChannels, length, sampleRate) : null);\n\n    return offlineCtx;\n}\n\n\n/*\n * clone audio buffer\n */\n\nfunction cloneBuffer(buffer) {\n    if (!context) {\n        return buffer;\n    }\n\n    const numChannels = buffer.numberOfChannels,\n        cloned = context.createBuffer(numChannels, buffer.length, buffer.sampleRate);\n    for (let i = 0; i < numChannels; i++) {\n        cloned.getChannelData(i)\n\t\t\t.set(buffer.getChannelData(i));\n    }\n    return cloned;\n}\n\n/*\n * reverse audio buffer\n */\n\nfunction reverseBuffer(buffer) {\n    const numChannels = buffer.numberOfChannels;\n    for (let i = 0; i < numChannels; i++) {\n        Array.prototype.reverse.call(buffer.getChannelData(i));\n    }\n    return buffer;\n}\n\n/*\n * ramp audio param\n */\n\nfunction ramp(param, fromValue, toValue, duration, linear) {\n    if (context.isFake) {\n        return;\n    }\n\n    param.setValueAtTime(fromValue, context.currentTime);\n\n    if (linear) {\n        param.linearRampToValueAtTime(toValue, context.currentTime + duration);\n    } else {\n        param.exponentialRampToValueAtTime(toValue, context.currentTime + duration);\n    }\n}\n\n/*\n * get frequency from min to max by passing 0 to 1\n */\n\nfunction getFrequency(value) {\n    if (context.isFake) {\n        return 0;\n    }\n\t// get frequency by passing number from 0 to 1\n\t// Clamp the frequency between the minimum value (40 Hz) and half of the\n\t// sampling rate.\n    const minValue = 40;\n    const maxValue = context.sampleRate / 2;\n\t// Logarithm (base 2) to compute how many octaves fall in the range.\n    const numberOfOctaves = Math.log(maxValue / minValue) / Math.LN2;\n\t// Compute a multiplier from 0 to 1 based on an exponential scale.\n    const multiplier = Math.pow(2, numberOfOctaves * (value - 1.0));\n\t// Get back to the frequency value between min and max.\n    return maxValue * multiplier;\n}\n\n/*\n * Format seconds as timecode string\n */\n\nfunction timeCode(seconds, delim = ':') {\n\t// const h = Math.floor(seconds / 3600);\n\t// const m = Math.floor((seconds % 3600) / 60);\n    const m = Math.floor(seconds / 60);\n    const s = Math.floor((seconds % 3600) % 60);\n\t// const hr = (h < 10 ? '0' + h + delim : h + delim);\n    const mn = (m < 10 ? '0' + m : m) + delim;\n    const sc = (s < 10 ? '0' + s : s);\n\t// return hr + mn + sc;\n    return mn + sc;\n}\n\nexport default {\n    getOfflineContext,\n    cloneBuffer,\n    reverseBuffer,\n    ramp,\n    getFrequency,\n    timeCode\n};\n","export default function AudioSource(Type, data, context, onEnded) {\n    const sourceNode = context ? context.createGain() : null;\n    const api = {};\n    const pool = [];\n    const sources = [];\n    let numCreated = 0;\n    let multiPlay = false;\n\n    function createSourceNode() {\n        return sourceNode;\n    }\n\n    function disposeSource(src) {\n        src.stop();\n        if (multiPlay) {\n            pool.push(src);\n        }\n    }\n\n    function onSourceEnded(src) {\n        if (sources.length > 1) {\n            const index = sources.indexOf(src);\n            sources.splice(index, 1);\n        }\n        disposeSource(src);\n        onEnded();\n    }\n\n    function getSource() {\n        if (!multiPlay && sources.length) {\n            return sources[0];\n        }\n        if ( pool.length > 0 ) {\n            return pool.pop();\n        } else {\n            numCreated++;\n            if (data.tagName) {\n                return new Type(data.cloneNode(), context, onSourceEnded);\n            }\n            return new Type(data, context, onSourceEnded);\n        }\n    }\n\n    function play() {\n        const src = getSource();\n        if (sourceNode) {\n            src.sourceNode.connect(sourceNode);\n        }\n        if (src !== sources[0]) {\n            sources.push(src);\n        }\n        src.play();\n    }\n\n    function stop() {\n        while (sources.length > 1) {\n            disposeSource(sources.pop());\n        }\n    }\n\n    function pause() {\n        sources.forEach((src) => src.pause());\n    }\n\n    function load(url) {\n        stop();\n        pool.length = 0;\n        if (sources.length) {\n            sources[0].load(url);\n        }\n    }\n\n    function fade(volume, duration) {\n        sources.forEach((src) => src.fade(volume, duration));\n    }\n\n    function destroy() {\n        while (sources.length) {\n            sources.pop().destroy();\n        }\n        while (pool.length) {\n            pool.pop().destroy();\n        }\n        sourceNode.disconnect();\n    }\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        play: {\n            value: play\n        },\n        pause: {\n            value: pause\n        },\n        stop: {\n            value: stop\n        },\n        load: {\n            value: load\n        },\n        fade: {\n            value: fade\n        },\n        destroy: {\n            value: destroy\n        },\n        currentTime: {\n            get: function() {\n                return (sources[0] && sources[0].currentTime) || 0;\n            }\n        },\n        duration: {\n            get: function() {\n                return (sources[0] && sources[0].duration) || 0;\n            }\n        },\n        ended: {\n            get: function() {\n                return sources.every((src) => src.ended);\n            }\n        },\n        multiPlay: {\n            get: function() {\n                return multiPlay;\n            },\n            set: function(value) {\n                multiPlay = value;\n            }\n        },\n        loop: {\n            get: function() {\n                return sources[0] && sources[0].loop;\n            },\n            set: function(value) {\n                sources.forEach((src) => (src.loop = !!value));\n            }\n        },\n        paused: {\n            get: function() {\n                return sources[0] && sources[0].paused;\n            }\n        },\n        playbackRate: {\n            get: function() {\n                return sources[0] && sources[0].playbackRate;\n            },\n            set: function(value) {\n                sources.forEach((src) => (src.playbackRate = value));\n            }\n        },\n        playing: {\n            get: function() {\n                return sources[0] && sources[0].playing;\n            }\n        },\n        info: {\n            get: function() {\n                return {\n                    pooled: pool.length,\n                    active: sources.length,\n                    created: numCreated\n                };\n            }\n        },\n        progress: {\n            get: function() {\n                return sources[0] && sources[0].progress;\n            }\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        },\n        volume: {\n            get: function() {\n                return sources[0] && sources[0].volume;\n            },\n            set: function(value) {\n                sources.forEach((src) => (src.volume = value));\n            }\n        },\n        groupVolume: {\n            get: function() {\n                return sources[0] && sources[0].groupVolume;\n            },\n            set: function(value) {\n                if (sources[0] && !sources[0].hasOwnProperty('groupVolume')) {\n                    return;\n                }\n                sources.forEach((src) => (src.groupVolume = value));\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","export default function MediaSource(el, context, onEnded) {\n    const api = {};\n    let ended = false,\n        endedCallback = onEnded,\n        delayTimeout,\n        fadeTimeout,\n        loop = false,\n        paused = false,\n        playbackRate = 1,\n        playing = false,\n        sourceNode = null,\n        groupVolume = 1,\n        volume = 1;\n\n    function createSourceNode() {\n        if (!sourceNode && context) {\n            sourceNode = context.createMediaElementSource(el);\n        }\n        return sourceNode;\n    }\n\n    /*\n     * Load\n     */\n\n    function load(url) {\n        el.src = url;\n        el.load();\n        ended = false;\n        paused = false;\n        playing = false;\n    }\n\n    /*\n     * Controls\n     */\n\n    function readyHandler() {\n        el.removeEventListener('canplaythrough', readyHandler);\n        if (playing) {\n            el.play();\n        }\n    }\n\n    /*\n     * Ended handler\n     */\n\n    function endedHandler() {\n\n        if (loop) {\n            el.currentTime = 0;\n            // fixes bug where server doesn't support seek:\n            if (el.currentTime > 0) {\n                el.load();\n            }\n            el.play();\n\n            return;\n        }\n\n        ended = true;\n        paused = false;\n        playing = false;\n\n        if (typeof endedCallback === 'function') {\n            endedCallback(api);\n        }\n    }\n\n    function play(delay, offset) {\n        clearTimeout(delayTimeout);\n\n        el.volume = volume * groupVolume;\n        el.playbackRate = playbackRate;\n\n        if (offset) {\n            el.currentTime = offset;\n        }\n\n        if (delay) {\n            delayTimeout = setTimeout(play, delay);\n        } else {\n            // el.load();\n            el.play();\n        }\n\n        ended = false;\n        paused = false;\n        playing = true;\n\n        el.removeEventListener('ended', endedHandler);\n        el.addEventListener('ended', endedHandler, false);\n\n        if (el.readyState < 1) {\n            el.removeEventListener('canplaythrough', readyHandler);\n            el.addEventListener('canplaythrough', readyHandler, false);\n            el.load();\n            el.play();\n        }\n    }\n\n    function pause() {\n        clearTimeout(delayTimeout);\n\n        if (!el) {\n            return;\n        }\n\n        el.pause();\n        playing = false;\n        paused = true;\n    }\n\n    function stop() {\n        clearTimeout(delayTimeout);\n\n        if (!el) {\n            return;\n        }\n\n        el.pause();\n\n        try {\n            el.currentTime = 0;\n            // fixes bug where server doesn't support seek:\n            if (el.currentTime > 0) {\n                el.load();\n            }\n        } catch (e) {}\n\n        playing = false;\n        paused = false;\n    }\n\n    /*\n     * Fade for no webaudio\n     */\n\n    function fade(toVolume, duration) {\n        if (context) {\n            return api;\n        }\n\n        function ramp(value, step) {\n            fadeTimeout = window.setTimeout(() => {\n                api.volume = api.volume + (value - api.volume) * 0.2;\n                if (Math.abs(api.volume - value) > 0.05) {\n                    ramp(value, step);\n                    return;\n                }\n                api.volume = value;\n            }, step * 1000);\n        }\n\n        window.clearTimeout(fadeTimeout);\n        ramp(toVolume, duration / 10);\n\n        return api;\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        el.removeEventListener('ended', endedHandler);\n        el.removeEventListener('canplaythrough', readyHandler);\n        stop();\n        el = null;\n        context = null;\n        endedCallback = null;\n        sourceNode = null;\n    }\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        play: {\n            value: play\n        },\n        pause: {\n            value: pause\n        },\n        stop: {\n            value: stop\n        },\n        load: {\n            value: load\n        },\n        fade: {\n            value: fade\n        },\n        destroy: {\n            value: destroy\n        },\n        currentTime: {\n            get: function() {\n                return el ? el.currentTime : 0;\n            }\n        },\n        duration: {\n            get: function() {\n                return el ? el.duration : 0;\n            }\n        },\n        ended: {\n            get: function() {\n                return ended;\n            }\n        },\n        loop: {\n            get: function() {\n                return loop;\n            },\n            set: function(value) {\n                loop = !!value;\n            }\n        },\n        paused: {\n            get: function() {\n                return paused;\n            }\n        },\n        playbackRate: {\n            get: function() {\n                return playbackRate;\n            },\n            set: function(value) {\n                playbackRate = value;\n                if (el) {\n                    el.playbackRate = playbackRate;\n                }\n            }\n        },\n        playing: {\n            get: function() {\n                return playing;\n            }\n        },\n        progress: {\n            get: function() {\n                return el && el.duration ? el.currentTime / el.duration : 0;\n            }\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        },\n        volume: {\n            get: function() {\n                return volume;\n            },\n            set: function(value) {\n                window.clearTimeout(fadeTimeout);\n                volume = value;\n                if (el) {\n                    el.volume = volume * groupVolume;\n                }\n            }\n        },\n        groupVolume: {\n            get: function() {\n                return groupVolume;\n            },\n            set: function(value) {\n                groupVolume = value;\n                if (el) {\n                    el.volume = volume * groupVolume;\n                }\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","export default function MicrophoneSource(stream, context) {\n    let ended = false,\n        paused = false,\n        pausedAt = 0,\n        playing = false,\n        sourceNode = null, // MicrophoneSourceNode\n        startedAt = 0;\n\n    function createSourceNode() {\n        if (!sourceNode && context) {\n            sourceNode = context.createMediaStreamSource(stream);\n            // HACK: stops moz garbage collection killing the stream\n            // see https://support.mozilla.org/en-US/questions/984179\n            if (navigator.mozGetUserMedia) {\n                window.mozHack = sourceNode;\n            }\n        }\n        return sourceNode;\n    }\n\n    /*\n     * Controls\n     */\n\n    function play(delay) {\n        delay = delay ? context.currentTime + delay : 0;\n\n        createSourceNode();\n        sourceNode.start(delay);\n\n        startedAt = context.currentTime - pausedAt;\n        ended = false;\n        playing = true;\n        paused = false;\n        pausedAt = 0;\n    }\n\n    function stop() {\n        if (sourceNode) {\n            try {\n                sourceNode.stop(0);\n            } catch (e) {}\n            sourceNode = null;\n        }\n        ended = true;\n        paused = false;\n        pausedAt = 0;\n        playing = false;\n        startedAt = 0;\n    }\n\n    function pause() {\n        const elapsed = context.currentTime - startedAt;\n        stop();\n        pausedAt = elapsed;\n        playing = false;\n        paused = true;\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        stop();\n        context = null;\n        sourceNode = null;\n        stream = null;\n        window.mozHack = null;\n    }\n\n    /*\n     * Api\n     */\n\n    const api = {\n        play,\n        pause,\n        stop,\n        destroy,\n\n        duration: 0,\n        progress: 0\n    };\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        currentTime: {\n            get: function() {\n                if (pausedAt) {\n                    return pausedAt;\n                }\n                if (startedAt) {\n                    return context.currentTime - startedAt;\n                }\n                return 0;\n            }\n        },\n        ended: {\n            get: function() {\n                return ended;\n            }\n        },\n        paused: {\n            get: function() {\n                return paused;\n            }\n        },\n        playing: {\n            get: function() {\n                return playing;\n            }\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","export default function OscillatorSource(type, context) {\n    let ended = false,\n        paused = false,\n        pausedAt = 0,\n        playing = false,\n        sourceNode = null, // OscillatorSourceNode\n        startedAt = 0,\n        frequency = 200,\n        api = null;\n\n    function createSourceNode() {\n        if (!sourceNode && context) {\n            sourceNode = context.createOscillator();\n            sourceNode.type = type;\n            sourceNode.frequency.value = frequency;\n        }\n        return sourceNode;\n    }\n\n    /*\n     * Controls\n     */\n\n    function play(delay) {\n        delay = delay || 0;\n        if (delay) {\n            delay = context.currentTime + delay;\n        }\n\n        createSourceNode();\n        sourceNode.start(delay);\n\n        if (pausedAt) {\n            startedAt = context.currentTime - pausedAt;\n        } else {\n            startedAt = context.currentTime;\n        }\n\n        ended = false;\n        playing = true;\n        paused = false;\n        pausedAt = 0;\n    }\n\n    function stop() {\n        if (sourceNode) {\n            try {\n                sourceNode.stop(0);\n            } catch (e) {}\n            sourceNode = null;\n        }\n        ended = true;\n        paused = false;\n        pausedAt = 0;\n        playing = false;\n        startedAt = 0;\n    }\n\n    function pause() {\n        const elapsed = context.currentTime - startedAt;\n        stop();\n        pausedAt = elapsed;\n        playing = false;\n        paused = true;\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        stop();\n        context = null;\n        sourceNode = null;\n    }\n\n    /*\n     * Api\n     */\n\n    api = {\n        play: play,\n        pause: pause,\n        stop: stop,\n        destroy: destroy\n    };\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        currentTime: {\n            get: function() {\n                if (pausedAt) {\n                    return pausedAt;\n                }\n                if (startedAt) {\n                    return context.currentTime - startedAt;\n                }\n                return 0;\n            }\n        },\n        duration: {\n            value: 0\n        },\n        ended: {\n            get: function() {\n                return ended;\n            }\n        },\n        frequency: {\n            get: function() {\n                return frequency;\n            },\n            set: function(value) {\n                frequency = value;\n                if (sourceNode) {\n                    sourceNode.frequency.value = value;\n                }\n            }\n        },\n        paused: {\n            get: function() {\n                return paused;\n            }\n        },\n        playing: {\n            get: function() {\n                return playing;\n            }\n        },\n        progress: {\n            value: 0\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","export default function ScriptSource(data, context) {\n    const bufferSize = data.bufferSize || 1024;\n    const channels = data.channels || 1;\n    let ended = false,\n        onProcess = data.callback.bind(data.thisArg || this),\n        paused = false,\n        pausedAt = 0,\n        playing = false,\n        sourceNode = null, // ScriptSourceNode\n        startedAt = 0,\n        api = null;\n\n    function createSourceNode() {\n        if (!sourceNode && context) {\n            sourceNode = context.createScriptProcessor(bufferSize, 0, channels);\n        }\n        return sourceNode;\n    }\n\n    /*\n     * Controls\n     */\n\n    function play() {\n        createSourceNode();\n        sourceNode.onaudioprocess = onProcess;\n\n        startedAt = context.currentTime - pausedAt;\n        ended = false;\n        paused = false;\n        pausedAt = 0;\n        playing = true;\n    }\n\n    function onPaused(event) {\n        const buffer = event.outputBuffer;\n        for (let i = 0; i < buffer.numberOfChannels; i++) {\n            const channel = buffer.getChannelData(i);\n            for (let j = 0; j < channel.length; j++) {\n                channel[j] = 0;\n            }\n        }\n    }\n\n    function stop() {\n        if (sourceNode) {\n            sourceNode.onaudioprocess = onPaused;\n        }\n        ended = true;\n        paused = false;\n        pausedAt = 0;\n        playing = false;\n        startedAt = 0;\n    }\n\n    function pause() {\n        const elapsed = context.currentTime - startedAt;\n        stop();\n        pausedAt = elapsed;\n        playing = false;\n        paused = true;\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroy() {\n        stop();\n        context = null;\n        onProcess = null;\n        sourceNode = null;\n    }\n\n    /*\n     * Api\n     */\n\n    api = {\n        play,\n        pause,\n        stop,\n        destroy,\n\n        duration: 0,\n        progress: 0\n    };\n\n    /*\n     * Getters & Setters\n     */\n\n    Object.defineProperties(api, {\n        currentTime: {\n            get: function() {\n                if (pausedAt) {\n                    return pausedAt;\n                }\n                if (startedAt) {\n                    return context.currentTime - startedAt;\n                }\n                return 0;\n            }\n        },\n        ended: {\n            get: function() {\n                return ended;\n            }\n        },\n        paused: {\n            get: function() {\n                return paused;\n            }\n        },\n        playing: {\n            get: function() {\n                return playing;\n            }\n        },\n        sourceNode: {\n            get: function() {\n                return createSourceNode();\n            }\n        }\n    });\n\n    return Object.freeze(api);\n}\n","import context from './context';\nimport BufferSource from './source/buffer-source';\nimport Effects from './effects';\nimport Emitter from './utils/emitter';\nimport file from './utils/file';\nimport utils from './utils/utils';\nimport Loader from './utils/loader';\nimport AudioSource from './source/audio-source';\nimport MediaSource from './source/media-source';\nimport MicrophoneSource from './source/microphone-source';\nimport OscillatorSource from './source/oscillator-source';\nimport ScriptSource from './source/script-source';\n\nexport default class Sound extends Emitter {\n    constructor(config) {\n        super();\n\n        this.id = config.id || null;\n\n        this._context = config.context || context;\n        this._destination = config.destination || this._context.destination;\n        this._effects = new Effects(this._context);\n        this._gain = this._context.createGain();\n        this._config = config;\n\n        this._data = null;\n        this._isTouchLocked = false;\n        this._loader = null;\n        this._loop = false;\n        this._playbackRate = 1;\n        this._playWhenReady = null;\n        this._source = null;\n        this._wave = null;\n\n        this._effects.setDestination(this._gain);\n        this._gain.connect(this._destination);\n\n        this._onEnded = this._onEnded.bind(this);\n        this._onLoad = this._onLoad.bind(this);\n        this._onLoadError = this._onLoadError.bind(this);\n    }\n\n    load(newConfig = null, force = false) {\n        const skipLoad = !force && !this._source && !!this._config.deferLoad;\n\n        if (newConfig) {\n            const configSrc = newConfig.src || newConfig.url || newConfig.data || newConfig;\n            const src = file.getSupportedFile(configSrc) || this._config.src;\n            this._config = Object.assign(this._config, newConfig, {src});\n        }\n\n        if (this._source && this._data && this._data.tagName) {\n            this._source.load(this._config.src);\n        } else {\n            this._loader = this._loader || new Loader(this._config.src, skipLoad);\n            this._loader.audioContext = !!this._config.asMediaElement || this._context.isFake ? null : this._context;\n            this._loader.isTouchLocked = this._isTouchLocked;\n            this._loader.off('loaded', this._onLoad);\n            this._loader.once('loaded', this._onLoad);\n            this._loader.off('error', this._onLoadError);\n            this._loader.on('error', this._onLoadError);\n        }\n        return this;\n    }\n\n    play(delay, offset) {\n        if (!this._source || this._isTouchLocked) {\n            this._playWhenReady = () => {\n                if (this._source) {\n                    this.play(delay, offset);\n                }\n            };\n            if (!!this._config.deferLoad) {\n                if (!this._loader) {\n                    this._load(null, true);\n                }\n                this._loader.start(true);\n            }\n            return this;\n        }\n        this._playWhenReady = null;\n        this._effects.setSource(this._source.sourceNode);\n\n        // update volume needed for no webaudio\n        if (this._context.isFake) {\n            this.volume = this._gain.gain.value;\n        }\n\n        this._source.play(delay, offset);\n\n        if (this._source.hasOwnProperty('loop')) {\n            this._source.loop = this._loop;\n        }\n\n        this.emit('play', this);\n\n        return this;\n    }\n\n    pause() {\n        this._source && this._source.pause();\n        this.emit('pause', this);\n        return this;\n    }\n\n    stop(delay) {\n        this._source && this._source.stop(delay || 0);\n        this.emit('stop', this);\n        return this;\n    }\n\n    seek(percent) {\n        if (this._source) {\n            this._source.stop();\n            this.play(0, this._source.duration * percent);\n        }\n        return this;\n    }\n\n    fade(volume, duration = 1) {\n        if (!this._source) {\n            return this;\n        }\n\n        const param = this._gain.gain;\n\n        if (this._context && !this._context.isFake) {\n            const time = this._context.currentTime;\n            param.cancelScheduledValues(time);\n            param.setValueAtTime(param.value, time);\n            param.linearRampToValueAtTime(volume, time + duration);\n        } else if (typeof this._source.fade === 'function') {\n            this._source.fade(volume, duration);\n            param.value = volume;\n        }\n\n        this.emit('fade', this, volume);\n\n        return this;\n    }\n\n    unload() {\n        this._source && this._source.destroy();\n        this._loader && this._loader.destroy();\n        this._data = null;\n        this._playWhenReady = null;\n        this._source = null;\n        this._loader = null;\n        this._config.deferLoad = true;\n        this.emit('unload', this);\n    }\n\n    reload() {\n        return this.load(null, true);\n    }\n\n    destroy() {\n        this._source && this._source.destroy();\n        this._effects && this._effects.destroy();\n        this._gain && this._gain.disconnect();\n        if (this._loader) {\n            this._loader.off('loaded');\n            this._loader.off('error');\n            this._loader.destroy();\n        }\n        this._gain = null;\n        this._context = null;\n        this._destination = null;\n        this._data = null;\n        this._playWhenReady = null;\n        this._source = null;\n        this._effects = null;\n        this._loader = null;\n        this._config = null;\n        this.emit('destroy', this);\n        this.off();\n    }\n\n    has(node) {\n        return this._effects.has(node);\n    }\n\n    add(node) {\n        return this._effects.add(node);\n    }\n\n    remove(node) {\n        return this._effects.remove(node);\n    }\n\n    toggle(node, force) {\n        this._effects.toggle(node, force);\n        return this;\n    }\n\n    removeAll() {\n        this._effects.removeAll();\n        return this;\n    }\n\n    waveform (length) {\n        if (!this._wave) {\n            this._wave = utils.waveform();\n        }\n        if (!this._data) {\n            this.once('ready', () => this._wave(this._data, length));\n        }\n        return this._wave(this._data, length);\n    }\n\n    get currentTime() {\n        return this._source ? this._source.currentTime : 0;\n    }\n\n    get context() {\n        return this._context;\n    }\n\n    set currentTime(value) {\n        this._source && this._source.stop();\n        this.play(0, value);\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set data(value) {\n        if (!value) {\n            return;\n        }\n        this._createSource(value);\n    }\n\n    get duration() {\n        return this._source ? this._source.duration : 0;\n    }\n\n    get effects() {\n        return this._effects._nodes;\n    }\n\n    set effects(value) {\n        this._effects.removeAll().add(value);\n    }\n\n    get fx() {\n        return this.effects;\n    }\n\n    set fx(value) {\n        this.effects = value;\n    }\n\n    get ended() {\n        return !!this._source && this._source.ended;\n    }\n\n    get frequency() {\n        return this._source ? this._source.frequency : 0;\n    }\n\n    set frequency(value) {\n        if (this._source && this._source.hasOwnProperty('frequency')) {\n            this._source.frequency = value;\n        }\n    }\n\n    get gain() {\n        return this._gain;\n    }\n\n    // for media element source\n    get groupVolume() {\n        return this._source.groupVolume;\n    }\n\n    set groupVolume(value) {\n        if (this._source && this._source.hasOwnProperty('groupVolume')) {\n            this._source.groupVolume = value;\n        }\n    }\n\n    set isTouchLocked(value) {\n        this._isTouchLocked = value;\n        if (this._loader) {\n            this._loader.isTouchLocked = value;\n        }\n        if (!value && this._playWhenReady) {\n            this._playWhenReady();\n        }\n    }\n\n    get loader() {\n        return this._loader;\n    }\n\n    get loop() {\n        return this._loop;\n    }\n\n    set loop(value) {\n        this._loop = !!value;\n\n        if (this._source && this._source.hasOwnProperty('loop') && this._source.loop !== this._loop) {\n            this._source.loop = this._loop;\n        }\n    }\n\n    get multiPlay() {\n        return this._config.multiPlay;\n    }\n\n    set multiPlay(value) {\n        this._config.multiPlay = value;\n        this._source.multiPlay = value;\n    }\n\n    get config() {\n        return this._config;\n    }\n\n    get paused() {\n        return !!this._source && this._source.paused;\n    }\n\n    get playing() {\n        return !!this._source && this._source.playing;\n    }\n\n    get playbackRate() {\n        return this._playbackRate;\n    }\n\n    set playbackRate(value) {\n        this._playbackRate = value;\n        if (this._source) {\n            this._source.playbackRate = value;\n        }\n    }\n\n    get progress() {\n        return this._source ? this._source.progress || 0 : 0;\n    }\n\n    get sourceInfo() {\n        return this._source && this._source.info ? this._source.info : {};\n    }\n\n    get sourceNode() {\n        return this._source ? this._source.sourceNode : null;\n    }\n\n    get volume() {\n        if (this._context && !this._context.isFake) {\n            return this._gain.gain.value;\n        }\n        if (this._source && this._source.hasOwnProperty('volume')) {\n            return this._source.volume;\n        }\n        return 1;\n    }\n\n    set volume(value) {\n        if (isNaN(value)) {\n            return;\n        }\n\n        value = Math.min(Math.max(value, 0), 1);\n\n        const param = this._gain.gain;\n\n        if (this._context && !this._context.isFake) {\n            const time = this._context.currentTime;\n            param.cancelScheduledValues(time);\n            param.value = value;\n            param.setValueAtTime(value, time);\n        } else {\n            param.value = value;\n\n            if (this._source && this._source.hasOwnProperty('volume')) {\n                this._source.volume = value;\n            }\n        }\n    }\n\n    get userData() {\n        return {};\n    }\n\n    _createSource(data) {\n        this._data = data;\n\n        const isAudioBuffer = file.isAudioBuffer(data);\n        if (isAudioBuffer || file.isMediaElement(data)) {\n            const Fn = isAudioBuffer ? BufferSource : MediaSource;\n            this._source = new AudioSource(Fn, data, this._context, this._onEnded);\n            this._source.multiPlay = !!this._config.multiPlay;\n        } else if (file.isMediaStream(data)) {\n            this._source = new MicrophoneSource(data, this._context);\n        } else if (file.isOscillatorType((data && data.type) || data)) {\n            this._source = new OscillatorSource(data.type || data, this._context);\n        } else if (file.isScriptConfig(data)) {\n            this._source = new ScriptSource(data, this._context);\n        } else {\n            throw new Error('Cannot detect data type: ' + data);\n        }\n\n        this._effects.setSource(this._source.sourceNode);\n\n        this.emit('ready', this);\n\n        if (this._playWhenReady) {\n            this._playWhenReady();\n        }\n    }\n\n    _onEnded() {\n        this.emit('ended', this);\n    }\n\n    _onLoad(fileData) {\n        this._createSource(fileData);\n        this.emit('loaded', this);\n    }\n\n    _onLoadError(err) {\n        this.emit('error', this, err);\n    }\n}\n\n// expose for unit tests\nSound.__source = {\n    BufferSource,\n    MediaSource,\n    MicrophoneSource,\n    OscillatorSource,\n    ScriptSource\n};\n","import Group from '../group';\n\nexport default function SoundGroup(context, destination) {\n    const group = new Group(context, destination);\n    const sounds = group.sounds;\n    let playbackRate = 1,\n        loop = false,\n        src;\n\n    function getSource() {\n        if (!sounds.length) {\n            return;\n        }\n\n        src = sounds.slice(0)\n            .sort((a, b) => b.duration - a.duration)[0];\n    }\n\n    const add = group.add;\n    group.add = function(sound) {\n        add(sound);\n        getSource();\n        return group;\n    };\n\n    const remove = group.rmeove;\n    group.remove = function(soundOrId) {\n        remove(soundOrId);\n        getSource();\n        return group;\n    };\n\n    Object.defineProperties(group, {\n        currentTime: {\n            get: function() {\n                return src ? src.currentTime : 0;\n            },\n            set: function(value) {\n                this.stop();\n                this.play(0, value);\n            }\n        },\n        duration: {\n            get: function() {\n                return src ? src.duration : 0;\n            }\n        },\n        // ended: {\n        //     get: function() {\n        //         return src ? src.ended : false;\n        //     }\n        // },\n        loop: {\n            get: function() {\n                return loop;\n            },\n            set: function(value) {\n                loop = !!value;\n                sounds.forEach(function(sound) {\n                    sound.loop = loop;\n                });\n            }\n        },\n        paused: {\n            get: function() {\n                // return src ? src.paused : false;\n                return !!src && src.paused;\n            }\n        },\n        progress: {\n            get: function() {\n                return src ? src.progress : 0;\n            }\n        },\n        playbackRate: {\n            get: function() {\n                return playbackRate;\n            },\n            set: function(value) {\n                playbackRate = value;\n                sounds.forEach(function(sound) {\n                    sound.playbackRate = playbackRate;\n                });\n            }\n        },\n        playing: {\n            get: function() {\n                // return src ? src.playing : false;\n                return !!src && src.playing;\n            }\n        }\n    });\n\n    return group;\n}\n","import context from './context';\nimport browser from './utils/browser';\nimport file from './utils/file';\nimport Group from './group';\nimport Loader from './utils/loader';\nimport Effects from './effects';\nimport Sound from './sound';\nimport SoundGroup from './utils/sound-group';\nimport utils from './utils/utils';\n\nfunction Sono() {\n    const VERSION = '0.1.9';\n    const group = new Group(context, context.destination);\n\n    let api = null;\n    let isTouchLocked = false;\n\n    /*\n     * Get Sound by id\n     */\n\n    function getSound(id) {\n        return group.find(id);\n    }\n\n    /*\n     * Create group\n     */\n\n    function createGroup(sounds) {\n        const soundGroup = new SoundGroup(context, group.gain);\n        if (sounds) {\n            sounds.forEach((sound) => soundGroup.add(sound));\n        }\n        return soundGroup;\n    }\n\n    /*\n     * Loading\n     */\n\n    function add(config) {\n        const soundContext = config && config.webAudio === false ? null : context;\n        // const sound = new Sound(soundContext, group.gain);\n        const src = file.getSupportedFile(config.src || config.url || config.data || config);\n        const sound = new Sound(Object.assign({}, config || {}, {\n            src,\n            context: soundContext,\n            destination: group.gain\n        }));\n        sound.isTouchLocked = isTouchLocked;\n        if (config) {\n            sound.id = config.id || config.name || '';\n            sound.loop = !!config.loop;\n            sound.volume = config.volume;\n        }\n        group.add(sound);\n        return sound;\n    }\n\n    function queue(config, loaderGroup) {\n        const sound = add(config).load();\n\n        if (loaderGroup) {\n            loaderGroup.add(sound.loader);\n        }\n        return sound;\n    }\n\n    function load(config) {\n        const src = config.src || config.url || config.data || config;\n        let sound, loader;\n\n        if (file.containsURL(src)) {\n            sound = queue(config);\n            loader = sound.loader;\n        } else if (Array.isArray(src) && file.containsURL(src[0].src || src[0].url)) {\n            sound = [];\n            loader = new Loader.Group();\n            src.forEach((url) => sound.push(queue(url, loader)));\n        } else {\n            const errorMessage = 'sono.load: No audio file URLs found in config.';\n            if (config.onError) {\n                config.onError('[ERROR] ' + errorMessage);\n            } else {\n                throw new Error(errorMessage);\n            }\n            return null;\n        }\n        if (config.onProgress) {\n            loader.on('progress', (progress) => config.onProgress(progress));\n        }\n        if (config.onComplete) {\n            loader.once('complete', function() {\n                loader.off('progress');\n                config.onComplete(sound);\n            });\n        }\n        loader.once('error', function(err) {\n            loader.off('error');\n            if (config.onError) {\n                config.onError(err);\n            } else {\n                console.error('[ERROR] sono.load: ' + err);\n            }\n        });\n        loader.start();\n\n        return sound;\n    }\n\n    /*\n     * Create Sound\n     *\n     * Accepted values for param config:\n     * Object config e.g. { id:'foo', url:['foo.ogg', 'foo.mp3'] }\n     * Array (of files e.g. ['foo.ogg', 'foo.mp3'])\n     * ArrayBuffer\n     * HTMLMediaElement\n     * Filename string (e.g. 'foo.ogg')\n     * Oscillator type string (i.e. 'sine', 'square', 'sawtooth', 'triangle')\n     * ScriptProcessor config object (e.g. { bufferSize: 1024, channels: 1, callback: fn })\n     */\n\n    function createSound(config) {\n        // try to load if config contains URLs\n        if (file.containsURL(config)) {\n            return load(config);\n        }\n\n        const sound = add(config);\n        sound.data = config.data || config;\n\n        return sound;\n    }\n\n    /*\n     * Destroy\n     */\n\n    function destroySound(soundOrId) {\n        group.find(soundOrId, (sound) => sound.destroy());\n        return api;\n    }\n\n    function destroyAll() {\n        group.destroy();\n        return api;\n    }\n\n    /*\n     * Controls\n     */\n\n    function mute() {\n        group.mute();\n        return api;\n    }\n\n    function unMute() {\n        group.unMute();\n        return api;\n    }\n\n    function fade(volume, duration) {\n        group.fade(volume, duration);\n        return api;\n    }\n\n    function pauseAll() {\n        group.pause();\n        return api;\n    }\n\n    function resumeAll() {\n        group.resume();\n        return api;\n    }\n\n    function stopAll() {\n        group.stop();\n        return api;\n    }\n\n    function play(id, delay, offset) {\n        group.find(id, (sound) => sound.play(delay, offset));\n        return api;\n    }\n\n    function pause(id) {\n        group.find(id, (sound) => sound.pause());\n        return api;\n    }\n\n    function stop(id) {\n        group.find(id, (sound) => sound.stop());\n        return api;\n    }\n\n    /*\n     * Mobile touch lock\n     */\n\n    isTouchLocked = browser.handleTouchLock(context, function() {\n        isTouchLocked = false;\n        group.sounds.forEach((sound) => (sound.isTouchLocked = false));\n    });\n\n    /*\n     * Page visibility events\n     */\n\n    (function() {\n        const pageHiddenPaused = [];\n\n        // pause currently playing sounds and store refs\n        function onHidden() {\n            group.sounds.forEach(function(sound) {\n                if (sound.playing) {\n                    sound.pause();\n                    pageHiddenPaused.push(sound);\n                }\n            });\n        }\n\n        // play sounds that got paused when page was hidden\n        function onShown() {\n            while (pageHiddenPaused.length) {\n                pageHiddenPaused.pop()\n                    .play();\n            }\n        }\n\n        browser.handlePageVisibility(onHidden, onShown);\n    }());\n\n    /*\n     * Log version & device support info\n     */\n\n    function log() {\n        const title = 'sono ' + VERSION,\n            info = 'Supported:' + api.isSupported +\n            ' WebAudioAPI:' + api.hasWebAudio +\n            ' TouchLocked:' + isTouchLocked +\n            ' State:' + (context && context.state) +\n            ' Extensions:' + file.extensions;\n\n        if (navigator.userAgent.indexOf('Chrome') > -1) {\n            const args = [\n                '%c ♫ ' + title +\n                ' ♫ %c ' + info + ' ',\n                'color: #FFFFFF; background: #379F7A',\n                'color: #1F1C0D; background: #E0FBAC'\n            ];\n            console.log.apply(console, args);\n        } else if (window.console && window.console.log.call) {\n            console.log.call(console, title + ' ' + info);\n        }\n    }\n\n    function register(name, fn, attachTo = []) {\n\n        if (attachTo.length) {\n            attachTo.forEach((ob) => {\n                ob[name] = fn;\n            });\n        } else {\n            Effects.prototype[name] = function(opts) {\n                return this.add(fn(opts));\n            };\n        }\n\n        api[name] = fn;\n\n        return fn;\n    }\n\n    api = {\n        canPlay: file.canPlay,\n        context,\n        create: createSound,\n        createGroup,\n        createSound,\n        destroyAll,\n        destroySound,\n        Effects,\n        effects: group.effects,\n        extensions: file.extensions,\n        fade,\n        file,\n        gain: group.gain,\n        getOfflineContext: utils.getOfflineContext,\n        getSound,\n        Group,\n        hasWebAudio: !context.isFake,\n        isSupported: file.extensions.length > 0,\n        load,\n        log,\n        mute,\n        pause,\n        pauseAll,\n        play,\n        register,\n        resumeAll,\n        Sound,\n        stop,\n        stopAll,\n        unMute,\n        utils,\n        VERSION,\n        get effects() {\n            return group.effects;\n        },\n        set effects(value) {\n            group.effects.removeAll().add(value);\n        },\n        get fx() {\n            return this.effects;\n        },\n        set fx(value) {\n            this.effects = value;\n        },\n        get isTouchLocked() {\n            return isTouchLocked;\n        },\n        get sounds() {\n            return group.sounds.slice(0);\n        },\n        get volume() {\n            return group.volume;\n        },\n        set volume(value) {\n            group.volume = value;\n        }\n    };\n    return api;\n}\n\nexport default new Sono();\n","export default function isSafeNumber(value) {\n    return typeof value === 'number' && !isNaN(value) && isFinite(value);\n}\n","import context from '../core/context';\nimport isSafeNumber from '../core/utils/isSafeNumber';\n\nexport default class AbstractEffect {\n    constructor(node = null) {\n        this._in = node || this.context.createGain();\n        this._out = node || this.context.createGain();\n        if (node) {\n            this._node = node;\n        }\n    }\n\n    connect(node) {\n        this._out.connect(node._in || node);\n    }\n\n    disconnect(...args) {\n        this._out.disconnect(args);\n    }\n\n    setSafeParamValue(param, value) {\n        if (!isSafeNumber(value)) {\n            console.warn('Attempt to set invalid value ' + value + ' on AudioParam');\n            return;\n        }\n        param.value = value;\n    }\n\n    update() {\n        throw new Error('update must be overridden');\n    }\n\n    get context() {\n        return context;\n    }\n\n    get numberOfInputs() {\n        return 1;\n    }\n\n    get numberOfOutputs() {\n        return 1;\n    }\n\n    get channelCount() {\n        return 1;\n    }\n\n    get channelCountMode() {\n        return 'max';\n    }\n\n    get channelInterpretation() {\n        return 'speakers';\n    }\n}\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\n\nfunction noteFromPitch(frequency) {\n    const noteNum = 12 * (Math.log(frequency / 440) * Math.LOG2E);\n    return Math.round(noteNum) + 69;\n}\n\nfunction frequencyFromNoteNumber(note) {\n    return 440 * Math.pow(2, (note - 69) / 12);\n}\n\nfunction centsOffFromPitch(frequency, note) {\n    return Math.floor(1200 * Math.log(frequency / frequencyFromNoteNumber(note)) * Math.LOG2E);\n}\n\nclass Analyser extends AbstractEffect {\n    constructor({fftSize = 512, float = false, minDecibels = 0, maxDecibels = 0, smoothing = 0.9} = {}) {\n        super(sono.context.createAnalyser());\n\n        this._freqFloat = !!float;\n        this._waveFloat = !!float;\n        this._waveform = null;\n        this._frequencies = null;\n\n        this._node.fftSize = fftSize; // frequencyBinCount will be half this value\n        this._node.smoothingTimeConstant = smoothing || this._node.smoothingTimeConstant;\n        this._node.minDecibels = minDecibels || this._node.minDecibels;\n        this._node.maxDecibels = maxDecibels || this._node.maxDecibels;\n    }\n\n    update() {\n\n    }\n\n    getWaveform(useFloat) {\n        if (!arguments.length) {\n            useFloat = this._waveFloat;\n        }\n\n        if (this._needsUpdate(this._waveform, useFloat)) {\n            this._fftSize = this._node.fftSize;\n            this._waveFloat = useFloat;\n            this._waveform = this._createArray(useFloat, this._fftSize);\n        }\n        if (useFloat && this._node.getFloatTimeDomainData) {\n            this._node.getFloatTimeDomainData(this._waveform);\n        } else {\n            this._node.getByteTimeDomainData(this._waveform);\n        }\n\n        return this._waveform;\n    }\n\n    getFrequencies(useFloat) {\n        if (!arguments.length) {\n            useFloat = this._freqFloat;\n        }\n\n        if (this._needsUpdate(this._frequencies, useFloat)) {\n            this._fftSize = this._node.fftSize;\n            this._freqFloat = useFloat;\n            this._frequencies = this._createArray(useFloat, this._node.frequencyBinCount);\n        }\n\n        if (useFloat) {\n            this._node.getFloatFrequencyData(this._frequencies);\n        } else {\n            this._node.getByteFrequencyData(this._frequencies);\n        }\n\n        return this._frequencies;\n    }\n\n    getAmplitude(callback) {\n        if (!this._amplitudeWorker) {\n            this._createAmplitudeAnalyser();\n        }\n        this._amplitudeCallback = callback || this._amplitudeCallback;\n        const f = new Float32Array(this._node.fftSize);\n        f.set(this.getFrequencies(true));\n        this._amplitudeWorker.postMessage({\n            sum: 0,\n            length: f.byteLength,\n            numSamples: this._node.fftSize / 2,\n            b: f.buffer\n        }, [f.buffer]);\n    }\n\n    getPitch(callback) {\n        if (!this._pitchWorker) {\n            this._createPitchAnalyser();\n        }\n        this._pitchCallback = callback || this._pitchCallback;\n        const f = new Float32Array(this._node.fftSize);\n        f.set(this.getWaveform(true));\n        this._pitchWorker.postMessage({\n            sampleRate: sono.context.sampleRate,\n            b: f.buffer\n        }, [f.buffer]);\n    }\n\n    get smoothing() {\n        return this._node.smoothingTimeConstant;\n    }\n\n    set smoothing(value) {\n        this._node.smoothingTimeConstant = value;\n    }\n\n    _needsUpdate(arr, useFloat) {\n        if (!arr) {\n            return true;\n        }\n        if (this._node.fftSize !== this._fftSize) {\n            return true;\n        }\n        if (useFloat && arr instanceof Uint8Array) {\n            return true;\n        }\n        return !useFloat && arr instanceof Float32Array;\n    }\n\n    _createArray(useFloat, length) {\n        return useFloat ? new Float32Array(length) : new Uint8Array(length);\n    }\n\n    _createAmplitudeAnalyser() {\n        //the worker returns a normalized value\n        //first a sum of all magnitudes devided by the byteLength, then devide  by half the fft (1channel)\n        const amplitudeBlob = new Blob([\n            `onmessage = function(e) {\n                var data = e.data;\n                var f = new Float32Array(data.b);\n                for (var i = 0; i < f.length; i++) {\n                    data.sum += f[i];\n                }\n                data.sum /= f.length;\n                postMessage(Math.max(1.0 - (data.sum / data.numSamples * -1.0), 0));\n            };`\n        ]);\n        const amplitudeBlobURL = URL.createObjectURL(amplitudeBlob);\n        this._amplitudeWorker = new Worker(amplitudeBlobURL);\n        this._amplitudeWorker.onmessage = event => {\n            if (!this._amplitudeCallback) {\n                return;\n            }\n            this._amplitudeCallback(event.data);\n        };\n    }\n\n    _createPitchAnalyser() {\n        const pitchBlob = new Blob([\n            `onmessage = function(e) {\n                var data = e.data;\n                var sampleRate = data.sampleRate;\n                var buf = new Float32Array(data.b);\n                var SIZE = buf.length;\n                var MAX_SAMPLES = Math.floor(SIZE / 2);\n                var bestOffset = -1;\n                var bestCorrel = 0;\n                var rms = 0;\n                var foundGoodCorrelation = false;\n                var correls = new Array(MAX_SAMPLES);\n                for (var i = 0; i < SIZE; i++) {\n                    var val = buf[i];\n                    rms += val * val;\n                }\n                rms = Math.sqrt(rms / SIZE);\n                if (rms < 0.01) {\n                    postMessage(-1);\n                } else {\n                    var lastCorrelation = 1;\n                    for (var offset = 0; offset < MAX_SAMPLES; offset++) {\n                        var correl = 0;\n                        for (var i = 0; i < MAX_SAMPLES; i++) {\n                            correl += Math.abs(buf[i] - buf[i + offset]);\n                        }\n                        correl = 1 - correl / MAX_SAMPLES;\n                        correls[offset] = correl;\n                        if (correl > 0.9 && correl > lastCorrelation) {\n                            foundGoodCorrelation = true;\n                            if (correl > bestCorrel) {\n                                bestCorrel = correl;\n                                bestOffset = offset;\n                            }\n                        } else if (foundGoodCorrelation) {\n                            var shift = (correls[bestOffset + 1] - correls[bestOffset - 1]) / correls[bestOffset];\n                            postMessage(sampleRate / (bestOffset + 8 * shift));\n                        }\n                        lastCorrelation = correl;\n                    }\n                    if (bestCorrel > 0.01) {\n                        postMessage(sampleRate / bestOffset);\n                    } else {\n                        postMessage(-1);\n                    }\n                }\n            };`\n        ]);\n\n        const pitchBlobURL = URL.createObjectURL(pitchBlob);\n        this._pitchWorker = new Worker(pitchBlobURL);\n\n        const noteStrings = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n        const pitchCallbackObject = {\n            hertz: 0,\n            note: '',\n            noteIndex: 0,\n            detuneCents: 0,\n            detune: ''\n        };\n\n        this._pitchWorker.onmessage = event => {\n            if (!this._pitchCallback) {\n                return;\n            }\n            const hz = event.data;\n            if (hz !== -1) {\n                const note = noteFromPitch(hz);\n                const detune = centsOffFromPitch(hz, note);\n                pitchCallbackObject.hertz = hz;\n                pitchCallbackObject.noteIndex = note % 12;\n                pitchCallbackObject.note = noteStrings[note % 12];\n                pitchCallbackObject.detuneCents = detune;\n                if (detune === 0) {\n                    pitchCallbackObject.detune = '';\n                } else if (detune < 0) {\n                    pitchCallbackObject.detune = 'flat';\n                } else {\n                    pitchCallbackObject.detune = 'sharp';\n                }\n            }\n            this._pitchCallback(pitchCallbackObject);\n        };\n    }\n}\n\nexport default sono.register('analyser', opts => new Analyser(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\n\nclass Compressor extends AbstractEffect {\n    constructor({threshold = -24, knee = 30, ratio = 12, attack = 0.0003, release = 0.25} = {}) {\n        super(sono.context.createDynamicsCompressor());\n\n        this.update({threshold, knee, ratio, attack, release});\n    }\n\n    update(options) {\n        // min decibels to start compressing at from -100 to 0\n        this.setSafeParamValue(this._node.threshold, options.threshold);\n        // decibel value to start curve to compressed value from 0 to 40\n        this.setSafeParamValue(this._node.knee, options.knee);\n        // amount of change per decibel from 1 to 20\n        this.setSafeParamValue(this._node.ratio, options.ratio);\n        // gain reduction currently applied by compressor from -20 to 0\n        // node.reduction.value = typeof config.reduction !== 'undefined' ? config.reduction : -10;)\n        // seconds to reduce gain by 10db from 0 to 1 - how quickly signal adapted when volume increased\n        this.setSafeParamValue(this._node.attack, options.attack);\n        // seconds to increase gain by 10db from 0 to 1 - how quickly signal adapted when volume redcuced\n        this.setSafeParamValue(this._node.release, options.release);\n    }\n}\n\nexport default sono.register('compressor', opts => new Compressor(opts));\n","import AbstractEffect from './AbstractEffect';\nimport isSafeNumber from '../core/utils/isSafeNumber';\nimport sono from '../core/sono';\n\nconst n = 22050;\n\n// Float32Array defining curve (values are interpolated)\n// up-sample before applying curve for better resolution result 'none', '2x' or '4x'\n// node.oversample = '2x';\n\nclass Distortion extends AbstractEffect {\n    constructor({level = 1} = {}) {\n        super(sono.context.createWaveShaper());\n\n        this._curve = new Float32Array(n);\n\n        this._level = 0;\n\n        this.update({level});\n    }\n\n    update({level}) {\n        if (level === this._level || !isSafeNumber(level)) {\n            return;\n        }\n\n        if (level <= 0) {\n            this._node.curve = null;\n            return;\n        }\n\n        const k = level * 100;\n        const deg = Math.PI / 180;\n\n        let x;\n        for (let i = 0; i < n; i++) {\n            x = i * 2 / n - 1;\n            this._curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n        }\n\n        this._level = level;\n        this._node.curve = this._curve;\n    }\n\n    get level() {\n        return this._level;\n    }\n\n    set level(level) {\n        this.update({level});\n    }\n}\n\nexport default sono.register('distortion', opts => new Distortion(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\n\nclass Echo extends AbstractEffect {\n    constructor({delay = 0.5, feedback = 0.5} = {}) {\n        super();\n\n        this._delay = this.context.createDelay();\n        this._feedback = this.context.createGain();\n\n        this._in.connect(this._delay);\n        this._in.connect(this._out);\n        this._delay.connect(this._feedback);\n        this._feedback.connect(this._delay);\n        this._feedback.connect(this._out);\n\n        this.delay = delay;\n        this.feedback = feedback;\n    }\n\n    update(options) {\n        this.delay = options.delay;\n        this.feedback = options.feedback;\n    }\n\n    get delay() {\n        return this._delay.delayTime.value;\n    }\n\n    set delay(value) {\n        this.setSafeParamValue(this._delay.delayTime, value);\n    }\n\n    get feedback() {\n        return this._feedback.gain.value;\n    }\n\n    set feedback(value) {\n        this.setSafeParamValue(this._feedback.gain, value);\n    }\n}\n\nexport default sono.register('echo', opts => new Echo(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\nimport isSafeNumber from '../core/utils/isSafeNumber';\n\nfunction safeOption(a, b) {\n    if (isSafeNumber(a)) {\n        return a;\n    }\n    return b;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode\n// For lowpass and highpass Q indicates how peaked the frequency is around the cutoff.\n// The greater the value is, the greater is the peak\nconst minFrequency = 40;\nconst maxFrequency = sono.context.sampleRate / 2;\n\nfunction getFrequency(value) {\n    // Logarithm (base 2) to compute how many octaves fall in the range.\n    const numberOfOctaves = Math.log(maxFrequency / minFrequency) / Math.LN2;\n    // Compute a multiplier from 0 to 1 based on an exponential scale.\n    const multiplier = Math.pow(2, numberOfOctaves * (value - 1.0));\n    // Get back to the frequency value between min and max.\n    return maxFrequency * multiplier;\n}\n\nclass Filter extends AbstractEffect {\n    constructor({type = 'lowpass', frequency = 1000, q = 0, gain = 1} = {}) {\n        super(sono.context.createBiquadFilter());\n\n        this._node.type = type;\n\n        this.update({frequency, q, gain});\n    }\n\n    update(options) {\n        this.setSafeParamValue(this._node.frequency, options.frequency);\n        this.setSafeParamValue(this._node.Q, options.q);\n        this.setSafeParamValue(this._node.gain, options.gain);\n    }\n\n    setByPercent({percent = 0.5}) {\n        this.update({\n            frequency: getFrequency(percent)\n        });\n    }\n\n    get frequency() {\n        return this._node.frequency.value;\n    }\n\n    set frequency(value) {\n        this.setSafeParamValue(this._node.frequency, value);\n    }\n\n    get q() {\n        return this._node.Q.value;\n    }\n\n    set q(value) {\n        this.setSafeParamValue(this._node.Q, value);\n    }\n\n    get Q() {\n        return this._node.Q.value;\n    }\n\n    set Q(value) {\n        this.setSafeParamValue(this._node.Q, value);\n    }\n\n    get gain() {\n        return this._node.gain.value;\n    }\n\n    set gain(value) {\n        this.setSafeParamValue(this._node.gain, value);\n    }\n\n    get detune() {\n        return this._node.detune.value;\n    }\n\n    set detune(value) {\n        this.setSafeParamValue(this._node.detune, value);\n    }\n}\n\nsono.register('lowpass', ({frequency, peak, q} = {}) => {\n    return new Filter({type: 'lowpass', frequency, q: safeOption(peak, q)});\n});\n\nsono.register('highpass', ({frequency, peak, q} = {}) => {\n    return new Filter({type: 'highpass', frequency, q: safeOption(peak, q)});\n});\n\nsono.register('bandpass', ({frequency, width, q} = {}) => {\n    return new Filter({type: 'bandpass', frequency, q: safeOption(width, q)});\n});\n\nsono.register('lowshelf', ({frequency, gain} = {}) => {\n    return new Filter({type: 'lowshelf', frequency, q: 0, gain});\n});\n\nsono.register('highshelf', ({frequency, gain} = {}) => {\n    return new Filter({type: 'highshelf', frequency, q: 0, gain});\n});\n\nsono.register('peaking', ({frequency, width, gain} = {}) => {\n    return new Filter({type: 'peaking', frequency, q: width, gain});\n});\n\nsono.register('notch', ({frequency, width, gain, q} = {}) => {\n    return new Filter({type: 'notch', frequency, q: safeOption(width, q), gain});\n});\n\nsono.register('allpass', ({frequency, sharpness, q} = {}) => {\n    return new Filter({type: 'allpass', frequency, q: safeOption(sharpness, q)});\n});\n\nexport default sono.register('filter', opts => new Filter(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\nimport isSafeNumber from '../core/utils/isSafeNumber';\n\nclass MonoFlanger extends AbstractEffect {\n    constructor({delay = 0.005, feedback = 0.5, frequency = 0.002, gain = 0.25} = {}) {\n        super();\n\n        this._delay = sono.context.createDelay();\n        this._feedback = sono.context.createGain();\n        this._lfo = sono.context.createOscillator();\n        this._gain = sono.context.createGain();\n        this._lfo.type = 'sine';\n\n        this._in.connect(this._out);\n        this._in.connect(this._delay);\n        this._delay.connect(this._out);\n        this._delay.connect(this._feedback);\n        this._feedback.connect(this._in);\n\n        this._lfo.connect(this._gain);\n        this._gain.connect(this._delay.delayTime);\n        this._lfo.start(0);\n\n        this.update({delay, feedback, frequency, gain});\n    }\n    update(options) {\n        this.delay = options.delay;\n        this.lfoFrequency = options.lfoFrequency;\n        this.lfoGain = options.lfoGain;\n        this.feedback = options.feedback;\n    }\n    get delay() {\n        return this._delay.delayTime.value;\n    }\n    set delay(value) {\n        this.setSafeParamValue(this._delay.delayTime, value);\n    }\n    get lfoFrequency() {\n        return this._lfo.frequency.value;\n    }\n    set lfoFrequency(value) {\n        this.setSafeParamValue(this._lfo.frequency, value);\n    }\n    get lfoGain() {\n        return this._gain.gain.value;\n    }\n    set lfoGain(value) {\n        this.setSafeParamValue(this._gain.gain, value);\n    }\n    get feedback() {\n        return this._feedback.gain.value;\n    }\n    set feedback(value) {\n        this.setSafeParamValue(this._feedback.gain, value);\n    }\n}\n\nsono.register('monoFlanger', opts => new MonoFlanger(opts));\n\nclass StereoFlanger extends AbstractEffect {\n    constructor({delay = 0.003, feedback = 0.5, frequency = 0.5, gain = 0.005} = {}) {\n        super();\n\n        this._splitter = sono.context.createChannelSplitter(2);\n        this._merger = sono.context.createChannelMerger(2);\n        this._feedbackL = sono.context.createGain();\n        this._feedbackR = sono.context.createGain();\n        this._lfo = sono.context.createOscillator();\n        this._lfoGainL = sono.context.createGain();\n        this._lfoGainR = sono.context.createGain();\n        this._delayL = sono.context.createDelay();\n        this._delayR = sono.context.createDelay();\n\n        this._lfo.type = 'sine';\n\n        this._in.connect(this._splitter);\n\n        this._splitter.connect(this._delayL, 0);\n        this._splitter.connect(this._delayR, 1);\n\n        this._delayL.connect(this._feedbackL);\n        this._delayR.connect(this._feedbackR);\n\n        this._feedbackL.connect(this._delayR);\n        this._feedbackR.connect(this._delayL);\n\n        this._delayL.connect(this._merger, 0, 0);\n        this._delayR.connect(this._merger, 0, 1);\n\n        this._merger.connect(this._out);\n        this._in.connect(this._out);\n\n        this._lfo.connect(this._lfoGainL);\n        this._lfo.connect(this._lfoGainR);\n        this._lfoGainL.connect(this._delayL.delayTime);\n        this._lfoGainR.connect(this._delayR.delayTime);\n        this._lfo.start(0);\n\n        this.update({delay, feedback, frequency, gain});\n    }\n\n    update(options) {\n        this.delay = options.delay;\n        this.lfoFrequency = options.lfoFrequency;\n        this.lfoGain = options.lfoGain;\n        this.feedback = options.feedback;\n    }\n\n    get delay() {\n        return this._delayL.delayTime.value;\n    }\n\n    set delay(value) {\n        this.setSafeParamValue(this._delayL.delayTime, value);\n        this._delayR.delayTime.value = this._delayL.delayTime.value;\n    }\n\n    get frequency() {\n        return this._lfo.frequency.value;\n    }\n\n    set frequency(value) {\n        this.setSafeParamValue(this._lfo.frequency, value);\n    }\n\n    get gain() {\n        return this._lfoGainL.gain.value;\n    }\n\n    set gain(value) {\n        this.setSafeParamValue(this._lfoGainL.gain, value);\n        this._lfoGainR.gain.value = 0 - this._lfoGainL.gain.value;\n    }\n\n    get feedback() {\n        return this._feedbackL.gain.value;\n    }\n\n    set feedback(value) {\n        this.setSafeParamValue(this._feedbackL.gain, value);\n        this._feedbackR.gain.value = this._feedbackL.gain.value;\n    }\n}\n\nsono.register('stereoFlanger', opts => new StereoFlanger(opts));\n\nexport default sono.register('flanger', (opts = {}) => {\n    return opts.stereo ? new StereoFlanger(opts) : new MonoFlanger(opts);\n});\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\nimport isSafeNumber from '../core/utils/isSafeNumber';\n\nconst pannerDefaults = {\n    panningModel: 'HRTF',\n    distanceModel: 'linear',\n    refDistance: 1,\n    maxDistance: 1000,\n    rolloffFactor: 1,\n    coneInnerAngle: 360,\n    coneOuterAngle: 0,\n    coneOuterGain: 0\n};\n\nfunction safeNumber(x, y) {\n    if (isSafeNumber(x)) {\n        return x;\n    }\n    return y;\n}\n\n// cross product of 2 vectors\nfunction cross(a, b) {\n    const ax = a.x,\n        ay = a.y,\n        az = a.z;\n    const bx = b.x,\n        by = b.y,\n        bz = b.z;\n    a.x = ay * bz - az * by;\n    a.y = az * bx - ax * bz;\n    a.z = ax * by - ay * bx;\n}\n\n// normalise to unit vector\nfunction normalize(vec3) {\n    if (vec3.x === 0 && vec3.y === 0 && vec3.z === 0) {\n        return vec3;\n    }\n    const length = Math.sqrt(vec3.x * vec3.x + vec3.y * vec3.y + vec3.z * vec3.z);\n    const invScalar = 1 / length;\n    vec3.x *= invScalar;\n    vec3.y *= invScalar;\n    vec3.z *= invScalar;\n    return vec3;\n}\n\nconst vecPool = {\n    pool: [],\n    get: function(x, y, z) {\n        const v = this.pool.length ? this.pool.pop() : {\n            x: 0,\n            y: 0,\n            z: 0\n        };\n        // check if a vector has been passed in\n        if (typeof x !== 'undefined' && isNaN(x) && 'x' in x && 'y' in x && 'z' in x) {\n            v.x = safeNumber(x.x, 0);\n            v.y = safeNumber(x.y);\n            v.z = safeNumber(x.z);\n        } else {\n            v.x = safeNumber(x);\n            v.y = safeNumber(y);\n            v.z = safeNumber(z);\n        }\n        return v;\n    },\n    dispose: function(instance) {\n        this.pool.push(instance);\n    }\n};\n\nconst globalUp = vecPool.get(0, 1, 0);\nconst angle45 = Math.PI / 4;\nconst angle90 = Math.PI / 2;\n\nclass Panner extends AbstractEffect {\n    constructor({} = {}) {\n        super(sono.context.createPanner());\n\n        // Default for stereo is 'HRTF' can also be 'equalpower'\n        this._node.panningModel = pannerDefaults.panningModel;\n\n        // Distance model and attributes\n        // Can be 'linear' 'inverse' 'exponential'\n        this._node.distanceModel = pannerDefaults.distanceModel;\n        this._node.refDistance = pannerDefaults.refDistance;\n        this._node.maxDistance = pannerDefaults.maxDistance;\n        this._node.rolloffFactor = pannerDefaults.rolloffFactor;\n        this._node.coneInnerAngle = pannerDefaults.coneInnerAngle;\n        this._node.coneOuterAngle = pannerDefaults.coneOuterAngle;\n        this._node.coneOuterGain = pannerDefaults.coneOuterGain;\n        // set to defaults (needed in Firefox)\n        this._node.setPosition(0, 0, 1);\n        this._node.setOrientation(0, 0, 0);\n    }\n    // set the orientation of the source (where the audio is coming from)\n    setOrientation(pannerNode, fw) {\n        // calculate up vec ( up = (forward cross (0, 1, 0)) cross forward )\n        const up = vecPool.get(fw.x, fw.y, fw.z);\n        cross(up, globalUp);\n        cross(up, fw);\n        normalize(up);\n        normalize(fw);\n        // set the audio context's listener position to match the camera position\n        pannerNode.setOrientation(fw.x, fw.y, fw.z, up.x, up.y, up.z);\n        // return the vecs to the pool\n        vecPool.dispose(fw);\n        vecPool.dispose(up);\n    }\n\n    setPosition(nodeOrListener, vec) {\n        nodeOrListener.setPosition(vec.x, vec.y, vec.z);\n        vecPool.dispose(vec);\n    }\n\n    update({x, y, z}) {\n        const v = vecPool.get(x, y, z);\n\n        if (isSafeNumber(x) && !isSafeNumber(y) && !isSafeNumber(z)) {\n            // pan left to right with value from -1 to 1\n            x = v.x;\n\n            if (x > 1) {\n                x = 1;\n            }\n            if (x < -1) {\n                x = -1;\n            }\n\n            // creates a nice curve with z\n            x = x * angle45;\n            z = x + angle90;\n\n            if (z > angle90) {\n                z = Math.PI - z;\n            }\n\n            v.x = Math.sin(x);\n            v.y = 0;\n            v.z = Math.sin(z);\n        }\n        this.setPosition(this._node, v);\n    }\n\n    // set the position the audio is coming from)\n    setSourcePosition(x, y, z) {\n        this.setPosition(this._node, vecPool.get(x, y, z));\n    }\n\n    // set the direction the audio is coming from)\n    setSourceOrientation(x, y, z) {\n        this.setOrientation(this._node, vecPool.get(x, y, z));\n    }\n\n    // set the position of who or what is hearing the audio (could be camera or some character)\n    setListenerPosition(x, y, z) {\n        this.setPosition(sono.context.listener, vecPool.get(x, y, z));\n    }\n\n    // set the position of who or what is hearing the audio (could be camera or some character)\n    setListenerOrientation(x, y, z) {\n        this.setOrientation(sono.context.listener, vecPool.get(x, y, z));\n    }\n\n    getDefaults() {\n        return pannerDefaults;\n    }\n\n    setDefaults(defaults) {\n        Object.keys(defaults)\n            .forEach(function(key) {\n                pannerDefaults[key] = defaults[key];\n            });\n    }\n\n    set(x, y, z) {\n        return this.update({x, y, z});\n    }\n}\n\nexport default sono.register('panner', opts => new Panner(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\nimport isSafeNumber from '../core/utils/isSafeNumber';\n\nclass Phaser extends AbstractEffect {\n    constructor({stages = 8, feedback = 0.5, frequency = 0.5, gain = 300} = {}) {\n        super();\n\n        stages = stages || 8;\n\n        this._feedback = sono.context.createGain();\n        this._lfo = sono.context.createOscillator();\n        this._lfoGain = sono.context.createGain();\n        this._lfo.type = 'sine';\n\n        const filters = [];\n        for (let i = 0; i < stages; i++) {\n            const filter = sono.context.createBiquadFilter();\n            filter.type = 'allpass';\n            filter.frequency.value = 1000 * i;\n            //filter.Q.value = 10;\n            if (i > 0) {\n                filters[i - 1].connect(filter);\n            }\n            this._lfoGain.connect(filter.frequency);\n            filters.push(filter);\n        }\n\n        const first = filters[0];\n        const last = filters[filters.length - 1];\n\n        this._in.connect(first);\n        this._in.connect(this._out);\n        last.connect(this._out);\n        last.connect(this._feedback);\n        this._feedback.connect(first);\n        this._lfo.connect(this._lfoGain);\n        this._lfo.start(0);\n\n        this.update({frequency, gain, feedback});\n    }\n\n    update(options) {\n        this.frequency = options.frequency;\n        this.gain = options.gain;\n        this.feedback = options.feedback;\n    }\n\n    get frequency() {\n        return this._lfo.frequency.value;\n    }\n\n    set frequency(value) {\n        this.setSafeParamValue(this._lfo.frequency, value);\n    }\n\n    get gain() {\n        return this._lfoGain.gain.value;\n    }\n\n    set gain(value) {\n        this.setSafeParamValue(this._lfoGain.gain, value);\n    }\n\n    get feedback() {\n        return this._feedback.gain.value;\n    }\n\n    set feedback(value) {\n        this.setSafeParamValue(this._feedback.gain, value);\n    }\n}\n\nexport default sono.register('phaser', opts => new Phaser(opts));\n","export default function isDefined(value) {\n    return typeof value !== 'undefined';\n}\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\nimport isSafeNumber from '../core/utils/isSafeNumber';\nimport isDefined from '../core/utils/isDefined';\n\nfunction createImpulseResponse({time, decay, reverse, buffer}) {\n    const rate = sono.context.sampleRate;\n    const length = Math.floor(rate * time);\n\n    let impulseResponse;\n\n    if (buffer && buffer.length === length) {\n        impulseResponse = buffer;\n    } else {\n        impulseResponse = sono.context.createBuffer(2, length, rate);\n    }\n\n    const left = impulseResponse.getChannelData(0);\n    const right = impulseResponse.getChannelData(1);\n\n    let n, e;\n    for (let i = 0; i < length; i++) {\n        n = reverse ? length - i : i;\n        e = Math.pow(1 - n / length, decay);\n        left[i] = (Math.random() * 2 - 1) * e;\n        right[i] = (Math.random() * 2 - 1) * e;\n    }\n\n    return impulseResponse;\n}\n\nclass Reverb extends AbstractEffect {\n    constructor({time = 1, decay = 5, reverse = false} = {}) {\n        super();\n\n        this._length = 0;\n        this._impulseResponse = null;\n\n        this._convolver = this.context.createConvolver();\n\n        this._in.connect(this._convolver);\n        this._in.connect(this._out);\n        this._convolver.connect(this._out);\n\n        this._opts = {};\n\n        this.update({time, decay, reverse});\n    }\n\n    update({time, decay, reverse}) {\n        let changed = false;\n        if (time !== this._opts.time && isSafeNumber(time)) {\n            this._opts.time = time;\n            changed = true;\n        }\n        if (decay !== this._opts.decay && isSafeNumber(decay)) {\n            this._opts.decay = decay;\n            changed = true;\n        }\n        if (isDefined(reverse) && reverse !== this._reverse) {\n            this._opts.reverse = reverse;\n            changed = true;\n        }\n        if (!changed) {\n            return;\n        }\n        console.log('this._opts', this._opts);\n        this._opts.buffer = createImpulseResponse(this._opts);\n        this._convolver.buffer = this._opts.buffer;\n    }\n\n    get time() {\n        return this._opts.time;\n    }\n\n    set time(value) {\n        this.update({time: value});\n    }\n\n    get decay() {\n        return this._opts.decay;\n    }\n\n    set decay(value) {\n        this.update({decay: value});\n    }\n\n    get reverse() {\n        return this._opts.reverse;\n    }\n\n    set reverse(value) {\n        this.update({reverse: value});\n    }\n}\n\nexport default sono.register('reverb', opts => new Reverb(opts));\n","import AbstractEffect from './AbstractEffect';\nimport sono from '../core/sono';\n\nclass Script extends AbstractEffect {\n    constructor({inputChannels = 1, outputChannels = 1, bufferSize = 1024, callback = null} = {}) {\n        super(sono.context.createScriptProcessor(bufferSize, inputChannels, outputChannels));\n\n        this._callback = callback || function(event) {\n            const input = event.inputBuffer.getChannelData(0);\n            const output = event.outputBuffer.getChannelData(0);\n            const l = output.length;\n            for (let i = 0; i < l; i++) {\n                output[i] = input[i];\n            }\n        };\n\n        this._node.onaudioprocess = this._callback;\n    }\n\n    update() {}\n}\n\nexport default sono.register('script', opts => new Script(opts));\n","import sono from '../core/sono';\nimport analyser from './analyser';\nimport compressor from './compressor';\nimport distortion from './distortion';\nimport echo from './echo';\nimport filter from './filter';\nimport flanger from './flanger';\nimport panner from './panner';\nimport phaser from './phaser';\nimport reverb from './reverb';\nimport script from './script';\n\n// sono.register('convolver', function(impulseResponse) {\n//     // impulseResponse is an audio file buffer\n//     const node = sono.context.createConvolver();\n//     node.buffer = impulseResponse;\n//     return node;\n// });\n\n// sono.register('delay', function(time) {\n//     const node = sono.context.createDelay();\n//     if (typeof time !== 'undefined') {\n//         node.delayTime.value = time;\n//     }\n//     return node;\n// });\n\nexport default {\n    analyser,\n    compressor,\n    distortion,\n    echo,\n    filter,\n    flanger,\n    panner,\n    phaser,\n    reverb,\n    script\n};\n","import sono from '../core/sono';\n\nfunction microphone(connected, denied, error) {\n    navigator.getUserMedia =\n        navigator.mediaDevices.getUserMedia ||\n        navigator.getUserMedia ||\n        navigator.webkitGetUserMedia ||\n        navigator.mozGetUserMedia ||\n        navigator.msGetUserMedia;\n\n    error = error || function(err) {\n        console.error(err);\n    };\n\n    const isSupported = !!navigator.getUserMedia;\n    const api = {};\n    let stream = null;\n\n    function onConnect(micStream) {\n        stream = micStream;\n        connected(stream);\n    }\n\n    function onError(e) {\n        if (denied && e.name === 'PermissionDeniedError' || e === 'PERMISSION_DENIED') {\n            denied();\n        } else {\n            error(e.message || e);\n        }\n    }\n\n    function connect() {\n        if (!isSupported) {\n            return api;\n        }\n\n        if (navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices.getUserMedia({\n                audio: true\n            })\n            .then(onConnect)\n            .catch(onError);\n        } else {\n            navigator.getUserMedia({\n                audio: true\n            }, onConnect, onError);\n        }\n        return api;\n    }\n\n    function disconnect() {\n        if (stream.stop) {\n            stream.stop();\n        } else {\n            stream.getAudioTracks()[0].stop();\n        }\n        stream = null;\n        return api;\n    }\n\n    return Object.assign(api, {\n        connect,\n        disconnect,\n        isSupported,\n        get stream() {\n            return stream;\n        }\n    });\n}\n\nexport default sono.register('microphone', microphone, [sono.utils]);\n","import sono from '../core/sono';\n\nfunction recorder(passThrough = false) {\n    const bufferLength = 4096;\n    const buffersL = [];\n    const buffersR = [];\n    let startedAt = 0;\n    let stoppedAt = 0;\n    let script = null;\n    let isRecording = false;\n    let soundOb = null;\n\n    const input = sono.context.createGain();\n    const output = sono.context.createGain();\n    output.gain.value = passThrough ? 1 : 0;\n\n    const node = {\n        in: input,\n        out: output\n    };\n\n    function mergeBuffers(buffers, length) {\n        const buffer = new Float32Array(length);\n        let offset = 0;\n        for (let i = 0; i < buffers.length; i++) {\n            buffer.set(buffers[i], offset);\n            offset += buffers[i].length;\n        }\n        return buffer;\n    }\n\n    function getBuffer() {\n        if (!buffersL.length) {\n            return sono.context.createBuffer(2, bufferLength, sono.context.sampleRate);\n        }\n        const recordingLength = buffersL.length * bufferLength;\n        const buffer = sono.context.createBuffer(2, recordingLength, sono.context.sampleRate);\n        buffer.getChannelData(0)\n            .set(mergeBuffers(buffersL, recordingLength));\n        buffer.getChannelData(1)\n            .set(mergeBuffers(buffersR, recordingLength));\n        return buffer;\n    }\n\n    function destroyScriptProcessor() {\n        if (script) {\n            script.onaudioprocess = null;\n            input.disconnect();\n            script.disconnect();\n        }\n    }\n\n    function createScriptProcessor() {\n        destroyScriptProcessor();\n\n        script = sono.context.createScriptProcessor(bufferLength, 2, 2);\n        input.connect(script);\n        script.connect(output);\n        script.connect(sono.context.destination);\n        // output.connect(sono.context.destination);\n\n\n        script.onaudioprocess = function(event) {\n            const inputL = event.inputBuffer.getChannelData(0);\n            const inputR = event.inputBuffer.getChannelData(1);\n\n            if (passThrough) {\n                const outputL = event.outputBuffer.getChannelData(0);\n                const outputR = event.outputBuffer.getChannelData(1);\n                outputL.set(inputL);\n                outputR.set(inputR);\n            }\n\n            if (isRecording) {\n                buffersL.push(new Float32Array(inputL));\n                buffersR.push(new Float32Array(inputR));\n            }\n        };\n    }\n\n    return {\n        start(sound) {\n            if (!sound) {\n                return;\n            }\n            createScriptProcessor();\n            buffersL.length = 0;\n            buffersR.length = 0;\n            startedAt = sono.context.currentTime;\n            stoppedAt = 0;\n            soundOb = sound;\n            sound.effect.add(node);\n            isRecording = true;\n        },\n        stop() {\n            soundOb.effect.remove(node);\n            soundOb = null;\n            stoppedAt = sono.context.currentTime;\n            isRecording = false;\n            destroyScriptProcessor();\n            return getBuffer();\n        },\n        getDuration() {\n            if (!isRecording) {\n                return stoppedAt - startedAt;\n            }\n            return sono.context.currentTime - startedAt;\n        },\n        get isRecording() {\n            return isRecording;\n        }\n    };\n}\n\nexport default sono.register('recorder', recorder, [sono.utils]);\n","import sono from '../core/sono';\n\nfunction waveform() {\n    let buffer,\n        wave;\n\n    return function(audioBuffer, length) {\n        if (!window.Float32Array || !window.AudioBuffer) {\n            return [];\n        }\n\n        const sameBuffer = buffer === audioBuffer;\n        const sameLength = wave && wave.length === length;\n        if (sameBuffer && sameLength) {\n            return wave;\n        }\n\n        //console.time('waveData');\n        if (!wave || wave.length !== length) {\n            wave = new Float32Array(length);\n        }\n\n        if (!audioBuffer) {\n            return wave;\n        }\n\n        // cache for repeated calls\n        buffer = audioBuffer;\n\n        const chunk = Math.floor(buffer.length / length),\n            resolution = 5, // 10\n            incr = Math.max(Math.floor(chunk / resolution), 1);\n        let greatest = 0;\n\n        for (let i = 0; i < buffer.numberOfChannels; i++) {\n            // check each channel\n            const channel = buffer.getChannelData(i);\n            for (let j = 0; j < length; j++) {\n                // get highest value within the chunk\n                for (let k = j * chunk, l = k + chunk; k < l; k += incr) {\n                    // select highest value from channels\n                    let a = channel[k];\n                    if (a < 0) {\n                        a = -a;\n                    }\n                    if (a > wave[j]) {\n                        wave[j] = a;\n                    }\n                    // update highest overall for scaling\n                    if (a > greatest) {\n                        greatest = a;\n                    }\n                }\n            }\n        }\n        // scale up\n        const scale = 1 / greatest;\n        for (let i = 0; i < wave.length; i++) {\n            wave[i] *= scale;\n        }\n        //console.timeEnd('waveData');\n\n        return wave;\n    };\n}\n\nexport default sono.register('waveform', waveform, [sono.utils]);\n","import sono from '../core/sono';\n\nconst halfPI = Math.PI / 2;\nconst twoPI = Math.PI * 2;\n\nfunction waveformer(config) {\n\n    const style = config.style || 'fill', // 'fill' or 'line'\n        shape = config.shape || 'linear', // 'circular' or 'linear'\n        color = config.color || 0,\n        bgColor = config.bgColor,\n        lineWidth = config.lineWidth || 1,\n        percent = config.percent || 1,\n        originX = config.x || 0,\n        originY = config.y || 0,\n        transform = config.transform;\n\n    let canvas = config.canvas,\n        width = config.width || (canvas && canvas.width),\n        height = config.height || (canvas && canvas.height);\n\n    let ctx = null, currentColor, i, x, y,\n        radius, innerRadius, centerX, centerY;\n\n    if (!canvas && !config.context) {\n        canvas = document.createElement('canvas');\n        width = width || canvas.width;\n        height = height || canvas.height;\n        canvas.width = height;\n        canvas.height = height;\n    }\n\n    if (shape === 'circular') {\n        radius = config.radius || Math.min(height / 2, width / 2);\n        innerRadius = config.innerRadius || radius / 2;\n        centerX = originX + width / 2;\n        centerY = originY + height / 2;\n    }\n\n    ctx = config.context || canvas.getContext('2d');\n\n    function clear() {\n        if (bgColor) {\n            ctx.fillStyle = bgColor;\n            ctx.fillRect(originX, originY, width, height);\n        } else {\n            ctx.clearRect(originX, originY, width, height);\n        }\n\n        ctx.lineWidth = lineWidth;\n\n        currentColor = null;\n\n        if (typeof color !== 'function') {\n            ctx.strokeStyle = color;\n            ctx.beginPath();\n        }\n    }\n\n    function updateColor(position, length, value) {\n        if (typeof color === 'function') {\n            const newColor = color(position, length, value);\n            if (newColor !== currentColor) {\n                currentColor = newColor;\n                ctx.stroke();\n                ctx.strokeStyle = currentColor;\n                ctx.beginPath();\n            }\n        }\n    }\n\n    function getValue(value, position, length) {\n        if (typeof transform === 'function') {\n            return transform(value, position, length);\n        }\n        return value;\n    }\n\n    function getWaveform(value, length) {\n        if (value && typeof value.waveform === 'function') {\n            return value.waveform(length);\n        }\n        if (value) {\n            return value;\n        }\n        if (config.waveform) {\n            return config.waveform;\n        }\n        if (config.sound) {\n            return config.sound.waveform(length);\n        }\n        return null;\n    }\n\n    function update(wave) {\n\n        clear();\n\n        if (shape === 'circular') {\n            const waveform = getWaveform(wave, 360);\n            const length = Math.floor(waveform.length * percent);\n\n            const step = twoPI / length;\n            let angle, magnitude, sine, cosine;\n\n            for (i = 0; i < length; i++) {\n                const value = getValue(waveform[i], i, length);\n                updateColor(i, length, value);\n\n                angle = i * step - halfPI;\n                cosine = Math.cos(angle);\n                sine = Math.sin(angle);\n\n                if (style === 'fill') {\n                    x = centerX + innerRadius * cosine;\n                    y = centerY + innerRadius * sine;\n                    ctx.moveTo(x, y);\n                }\n\n                magnitude = innerRadius + (radius - innerRadius) * value;\n                x = centerX + magnitude * cosine;\n                y = centerY + magnitude * sine;\n\n                if (style === 'line' && i === 0) {\n                    ctx.moveTo(x, y);\n                }\n\n                ctx.lineTo(x, y);\n            }\n\n            if (style === 'line') {\n                ctx.closePath();\n            }\n        } else {\n\n            const waveform = getWaveform(wave, width);\n            let length = Math.min(waveform.length, width - lineWidth / 2);\n            length = Math.floor(length * percent);\n\n            for (i = 0; i < length; i++) {\n                const value = getValue(waveform[i], i, length);\n                updateColor(i, length, value);\n\n                if (style === 'line' && i > 0) {\n                    ctx.lineTo(x, y);\n                }\n\n                x = originX + i;\n                y = originY + height - Math.round(height * value);\n                y = Math.floor(Math.min(y, originY + height - lineWidth / 2));\n\n                if (style === 'fill') {\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x, originY + height);\n                } else {\n                    ctx.lineTo(x, y);\n                }\n            }\n        }\n        ctx.stroke();\n    }\n\n    update.canvas = canvas;\n\n    if (config.waveform || config.sound) {\n        update();\n    }\n\n    return update;\n}\n\nexport default sono.register('waveformer', waveformer, [sono.utils]);\n"],"names":["FakeContext","startTime","Date","now","fn","param","fakeNode","window","Uint8Array","Float32Array","Array","currentTime","getContext","desiredSampleRate","Ctx","AudioContext","webkitAudioContext","ctx","test","navigator","userAgent","sampleRate","buffer","createBuffer","dummy","createBufferSource","connect","destination","start","disconnect","close","isSuspended","state","resume","setTimeout","browser","handlePageVisibility","onHidden","onShown","hidden","visibilityChange","document","mozHidden","msHidden","webkitHidden","onChange","addEventListener","handleTouchLock","context","onUnlock","ua","locked","match","unlock","then","source","stop","body","removeEventListener","extensions","canPlay","tests","el","createElement","forEach","canPlayType","type","indexOf","ext","push","getFileExtension","url","slice","length","toLowerCase","split","lastIndexOf","a","pop","getSupportedFile","fileNames","name","isArray","i","keys","some","key","isAudioBuffer","data","AudioBuffer","isArrayBuffer","ArrayBuffer","isMediaElement","HTMLMediaElement","isMediaStream","getAudioTracks","MediaStreamTrack","isOscillatorType","isScriptConfig","bufferSize","channels","callback","isURL","containsURL","config","src","Effects","_destination","_source","_nodes","has","node","add","remove","toggle","force","removeAll","prototype","hasOwnProperty","bind","setSource","_updateConnections","setDestination","_connectToDestination","n","l","splice","hasNode","arguments","destroy","_connect","b","_in","lastNode","prev","Group","sounds","effects","gain","createGain","preMuteVolume","group","find","soundOrId","found","sound","id","once","play","delay","offset","pause","playing","paused","seek","percent","mute","volume","unMute","setVolume","value","fade","duration","time","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","load","unload","fx","isNaN","Math","min","max","groupVolume","EventEmitter","events","Emitter","off","listener","removeListener","removeAllListeners","Loader","deferLoad","ERROR_STATE","emitter","progress","audioContext","isTouchLocked","request","timeout","removeListeners","readyHandler","errorHandler","progressHandler","loadHandler","dispatchComplete","emit","event","lengthComputable","loaded","total","clearTimeout","message","error","code","status","statusText","decodeArrayBuffer","arraybuffer","decodeAudioData","response","cancel","readyState","abort","loadArrayBuffer","XMLHttpRequest","open","responseType","send","loadAudioElement","tagName","preload","newUrl","api","on","defineProperties","Object","freeze","queue","numLoaded","numTotal","currentLoader","completeHandler","e","next","loader","BufferSource","onEnded","ended","endedCallback","loop","pausedAt","playbackRate","sourceNode","startedAt","createSourceNode","onended","elapsed","endedHandler","offlineCtx","getOfflineContext","numOfChannels","OfflineCtx","OfflineAudioContext","webkitOfflineAudioContext","cloneBuffer","numChannels","numberOfChannels","cloned","getChannelData","set","reverseBuffer","reverse","call","ramp","fromValue","toValue","linear","isFake","exponentialRampToValueAtTime","getFrequency","minValue","maxValue","numberOfOctaves","log","LN2","multiplier","pow","timeCode","seconds","delim","m","floor","s","mn","sc","AudioSource","Type","pool","sources","numCreated","multiPlay","disposeSource","onSourceEnded","index","getSource","cloneNode","every","MediaSource","delayTimeout","fadeTimeout","createMediaElementSource","toVolume","step","abs","MicrophoneSource","stream","createMediaStreamSource","mozGetUserMedia","mozHack","OscillatorSource","frequency","createOscillator","ScriptSource","onProcess","thisArg","createScriptProcessor","onaudioprocess","onPaused","outputBuffer","channel","j","Sound","_context","_effects","_gain","_config","_data","_isTouchLocked","_loader","_loop","_playbackRate","_playWhenReady","_wave","_onEnded","_onLoad","_onLoadError","newConfig","skipLoad","configSrc","file","assign","asMediaElement","_load","reload","waveform","utils","_createSource","Fn","Error","fileData","err","info","__source","SoundGroup","sort","rmeove","Sono","VERSION","getSound","createGroup","soundGroup","soundContext","webAudio","loaderGroup","errorMessage","onError","onProgress","onComplete","createSound","destroySound","destroyAll","pauseAll","resumeAll","stopAll","pageHiddenPaused","title","isSupported","hasWebAudio","args","apply","console","register","attachTo","ob","opts","isSafeNumber","isFinite","AbstractEffect","_out","_node","setSafeParamValue","warn","update","noteFromPitch","noteNum","LOG2E","round","frequencyFromNoteNumber","note","centsOffFromPitch","Analyser","fftSize","float","minDecibels","maxDecibels","smoothing","sono","createAnalyser","_freqFloat","_waveFloat","_waveform","_frequencies","smoothingTimeConstant","getWaveform","useFloat","_needsUpdate","_fftSize","_createArray","getFloatTimeDomainData","getByteTimeDomainData","getFrequencies","frequencyBinCount","getFloatFrequencyData","getByteFrequencyData","getAmplitude","_amplitudeWorker","_createAmplitudeAnalyser","_amplitudeCallback","f","postMessage","byteLength","getPitch","_pitchWorker","_createPitchAnalyser","_pitchCallback","arr","amplitudeBlob","Blob","amplitudeBlobURL","URL","createObjectURL","Worker","onmessage","pitchBlob","pitchBlobURL","noteStrings","pitchCallbackObject","hz","detune","hertz","noteIndex","detuneCents","Compressor","threshold","knee","ratio","attack","release","createDynamicsCompressor","options","Distortion","level","createWaveShaper","_curve","_level","curve","k","deg","PI","x","Echo","feedback","_delay","createDelay","_feedback","delayTime","safeOption","minFrequency","maxFrequency","Filter","q","createBiquadFilter","Q","setByPercent","peak","width","sharpness","MonoFlanger","_lfo","lfoFrequency","lfoGain","StereoFlanger","_splitter","createChannelSplitter","_merger","createChannelMerger","_feedbackL","_feedbackR","_lfoGainL","_lfoGainR","_delayL","_delayR","stereo","pannerDefaults","safeNumber","y","cross","ax","ay","az","z","bx","by","bz","normalize","vec3","sqrt","invScalar","vecPool","v","instance","globalUp","get","angle45","angle90","Panner","createPanner","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","setPosition","setOrientation","pannerNode","fw","up","dispose","nodeOrListener","vec","sin","setSourcePosition","setSourceOrientation","setListenerPosition","setListenerOrientation","getDefaults","setDefaults","defaults","Phaser","stages","_lfoGain","filters","filter","first","last","isDefined","createImpulseResponse","decay","rate","impulseResponse","left","right","random","Reverb","_length","_impulseResponse","_convolver","createConvolver","_opts","changed","_reverse","Script","inputChannels","outputChannels","_callback","input","inputBuffer","output","microphone","connected","denied","getUserMedia","mediaDevices","webkitGetUserMedia","msGetUserMedia","onConnect","micStream","catch","recorder","passThrough","bufferLength","buffersL","buffersR","stoppedAt","script","isRecording","soundOb","mergeBuffers","buffers","getBuffer","recordingLength","destroyScriptProcessor","inputL","inputR","outputL","outputR","effect","wave","audioBuffer","sameBuffer","sameLength","chunk","resolution","greatest","incr","scale","halfPI","twoPI","waveformer","style","shape","color","bgColor","lineWidth","originX","originY","transform","canvas","height","currentColor","radius","innerRadius","centerX","centerY","clear","fillStyle","fillRect","clearRect","strokeStyle","beginPath","updateColor","position","newColor","stroke","getValue","angle","magnitude","sine","cosine","cos","moveTo","lineTo","closePath"],"mappings":"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"}