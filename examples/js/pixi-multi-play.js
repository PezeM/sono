!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":12,"../../modules/es6.array.from":63,"../../modules/es6.string.iterator":67}],2:[function(e,t,n){e("../../modules/es7.array.includes"),t.exports=e("../../modules/_core").Array.includes},{"../../modules/_core":12,"../../modules/es7.array.includes":68}],3:[function(e,t,n){e("../../modules/es6.math.sign"),t.exports=e("../../modules/_core").Math.sign},{"../../modules/_core":12,"../../modules/es6.math.sign":64}],4:[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":12,"../../modules/es6.object.assign":65}],5:[function(e,t,n){e("../../modules/es6.string.includes"),t.exports=e("../../modules/_core").String.includes},{"../../modules/_core":12,"../../modules/es6.string.includes":66}],6:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],7:[function(e,t,n){var r=e("./_wks")("unscopables"),o=Array.prototype;void 0==o[r]&&e("./_hide")(o,r,{}),t.exports=function(e){o[r][e]=!0}},{"./_hide":24,"./_wks":61}],8:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":29}],9:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,s){var a,u=r(t),l=o(u.length),c=i(s,l);if(e&&n!=n){for(;l>c;)if(a=u[c++],a!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},{"./_to-index":54,"./_to-iobject":56,"./_to-length":57}],10:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":11,"./_wks":61}],11:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],12:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],13:[function(e,t,n){"use strict";var r=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},{"./_object-dp":40,"./_property-desc":47}],14:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":6}],15:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],16:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":21}],17:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":22,"./_is-object":29}],18:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],19:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_hide"),s=e("./_redefine"),a=e("./_ctx"),u="prototype",l=function(e,t,n){var c,f,d,h,p=e&l.F,v=e&l.G,y=e&l.S,_=e&l.P,g=e&l.B,x=v?r:y?r[t]||(r[t]={}):(r[t]||{})[u],m=v?o:o[t]||(o[t]={}),b=m[u]||(m[u]={});v&&(n=t);for(c in n)f=!p&&x&&void 0!==x[c],d=(f?x:n)[c],h=g&&f?a(d,r):_&&"function"==typeof d?a(Function.call,d):d,x&&s(x,c,d,e&l.U),m[c]!=d&&i(m,c,h),_&&b[c]!=d&&(b[c]=d)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":12,"./_ctx":14,"./_global":22,"./_hide":24,"./_redefine":48}],20:[function(e,t,n){var r=e("./_wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},{"./_wks":61}],21:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],22:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],23:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],24:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":16,"./_object-dp":40,"./_property-desc":47}],25:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":22}],26:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":16,"./_dom-create":17,"./_fails":21}],27:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":11}],28:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":35,"./_wks":61}],29:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],30:[function(e,t,n){var r=e("./_is-object"),o=e("./_cof"),i=e("./_wks")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},{"./_cof":11,"./_is-object":29,"./_wks":61}],31:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},{"./_an-object":8}],32:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":24,"./_object-create":39,"./_property-desc":47,"./_set-to-string-tag":49,"./_wks":61}],33:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",_=function(){return this};t.exports=function(e,t,n,g,x,m,b){l(n,t,g);var w,A,j,C=function(e){if(!h&&e in E)return E[e];switch(e){case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",T=x==y,M=!1,E=e.prototype,P=E[d]||E[p]||x&&E[x],O=P||C(x),S=x?T?C("entries"):O:void 0,L="Array"==t?E.entries||P:P;if(L&&(j=f(L.call(new e)),j!==Object.prototype&&(c(j,k,!0),r||a(j,d)||s(j,d,_))),T&&P&&P.name!==y&&(M=!0,O=function(){return P.call(this)}),r&&!b||!h&&!M&&E[d]||s(E,d,O),u[t]=O,u[k]=_,x)if(w={values:T?O:C(y),keys:m?O:C(v),entries:S},b)for(A in w)A in E||i(E,A,w[A]);else o(o.P+o.F*(h||M),t,w);return w}},{"./_export":19,"./_has":23,"./_hide":24,"./_iter-create":32,"./_iterators":35,"./_library":36,"./_object-gpo":43,"./_redefine":48,"./_set-to-string-tag":49,"./_wks":61}],34:[function(e,t,n){var r=e("./_wks")("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},e(i)}catch(e){}return n}},{"./_wks":61}],35:[function(e,t,n){t.exports={}},{}],36:[function(e,t,n){t.exports=!1},{}],37:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],38:[function(e,t,n){"use strict";var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),s=e("./_to-object"),a=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=s(e),u=arguments.length,l=1,c=o.f,f=i.f;u>l;)for(var d,h=a(arguments[l++]),p=c?r(h).concat(c(h)):r(h),v=p.length,y=0;v>y;)f.call(h,d=p[y++])&&(n[d]=h[d]);return n}:u},{"./_fails":21,"./_iobject":27,"./_object-gops":42,"./_object-keys":45,"./_object-pie":46,"./_to-object":58}],39:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",l=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",s=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),l=t.F;r--;)delete l[u][i[r]];return l()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=l(),void 0===t?n:o(n,t)}},{"./_an-object":8,"./_dom-create":17,"./_enum-bug-keys":18,"./_html":25,"./_object-dps":41,"./_shared-key":50}],40:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":8,"./_descriptors":16,"./_ie8-dom-define":26,"./_to-primitive":59}],41:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},{"./_an-object":8,"./_descriptors":16,"./_object-dp":40,"./_object-keys":45}],42:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],43:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":23,"./_shared-key":50,"./_to-object":58}],44:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,a=o(e),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(l,n)||l.push(n));return l}},{"./_array-includes":9,"./_has":23,"./_shared-key":50,"./_to-iobject":56}],45:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":18,"./_object-keys-internal":44}],46:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],47:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],48:[function(e,t,n){var r=e("./_global"),o=e("./_hide"),i=e("./_has"),s=e("./_uid")("src"),a="toString",u=Function[a],l=(""+u).split(a);e("./_core").inspectSource=function(e){return u.call(e)},(t.exports=function(e,t,n,a){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,s)||o(n,s,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||u.call(this)})},{"./_core":12,"./_global":22,"./_has":23,"./_hide":24,"./_uid":60}],49:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":23,"./_object-dp":40,"./_wks":61}],50:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":51,"./_uid":60}],51:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":22}],52:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),l=a.length;return u<0||u>=l?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},{"./_defined":15,"./_to-integer":55}],53:[function(e,t,n){var r=e("./_is-regexp"),o=e("./_defined");t.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},{"./_defined":15,"./_is-regexp":30}],54:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":55}],55:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],56:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":15,"./_iobject":27}],57:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":55}],58:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":15}],59:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":29}],60:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],61:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i,a=t.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},{"./_global":22,"./_shared":51,"./_uid":60}],62:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"./_classof":10,"./_core":12,"./_iterators":35,"./_wks":61}],63:[function(e,t,n){"use strict";var r=e("./_ctx"),o=e("./_export"),i=e("./_to-object"),s=e("./_iter-call"),a=e("./_is-array-iter"),u=e("./_to-length"),l=e("./_create-property"),c=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,d=i(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,_=0,g=c(d);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==g||h==Array&&a(g))for(t=u(d.length),n=new h(t);t>_;_++)l(n,_,y?v(d[_],_):d[_]);else for(f=g.call(d),n=new h;!(o=f.next()).done;_++)l(n,_,y?s(f,v,[o.value,_],!0):o.value);return n.length=_,n}})},{"./_create-property":13,"./_ctx":14,"./_export":19,"./_is-array-iter":28,"./_iter-call":31,"./_iter-detect":34,"./_to-length":57,"./_to-object":58,"./core.get-iterator-method":62}],64:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{sign:e("./_math-sign")})},{"./_export":19,"./_math-sign":37}],65:[function(e,t,n){var r=e("./_export");r(r.S+r.F,"Object",{assign:e("./_object-assign")})},{"./_export":19,"./_object-assign":38}],66:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_string-context"),i="includes";r(r.P+r.F*e("./_fails-is-regexp")(i),"String",{includes:function(e){return!!~o(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{"./_export":19,"./_fails-is-regexp":20,"./_string-context":53}],67:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":33,"./_string-at":52}],68:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_array-includes")(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":7,"./_array-includes":9,"./_export":19}],69:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(s(n))for(i=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,void 0,"function"==typeof console.trace&&void 0)),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],70:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<e;r++){var o="undefined"!=typeof t?t:r;n.push(o)}return n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],71:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("events"),u=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setMaxListeners(20),e}return i(t,e),s(t,[{key:"off",value:function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()}}]),t}(a.EventEmitter);n.default=u},{events:69}],72:[function(e,t,n){"use strict";function r(e){function t(){s===c&&a===f||(c=s,f=a,e.innerHTML="FPS: "+s+"<br />AVE: "+a)}function n(e){"undefined"==typeof e&&(e=Date.now()),0===o&&(o=e),e-1e3>o&&(o=e,s=i,i=0,s>1&&(u++,l+=s,a=Math.floor(l/u)),t()),i++}function r(){window.requestAnimationFrame(r),n()}var o=0,i=0,s=0,a=0,u=0,l=0,c=0,f=0;return e||(e=document.createElement("div"),e.setAttribute("id","fps"),e.style.position="absolute",e.style.top="0px",e.style.right="0px",e.style.padding="2px 6px",e.style.zIndex="99999",e.style.background="#000",e.style.color="#fff",e.style.fontSize="10px",document.body.appendChild(e)),{auto:r,update:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],73:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){function e(e){var t=Object.keys(c.default).reduce(function(t,n){return c.default[n]===e?n:t},"").toLowerCase();t&&v.emit(t.toLowerCase())}function t(t){t.preventDefault(),y[t.keyCode]=!0,v.emit("keydown",t.keyCode),e(t.keyCode)}function n(e){e.preventDefault(),y[e.keyCode]=!1,v.emit("keyup",e.keyCode)}function r(){document.addEventListener("keydown",t,!1),document.addEventListener("keyup",n,!1)}function o(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",n)}function i(e){return y[e]}function a(){return y[c.default.LEFT]||y[c.default.A]}function l(){return y[c.default.RIGHT]||y[c.default.D]}function f(){return y[c.default.UP]||y[c.default.W]}function d(){return y[c.default.DOWN]||y[c.default.S]}function h(){return y[c.default.SPACE]}function p(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o(),e&&r()}var v=Object.create(u.default.prototype),y=(0,s.default)(256,!1);return r(),Object.assign(v,{keyboard:c.default,enable:p,isDown:i,left:a,right:l,up:f,down:d,space:h})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var i=e("../array/array"),s=r(i),a=e("../events/emitter"),u=r(a),l=e("./keyboard"),c=r(l)},{"../array/array":70,"../events/emitter":71,"./keyboard":74}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,UNDERSCORE:189,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144}},{}],75:[function(e,t,n){"use strict";function r(){function e(e){return e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===u&&(u=e.next),e===l&&(l=e.prev),e.next=e.prev=null,e}function t(t,n){return e(t),t.prev=n,t.next=n.next,n.next?n.next.prev=t:l=t,n.next=t,t}function n(t,n){return e(t),t.prev=n.prev,t.next=n,n.prev?n.prev.next=t:u=t,n.prev=t,t}function o(e){if(u){for(var n=u;n.next;)n=n.next;t(e,n)}else u=l=e;return e}function i(e){for(var t=u;t;)e(t),t=t.next}function s(e){for(var t=r(),n=u;n;)t.add(e(n)),n=n.next;return t}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=void 0,l=void 0;return a.forEach(function(e){return o(e)}),{get first(){return u},getFirst:function(){return u},get last(){return l},getLast:function(){return l},get length(){return this.getCount()},getCount:function(){for(var e=0,t=u;t;)e++,t=t.next;return e},add:o,remove:e,insertAfter:t,insertBefore:n,forEach:i,map:s}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],76:[function(e,t,n){"use strict";function r(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.random()>.5?e:t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],77:[function(e,t,n){"use strict";function r(e,t){return isNaN(t)&&(t=e,e=0),e+Math.random()*(t-e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],78:[function(e,t,n){"use strict";function r(e,t){return Math.floor(e+Math.random()*(t-e+1))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],79:[function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0},o=Math.sin(t),i=Math.cos(t);return r.x=(e.x-n.x)*i-(e.y-n.y)*o,r.y=(e.x-n.x)*o+(e.y-n.y)*i,r.x+=n.x,r.y+=n.y,r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],80:[function(e,t,n){"use strict";function r(e){var t=[],n=0;return{getPool:function(){return t},get:function(){return t.length>0?t.pop():(n++,e())},dispose:function(e){t.push(e)},fill:function(r){for(;t.length<r;)n++,t[t.length]=e()},empty:function(){t=[]},getNumCreated:function(){return n}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],81:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../linked-list"),a=r(s),u=e("../object-pool"),l=r(u),c=e("./index"),f=r(c),d=function(){function e(t){o(this,e),t||(t=function(){return new f.default}),this.update=this.update.bind(this),this.list=(0,a.default)(),this.pool=(0,l.default)(t)}return i(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>1){for(var n=0;n<t;n++)this.create(e);return this.list.last}var r=this.pool.get();return r.reset(e),this.list.add(r),r}},{key:"add",value:function(e){this.list.add(e)}},{key:"remove",value:function(e){this.list.remove(e),this.pool.dispose(e)}},{key:"forEach",value:function(e){for(var t=this.list.first;t;)e(t),t=t.next}},{key:"update",value:function(e){for(var t=this.list.first;t;){var n=t.next;t.update(),"function"==typeof e&&e(t),t.alive||this.remove(t),t=n}}}]),e}();n.default=d},{"../linked-list":75,"../object-pool":80,"./index":82}],82:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Math.abs,s=Math.atan2,a=Math.cos,u=Math.sin,l=Math.sqrt,c=function(){function e(t){r(this,e),this.opts=t,this._bounds={},this._outerBounds={},this._defaults={alive:!0,x:0,y:0,angle:0,speed:0,gravity:0,mass:1,radius:0,bounce:{x:-1,y:-1},friction:1,lifeTime:0,bounds:{x:0,y:0,width:1280,height:720}},this._props=Object.keys(this._defaults),this.reset(t)}return o(e,[{key:"reset",value:function(e){for(var t=this._defaults,n=this._props,r=e||t,o=0;o<n.length;o++){var i=n[o],s=r[i]||t[i];this[i]=s,t[i]=s}var l=r.angle||t.angle,c=r.speed||t.speed;return this.vx=a(l)*c,this.vy=u(l)*c,this}},{key:"update",value:function(){return this.vx*=this.friction,this.vy*=this.friction,this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy,this}},{key:"accellerate",value:function(e,t){return"undefined"==typeof t&&(t=this.angle),this.vx+=a(t)*e,this.vy+=u(t)*e,this}},{key:"setBounds",value:function(e,t,n,r){this._bounds.x=e||0,this._bounds.y=t||0,this._bounds.width=n,this._bounds.height=r}},{key:"angleTo",value:function(e){return s(e.y-this.y,e.x-this.x)}},{key:"distanceTo",value:function(e){var t=e.x-this.x,n=e.y-this.y;return l(t*t+n*n)}},{key:"gravitateTo",value:function(e){var t=e.x-this.x,n=e.y-this.y,r=t*t+n*n,o=l(r),i=e.mass/r,s=t/o*i,a=n/o*i;return this.vx+=s,this.vy+=a,this}},{key:"springTo",value:function(e,t,n){var r=e.x-this.x,o=e.y-this.y,s=l(r*r+o*o),a=(s-(n||0))*(t||.2);return i(s*a)>0&&(this.vx+=r/s*a,this.vy+=o/s*a),this}},{key:"collides",value:function(e){return this.distanceTo(e)<=this.radius+e.radius}},{key:"edgeCollide",value:function(){var e=this._bounds.x+this.radius,t=this._bounds.x+this._bounds.width-this.radius,n=this._bounds.y+this.radius,r=this._bounds.y+this._bounds.height-this.radius;this.x<e&&(this.x=e,this.vx=this.vx*this.bounce.x),this.x>t&&(this.x=t,this.vx=this.vx*this.bounce.x),this.y<n&&(this.y=n,this.vy=this.vy*this.bounce.y),this.y>r&&(this.y=r,this.vy=this.vy*this.bounce.y)}},{key:"edgeWrap",value:function(){var e=this.outerBounds,t=e.left,n=e.right,r=e.top,o=e.bottom;this.x<t&&(this.x=n),this.x>n&&(this.x=t),this.y<r&&(this.y=o),this.y>o&&(this.y=r)}},{key:"edgeKill",value:function(){var e=this.outerBounds,t=e.left,n=e.right,r=e.top,o=e.bottom;(this.x<t||this.x>n||this.y<r||this.y>o)&&(this.alive=!1)}},{key:"edgeReset",value:function(){var e=this.outerBounds,t=e.left,n=e.right,r=e.top,o=e.bottom;(this.x<t||this.x>n||this.y<r||this.y>o)&&this.reset()}},{key:"lifeKill",value:function(){this.lifeTime--,this.lifeTime<=0&&(this.alive=!1)}},{key:"speed",get:function(){
return 0===this.vx&&0===this.vy?0:l(this.vx*this.vx+this.vy*this.vy)},set:function(e){var t=this.angle;this.vx=a(t)*e,this.vy=u(t)*e}},{key:"angle",get:function(){return 0===this.vx&&0===this.vy?0:s(this.vy,this.vx)},set:function(e){var t=this.speed;this.vx=a(e)*t,this.vy=u(e)*t}},{key:"bounds",get:function(){return this._bounds},set:function(e){var t=e.x,n=e.y,r=e.width,o=e.height;this.setBounds(t,n,r,o)}},{key:"left",get:function(){return this.x-this.radius}},{key:"right",get:function(){return this.x+this.radius}},{key:"top",get:function(){return this.y-this.radius}},{key:"bottom",get:function(){return this.y+this.radius}},{key:"outerBounds",get:function(){return this._outerBounds.left=this._bounds.x-this.radius,this._outerBounds.right=this._bounds.x+this._bounds.width+this.radius,this._outerBounds.top=this._bounds.y-this.radius,this._outerBounds.bottom=this._bounds.y+this._bounds.height+this.radius,this._outerBounds}}]),e}();n.default=c},{}],83:[function(e,t,n){"use strict";!function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=window.DOMTokenList.prototype[e];window.DOMTokenList.prototype[e]=function(e){var n=void 0,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}e.classList.toggle("c3",!1),e.classList.contains("c3")&&!function(){var e=window.DOMTokenList.prototype.toggle;window.DOMTokenList.prototype.toggle=function(t,n){return n=!!n,arguments.length>1&&this.contains(t)===n?n:e.call(this,t)}}(),e=null}()},{}],84:[function(e,t,n){"use strict";!function(e){window.console=window.console||{};var t=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","markTimeline","memory","profile","profileEnd","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"];t.forEach(function(t){window.console[t]=window.console[t]||e})}(function(){})},{}],85:[function(e,t,n){"use strict";!function(){if(!window.requestAnimationFrame)for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}()},{}],86:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=U.getSound(e).sourceInfo,n=t.active,r=t.pooled,o=t.created;return e+" sound: active = "+n+" pooled = "+r+" created = "+o}e("./utils/polyfills");var i=e("usfl/particle"),s=r(i),a=e("usfl/particle/ParticleGroup"),u=r(a),l=e("usfl/math/rotatePoint"),c=r(l),f=e("usfl/input/keyInput"),d=r(f),h=e("usfl/math/random"),p=r(h),v=e("usfl/math/coinToss"),y=r(v),_=e("./utils/ScreenShake/ScreenShake"),g=r(_),x=e("./views/terrain"),m=e("./views/enemyGroup"),b=r(m),w=e("./views/textureFactory"),A=r(w),j=e("./utils/GlowFilter"),C=r(j),k=e("usfl/math/randomInt"),T=r(k),M=e("./views/color"),E=r(M),P=e("usfl/fps"),O=r(P),S=window.PIXI,L=S.Application,D=S.Container,F=S.loaders,I=S.Sprite,N=S.BLEND_MODES,U=window.sono,R=(0,O.default)(),B=new L(960,480,{backgroundColor:0});document.querySelector("[data-container]").appendChild(B.view);var G=document.querySelector("[data-info]"),q=B.stage.addChild(new D),K=new g.default(B.ticker,q);K.coolDown=200;var H=B.renderer,Y=H.width,W=H.height,X=U.canPlay.ogg?"ogg":"mp3";if(U.hasWebAudio){var V=F.Resource;V.setExtensionLoadType(X,V.LOAD_TYPE.XHR),V.setExtensionXhrType(X,V.XHR_RESPONSE_TYPE.BUFFER)}var Q="https://dl.dropboxusercontent.com/u/15470024/prototypes/",z=[{name:"music",url:Q+"audio/space-shooter."+X,loop:!0,volume:.8},{name:"shoot",url:Q+"audio/shoot3."+X,volume:.4,multiPlay:!0},{name:"explode",url:Q+"audio/explode2."+X,volume:.9,multiPlay:!0}],Z=new F.Loader;Z.add(z),Z.onComplete.once(function(){z.forEach(function(e){var t=Object.assign({},e,{src:Z.resources[e.name].data});U.create(t)}),U.getSound("shoot").effect.reverb(),U.play("music");var e=(0,x.generateTerrain)(Y,W,B.renderer,!0),t=q.addChild(e.sprite);t.y=0;var n=(0,x.generateTerrain)(Y,W,B.renderer,!1),r=q.addChild(n.sprite);r.y=W-n.sprite.height;var i=A.default.generateFloaterTexture(B.renderer),a=new u.default(function(){var e=new s.default;return e.gfx=q.addChildAt(new I(i),0),e.gfx.anchor.set(.5),e}),l=(0,d.default)(),f=new s.default({x:Y/8,y:W/2,radius:34,bounce:{x:-.5,y:-.5},friction:.92,bounds:{x:10,y:0,width:Y-20,height:W},health:1}),h=0,v={x:0,y:0},_=A.default.generateHeroTexture(B.renderer);f.gfx=q.addChild(new I(_)),f.gfx.anchor.set(.5),f.gfx.scale.set(.5),f.gfx.blendMode=N.ADD,f.gfx.filters=[new C.default(12,2,1,E.default.green,.4)];var g=0,m=0,w=A.default.generateBulletTexture(B.renderer),j=new u.default(function(){var e=new s.default({radius:4,bounds:{width:Y,height:W}});return e.gfx=q.addChild(new I(w)),e.gfx.anchor.set(.5),e.gfx.blendMode=N.ADD,e}),k=A.default.generateThrustTexture(B.renderer),M=new u.default(function(){var e=new s.default;return e.gfx=q.addChild(new I(k)),e.gfx.anchor.set(.5),e}),P=(0,b.default)(q,Y,W,B.renderer),O=.8,S=0,L={x:20,y:0};B.ticker.add(function(i){function s(){u-g>m&&(U.play("explode"),g=u,m=(0,T.default)(80,160)),K.start()}var u=Date.now();if(R.update(),l.up()?(h=0-Math.PI/16,v.y=0-O*i):l.down()?(h=Math.PI/16,v.y=O*i):(h=0,v.y=0),l.left()?v.x=0-O*i:l.right()?v.x=O*i:v.x=0,f.update(),l.right()||Math.random()>.8){var d=M.create({x:f.x-30,y:f.y,speed:0-f.vx+(0,p.default)(2,4),angle:0-Math.PI+(0,p.default)(0-Math.PI/16,Math.PI/16),lifeTime:30});d.gfx.alpha=1,d.gfx.visible=!0}if(M.update(function(e){e.gfx.position.set(e.x,e.y),e.gfx.alpha=e.lifeTime/30,e.lifeKill(),e.alive||(e.gfx.visible=!1)}),Math.random()<.05){var _=a.create({x:Y+100,y:(0,p.default)(120,W-120),speed:(0,p.default)(4,8),angle:0-Math.PI+(0,p.default)(0-Math.PI/16,Math.PI/16)});_.gfx.visible=!0}a.update(function(e){e.gfx.position.set(e.x,e.y),e.edgeKill(),e.alive||(e.gfx.visible=!1)});var b=-10;if(t.tilePosition.x+=b,r.tilePosition.x+=b,(0,x.terrainCollision)(f,e,!0)&&(v.y=2*i),(0,x.terrainCollision)(f,n,!1)&&(v.y=0-2*i),f.vx+=v.x,f.vy+=v.y,f.edgeCollide(),f.gfx.position.set(f.x,f.y),f.gfx.rotation=f.gfx.rotation+.3*(h-f.gfx.rotation),l.space()&&u-S>50){S=u,L.y=(0,y.default)(-8,8);var w=Math.PI/32,A=(0,p.default)(h-w,h+w),C=j.create({x:f.x+L.x,y:f.y+L.y,speed:Math.max(0,f.vx)+(0,p.default)(8,12),angle:A,lifeTime:200});(0,c.default)({x:f.x+L.x,y:f.y+L.y},h,f,C),C.gfx.visible=!0,U.play("shoot")}G.innerHTML=o("explode")+"<br>"+o("shoot"),j.update(function(e){e.gfx.position.set(e.x,e.y),e.edgeKill(),e.lifeKill(),e.alive||(e.gfx.visible=!1)}),!f.killed&&P.canSpawn(u)&&P.spawn(u),P.update(f,j,s),f.killed&&(f.explode.list.length?f.explode.update(function(e){e.gfx.alpha=.01*e.lifeTime,e.gfx.position.set(e.x,e.y),e.lifeKill(),e.alive||(e.gfx.visible=!1)}):f.alive=!1)})}),Z.load()},{"./utils/GlowFilter":88,"./utils/ScreenShake/ScreenShake":90,"./utils/polyfills":92,"./views/color":93,"./views/enemyGroup":94,"./views/terrain":95,"./views/textureFactory":96,"usfl/fps":72,"usfl/input/keyInput":73,"usfl/math/coinToss":76,"usfl/math/random":77,"usfl/math/randomInt":78,"usfl/math/rotatePoint":79,"usfl/particle":82,"usfl/particle/ParticleGroup":81}],87:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35;r(this,e),this.offset=n/2,this.scaleFactor=o,this.points=[{x:0,y:n/2},{x:t,y:n/2}]}return e.prototype.iterate=function(){for(var e=[],t=0;t<this.points.length-1;t++){var n=this.points[t],r=this.points[t+1],o={x:(n.x+r.x)/2,y:(n.y+r.y)/2};o.x+=Math.random()*this.offset*2-this.offset,o.y+=Math.random()*this.offset*2-this.offset,e.push(n,o)}e.push(this.points[this.points.length-1]),this.points=e,this.offset*=this.scaleFactor},e.prototype.create=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this.iterate();return this.points},e}();n.default=o},{}],88:[function(e,t,n){"use strict";function r(e,t,n,r,o){i.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}\n","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nvec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\nvoid main(void) {\n    const float PI = 3.14159265358979323846264;\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           curColor = texture2D(uSampler, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n".replace(/%QUALITY_DIST%/gi,""+(1/o/e).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.distance=e,this.uniforms.glowColor=new Float32Array([0,0,0,1]),o=Math.pow(o,1/3),this.quality=o,this.uniforms.distance*=o,this.color=r,this.outerStrength=t,this.innerStrength=n}n.__esModule=!0;var o=window.PIXI,i=o.Filter,s=o.utils;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{color:{get:function(){return s.rgb2hex(this.uniforms.glowColor)},set:function(e){s.hex2rgb(e,this.uniforms.glowColor)}},outerStrength:{get:function(){return this.uniforms.outerStrength},set:function(e){this.uniforms.outerStrength=e}}}),n.default=r},{}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("usfl/linked-list"),a=r(s),u=e("usfl/object-pool"),l=r(u),c=function(){function e(t){o(this,e),this.list=(0,a.default)(),this.pool=(0,l.default)(t)}return e.prototype.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e>1){for(var t=0;t<e;t++)this.create();return this.list.last}var n=this.pool.get();return this.list.add(n),n},e.prototype.add=function(e){this.list.add(e)},e.prototype.remove=function(e){this.list.remove(e),this.pool.dispose(e)},e.prototype.forEach=function(e){for(var t=this.list.first;t;)e(t),t=t.next},i(e,[{key:"first",get:function(){return this.list.first}},{key:"last",get:function(){return this.list.last}}]),e}();n.default=c},{"usfl/linked-list":75,"usfl/object-pool":80}],90:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function e(t,n){r(this,e),this.ticker=t,this.displayObject=n,this.screenShakes=0,this.amt=0,this.shookAt=0,this.coolDown=0}return e.prototype.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;if(!(this.screenShakes>0)){var t=Date.now();Date.now()-this.shookAt<this.coolDown||(this.shookAt=t,this.screenShakes=e,this.originalY=this.displayObject.y,window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(10*e),this.ticker.add(this.update,this))}},e.prototype.update=function(){return this.screenShakes--,0===this.screenShakes?(this.displayObject.y=this.originalY,void this.ticker.remove(this.update,this)):void(this.screenShakes%2?(this.amt=.5*this.screenShakes,this.displayObject.y=this.originalY+this.amt):this.displayObject.y=this.originalY-this.amt)},e}();n.default=o},{}],91:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i=t.y-e.y,s=e.x-t.x,a=r.y-n.y,u=n.x-r.x,l=i*u-a*s;if(0===l)return null;var c=i*e.x+s*e.y,f=a*n.x+u*n.y,d=(u*c-s*f)/l,h=(i*f-a*c)/l,p=(d-e.x)/(t.x-e.x),v=(h-e.y)/(t.y-e.y),y=(d-n.x)/(r.x-n.x),_=(h-n.y)/(r.y-n.y);return(p>=0&&p<=1||v>=0&&v<=1)&&(y>=0&&y<=1||_>=0&&_<=1)?(o=o||{},o.x=d,o.y=h,o):null}n.__esModule=!0,n.default=r},{}],92:[function(e,t,n){"use strict";e("core-js/fn/array/from"),e("core-js/fn/array/includes"),e("core-js/fn/object/assign"),e("core-js/fn/math/sign"),e("core-js/fn/string/includes"),e("usfl/polyfill/classList"),e("usfl/polyfill/console"),e("usfl/polyfill/requestAnimationFrame")},{"core-js/fn/array/from":1,"core-js/fn/array/includes":2,"core-js/fn/math/sign":3,"core-js/fn/object/assign":4,"core-js/fn/string/includes":5,"usfl/polyfill/classList":83,"usfl/polyfill/console":84,"usfl/polyfill/requestAnimationFrame":85}],93:[function(e,t,n){"use strict";n.__esModule=!0,n.default={yellow:16777023,cyan:8388607,green:8388352,magenta:16732415,red:15744121}},{}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){function o(e){h=e;for(var n=(0,d.default)(32,128),r=t+100,o=(0,c.default)(120,200),i=m.create(),s=0;s<n;s++){var a=i.create({x:r+4*s,y:o,speed:0});a.gfx.visible=!0,a.killed=!1,a.opts.counter=0,a.opts.index=s}}function i(e,t){for(var n=e.list.first;n;){var r=n.next;if(n.distanceTo(t)<n.radius+t.radius)return n.alive=!1,n.gfx.visible=!1,!0;n=r}return!1}function a(e,t,n,r){for(var o=e.list.first;o;){var s=o.next;if(o.vx=-2,o.prev?o.y+=.3*(o.prev.y-o.y):o.y+=4*Math.sin(o.opts.counter),o.update(),o.gfx.position.set(o.x,o.y),o.opts.counter+=.05,!o.killed&&e.list.last.x<0&&(o.gfx.visible=!1,e.remove(o)),o.killed)o.explode.list.length?o.explode.update(function(e){e.gfx.alpha=.01*e.lifeTime,e.gfx.position.set(e.x,e.y),e.lifeKill(),e.alive||(e.gfx.visible=!1)}):(o.alive=!1,e.remove(o));else if(t.distanceTo(o)<t.radius+o.radius?o.killed=!0:o.killed=i(n,o),o.killed){o.gfx.visible=!1,r();for(var a=0;a<40;a++){var u=o.explode.create({x:o.x,y:o.y,angle:(0,c.default)(0,2*Math.PI),speed:(0,c.default)(2,8),lifeTime:100});u.gfx.alpha=1,u.gfx.visible=!0}}o=s}}function l(e,t,n,r){for(var o=m.first;o;){var i=o.next;a(o,e,t,n,r),o.list.length||m.remove(o),o=i}}function f(e){return e-h>4e3&&m.list.length<2}var h=0,v=p.default.generateEnemyTexture(r),_=p.default.generateExplodeTexture(r),m=new y.default(function(){var r=new u.default(function(){var r=new s.default({radius:10,bounds:{width:t,height:n},counter:0});return r.gfx=e.addChild(new g(v)),r.gfx.anchor.set(.5),r.explode=new u.default(function(){var r=new s.default({radius:2,bounds:{width:t,height:n}});return r.gfx=e.addChild(new g(_)),r.gfx.anchor.set(.5),r.gfx.blendMode=x.ADD,r.gfx.visible=!1,r}),r.explode.pool.fill(40),r.gfx.blendMode=x.ADD,r.gfx.visible=!1,r});return r.pool.fill(32),r});return{spawn:o,update:l,canSpawn:f}}n.__esModule=!0,n.default=o;var i=e("usfl/particle"),s=r(i),a=e("usfl/particle/ParticleGroup"),u=r(a),l=e("usfl/math/random"),c=r(l),f=e("usfl/math/randomInt"),d=r(f),h=e("./textureFactory"),p=r(h),v=e("../utils/PooledList"),y=r(v),_=window.PIXI,g=_.Sprite,x=_.BLEND_MODES},{"../utils/PooledList":89,"./textureFactory":96,"usfl/math/random":77,"usfl/math/randomInt":78,"usfl/particle":82,"usfl/particle/ParticleGroup":81}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){var o=new a.default(2*e,t/4,.8),i=o.create(5),s=new h;s.beginFill(0),s.drawRect(0,0,2*e,t/2),s.lineStyle(5,f.default.green),s.moveTo(i[0].x,i[0].y),s.filters=[w,A];var u=new h;u.lineStyle(5,f.default.cyan),u.moveTo(i[0].x,i[0].y);var l=new h;l.lineStyle(5,3355443),l.beginFill(3355443),l.moveTo(i[0].x,i[0].y);for(var c=t,d=0,y=1;y<i.length;y++)s.lineTo(i[y].x,i[y].y),u.lineTo(i[y].x,i[y].y),l.lineTo(i[y].x,i[y].y),i[y].y<c&&(c=i[y].y),i[y].y>d&&(d=i[y].y);r?(l.lineTo(2*e,c-20),l.lineTo(0,c-20)):(l.lineTo(2*e,d+20),l.lineTo(0,d+20)),l.lineTo(i[0].x,i[0].y);var _=new p;_.addChild(l),_.addChild(u);var g=n.generateTexture(_),x=new v.TilingSprite(g,2*e,Math.floor(g.height));return{sprite:x,points:i,minY:c,maxY:d}}function i(e,t){_.x=e.x,_.y=e.y-e.radius,g.x=e.x,g.y=e.y+e.radius;for(var n=t.sprite.tilePosition.x%t.sprite.width,r=0;r<t.points.length-1;r++){var o=t.points[r],i=t.points[r+1];if(x.x=o.x+n,x.y=o.y+t.sprite.y,m.x=i.x+n,m.y=i.y+t.sprite.y,(0,l.default)(_,g,x,m,b))return!0}return!1}n.__esModule=!0,n.terrainCollision=n.generateTerrain=void 0;var s=e("../utils/CoastLine"),a=r(s),u=e("../utils/math/segmentIntersect"),l=r(u),c=e("./color"),f=r(c),d=window.PIXI,h=d.Graphics,p=d.Container,v=d.extras,y=d.filters,_=(d.BLEND_MODES,{}),g={},x={},m={},b={},w=new y.BlurXFilter,A=new y.BlurYFilter;n.generateTerrain=o,n.terrainCollision=i},{"../utils/CoastLine":87,"../utils/math/segmentIntersect":91,"./color":93}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=new h;return t.lineStyle(2,d.default.red),t.drawCircle(0,0,4),e.generateTexture(t)}function i(e){var t=new h;return t.beginFill(d.default.magenta,.1),t.lineStyle(2,d.default.magenta),t.drawCircle(0,0,20),e.generateTexture(t)}function s(e){var t=[],n=Math.PI/6,r=e*Math.cos(n),o=e*Math.sin(n);t.push(r,o);for(var i=1;i<7;i++)n=2*Math.PI/6*(i+.5),r=e*Math.cos(n),o=e*Math.sin(n),t.push(r,o);return t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=s(t),r=new h;return r.lineStyle(5,d.default.green),r.drawPolygon(n),r.moveTo(t-1,-12),r.lineTo(t+10,-12),r.moveTo(t-1,12),r.lineTo(t+10,12),e.generateTexture(r)}function u(e){var t=new h;return t.lineStyle(2,d.default.cyan),t.drawCircle(0,0,4),e.generateTexture(t)}function l(e){var t=new h;return t.lineStyle(2,d.default.yellow),t.drawCircle(0,0,4),e.generateTexture(t)}function c(e){var t=new h;return t.beginFill(1118481),t.drawCircle(0,0,10),e.generateTexture(t)}n.__esModule=!0;var f=e("./color"),d=r(f),h=window.PIXI.Graphics;n.default={generateExplodeTexture:o,generateEnemyTexture:i,generateHeroTexture:a,generateBulletTexture:u,generateThrustTexture:l,generateFloaterTexture:c}},{"./color":93}]},{},[86]);