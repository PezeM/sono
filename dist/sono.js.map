{"version":3,"file":"sono.js","sources":["../node_modules/core-js/modules/_global.js","../node_modules/core-js/modules/_core.js","../node_modules/core-js/modules/_is-object.js","../node_modules/core-js/modules/_an-object.js","../node_modules/core-js/modules/_fails.js","../node_modules/core-js/modules/_descriptors.js","../node_modules/core-js/modules/_dom-create.js","../node_modules/core-js/modules/_ie8-dom-define.js","../node_modules/core-js/modules/_to-primitive.js","../node_modules/core-js/modules/_object-dp.js","../node_modules/core-js/modules/_property-desc.js","../node_modules/core-js/modules/_hide.js","../node_modules/core-js/modules/_has.js","../node_modules/core-js/modules/_uid.js","../node_modules/core-js/modules/_library.js","../node_modules/core-js/modules/_shared.js","../node_modules/core-js/modules/_function-to-string.js","../node_modules/core-js/modules/_redefine.js","../node_modules/core-js/modules/_a-function.js","../node_modules/core-js/modules/_ctx.js","../node_modules/core-js/modules/_export.js","../node_modules/core-js/modules/_cof.js","../node_modules/core-js/modules/_iobject.js","../node_modules/core-js/modules/_defined.js","../node_modules/core-js/modules/_to-iobject.js","../node_modules/core-js/modules/_to-integer.js","../node_modules/core-js/modules/_to-length.js","../node_modules/core-js/modules/_to-absolute-index.js","../node_modules/core-js/modules/_array-includes.js","../node_modules/core-js/modules/_shared-key.js","../node_modules/core-js/modules/_object-keys-internal.js","../node_modules/core-js/modules/_enum-bug-keys.js","../node_modules/core-js/modules/_object-keys.js","../node_modules/core-js/modules/_object-gops.js","../node_modules/core-js/modules/_object-pie.js","../node_modules/core-js/modules/_to-object.js","../node_modules/core-js/modules/_object-assign.js","../node_modules/core-js/modules/es6.object.assign.js","../src/core/utils/dummy.js","../src/core/utils/fake-context.js","../src/core/utils/iOS.js","../src/core/context.js","../src/core/effects.js","../src/core/utils/file.js","../src/core/group.js","../src/core/utils/emitter.js","../src/core/utils/loader.js","../src/core/utils/log.js","../src/core/utils/pageVisibility.js","../src/core/source/buffer-source.js","../src/core/utils/firefox.js","../src/core/utils/utils.js","../src/core/utils/isSafeNumber.js","../src/core/source/audio-source.js","../src/core/source/media-source.js","../src/core/source/microphone-source.js","../src/core/source/oscillator-source.js","../src/core/sound.js","../src/core/utils/sound-group.js","../src/core/utils/touchLock.js","../src/core/sono.js","../src/effects/abstract-direct-effect.js","../src/effects/analyser.js","../src/effects/abstract-effect.js","../src/effects/compressor.js","../src/effects/convolver.js","../src/effects/distortion.js","../src/effects/echo.js","../src/effects/filter.js","../src/effects/flanger.js","../src/core/utils/isDefined.js","../src/effects/panner.js","../src/effects/phaser.js","../src/effects/reverb.js","../src/utils/microphone.js","../src/utils/recorder.js","../src/utils/waveform.js","../src/utils/waveformer.js"],"sourcesContent":["// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.6.10' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","module.exports = false;\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","module.exports = require('./_shared')('native-function-to-string', Function.toString);\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar $toString = require('./_function-to-string');\nvar TO_STRING = 'toString';\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","export default function dummy(context) {\r\n    const buffer = context.createBuffer(1, 1, context.sampleRate);\r\n    const source = context.createBufferSource();\r\n    source.buffer = buffer;\r\n    source.connect(context.destination);\r\n    source.start(0);\r\n    source.stop(0);\r\n    source.disconnect();\r\n}\r\n","export default function FakeContext() {\r\n\r\n    const startTime = Date.now();\r\n\r\n    function fn() {}\r\n\r\n    function param() {\r\n        return {\r\n            value: 1,\r\n            defaultValue: 1,\r\n            linearRampToValueAtTime: fn,\r\n            setValueAtTime: fn,\r\n            exponentialRampToValueAtTime: fn,\r\n            setTargetAtTime: fn,\r\n            setValueCurveAtTime: fn,\r\n            cancelScheduledValues: fn\r\n        };\r\n    }\r\n\r\n    function fakeNode() {\r\n        return {\r\n            connect: fn,\r\n            disconnect: fn,\r\n            // analyser\r\n            frequencyBinCount: 0,\r\n            smoothingTimeConstant: 0,\r\n            fftSize: 0,\r\n            minDecibels: 0,\r\n            maxDecibels: 0,\r\n            getByteTimeDomainData: fn,\r\n            getByteFrequencyData: fn,\r\n            getFloatTimeDomainData: fn,\r\n            getFloatFrequencyData: fn,\r\n            // gain\r\n            gain: param(),\r\n            // panner\r\n            panningModel: 0,\r\n            setPosition: fn,\r\n            setOrientation: fn,\r\n            setVelocity: fn,\r\n            distanceModel: 0,\r\n            refDistance: 0,\r\n            maxDistance: 0,\r\n            rolloffFactor: 0,\r\n            coneInnerAngle: 360,\r\n            coneOuterAngle: 360,\r\n            coneOuterGain: 0,\r\n            // filter:\r\n            type: 0,\r\n            frequency: param(),\r\n            Q: param(),\r\n            detune: param(),\r\n            // delay\r\n            delayTime: param(),\r\n            // convolver\r\n            buffer: 0,\r\n            // compressor\r\n            threshold: param(),\r\n            knee: param(),\r\n            ratio: param(),\r\n            attack: param(),\r\n            release: param(),\r\n            reduction: param(),\r\n            // distortion\r\n            oversample: 0,\r\n            curve: 0,\r\n            // buffer\r\n            sampleRate: 1,\r\n            length: 0,\r\n            duration: 0,\r\n            numberOfChannels: 0,\r\n            getChannelData: function() {\r\n                return [];\r\n            },\r\n            copyFromChannel: fn,\r\n            copyToChannel: fn,\r\n            // listener\r\n            dopplerFactor: 0,\r\n            speedOfSound: 0,\r\n            // osc\r\n            start: fn\r\n        };\r\n    }\r\n\r\n    // ie9\r\n    if (!window.Uint8Array) {\r\n        window.Uint8Array = window.Float32Array = Array;\r\n    }\r\n\r\n    return {\r\n        isFake: true,\r\n        activeSourceCount: 0,\r\n        createAnalyser: fakeNode,\r\n        createBuffer: fakeNode,\r\n        createBufferSource: fakeNode,\r\n        createMediaElementSource: fakeNode,\r\n        createMediaStreamSource: fakeNode,\r\n        createBiquadFilter: fakeNode,\r\n        createChannelMerger: fakeNode,\r\n        createChannelSplitter: fakeNode,\r\n        createDynamicsCompressor: fakeNode,\r\n        createConvolver: fakeNode,\r\n        createDelay: fakeNode,\r\n        createGain: fakeNode,\r\n        createOscillator: fakeNode,\r\n        createPanner: fakeNode,\r\n        createScriptProcessor: fakeNode,\r\n        createWaveShaper: fakeNode,\r\n        decodeAudioData: fn,\r\n        destination: fakeNode,\r\n        listener: fakeNode(),\r\n        sampleRate: 44100,\r\n        state: '',\r\n        get currentTime() {\r\n            return (Date.now() - startTime) / 1000;\r\n        }\r\n    };\r\n}\r\n","export default navigator && /(iPhone|iPad|iPod)/i.test(navigator.userAgent);\r\n","import dummy from './utils/dummy';\r\nimport FakeContext from './utils/fake-context';\r\nimport iOS from './utils/iOS';\r\n\r\nconst desiredSampleRate = 44100;\r\n\r\nconst Ctx = window.AudioContext || window.webkitAudioContext || FakeContext;\r\n\r\nlet context = new Ctx();\r\n\r\nif (!context) {\r\n    context = new FakeContext();\r\n}\r\n\r\n// Check if hack is necessary. Only occurs in iOS6+ devices\r\n// and only when you first boot the iPhone, or play a audio/video\r\n// with a different sample rate\r\n// https://github.com/Jam3/ios-safe-audio-context/blob/master/index.js\r\nif (iOS && context.sampleRate !== desiredSampleRate) {\r\n    dummy(context);\r\n    context.close(); // dispose old context\r\n    context = new Ctx();\r\n}\r\n\r\n// Handles bug in Safari 9 OSX where AudioContext instance starts in 'suspended' state\r\nif (context.state === 'suspended' && typeof context.resume === 'function') {\r\n    window.setTimeout(() => context.resume(), 1000);\r\n}\r\n\r\nexport default context;\r\n","export default class Effects {\r\n    constructor(context) {\r\n        this.context = context;\r\n        this._destination = null;\r\n        this._source = null;\r\n\r\n        this._nodes = [];\r\n        this._nodes.has = node => this.has(node);\r\n        this._nodes.add = node => this.add(node);\r\n        this._nodes.remove = node => this.remove(node);\r\n        this._nodes.toggle = (node, force) => this.toggle(node, force);\r\n        this._nodes.removeAll = () => this.removeAll();\r\n\r\n        Object.keys(Effects.prototype).forEach(key => {\r\n            if (!this._nodes.hasOwnProperty(key) && typeof Effects.prototype[key] === 'function') {\r\n                this._nodes[key] = this[key].bind(this);\r\n            }\r\n        });\r\n    }\r\n\r\n    setSource(node) {\r\n        this._source = node;\r\n        this._updateConnections();\r\n        return node;\r\n    }\r\n\r\n    setDestination(node) {\r\n        this._connectToDestination(node);\r\n        return node;\r\n    }\r\n\r\n    has(node) {\r\n        if (!node) {\r\n            return false;\r\n        }\r\n        return this._nodes.indexOf(node) > -1;\r\n    }\r\n\r\n    add(node) {\r\n        if (!node) {\r\n            return null;\r\n        }\r\n        if (this.has(node)) {\r\n            return node;\r\n        }\r\n        if (Array.isArray(node)) {\r\n            let n;\r\n            for (let i = 0; i < node.length; i++) {\r\n                n = this.add(node[i]);\r\n            }\r\n            return n;\r\n        }\r\n        this._nodes.push(node);\r\n        this._updateConnections();\r\n        return node;\r\n    }\r\n\r\n    remove(node) {\r\n        if (!node) {\r\n            return null;\r\n        }\r\n        if (!this.has(node)) {\r\n            return node;\r\n        }\r\n        const l = this._nodes.length;\r\n        for (let i = 0; i < l; i++) {\r\n            if (node === this._nodes[i]) {\r\n                this._nodes.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        node.disconnect();\r\n        this._updateConnections();\r\n        return node;\r\n    }\r\n\r\n    toggle(node, force) {\r\n        force = !!force;\r\n        const hasNode = this.has(node);\r\n        if (arguments.length > 1 && hasNode === force) {\r\n            return this;\r\n        }\r\n        if (hasNode) {\r\n            this.remove(node);\r\n        } else {\r\n            this.add(node);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    removeAll() {\r\n        while (this._nodes.length) {\r\n            const node = this._nodes.pop();\r\n            node.disconnect();\r\n        }\r\n        this._updateConnections();\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this.removeAll();\r\n        this.context = null;\r\n        this._destination = null;\r\n        if (this._source) {\r\n            this._source.disconnect();\r\n        }\r\n        this._source = null;\r\n    }\r\n\r\n    _connect(a, b) {\r\n        a.disconnect();\r\n        // console.log('> connect output', (a.name || a.constructor.name), 'to input', (b.name || b.constructor.name));\r\n        a.connect(b._in || b);\r\n    }\r\n\r\n    _connectToDestination(node) {\r\n        const lastNode = this._nodes[this._nodes.length - 1] || this._source;\r\n\r\n        if (lastNode) {\r\n            this._connect(lastNode, node);\r\n        }\r\n\r\n        this._destination = node;\r\n    }\r\n\r\n    _updateConnections() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        // console.log('updateConnections');\r\n\r\n        let node,\r\n            prev;\r\n\r\n        for (let i = 0; i < this._nodes.length; i++) {\r\n            node = this._nodes[i];\r\n            prev = i === 0 ? this._source : this._nodes[i - 1];\r\n            this._connect(prev, node);\r\n        }\r\n\r\n        if (this._destination) {\r\n            this._connectToDestination(this._destination);\r\n        }\r\n    }\r\n}\r\n","const extensions = [];\r\nconst canPlay = {};\r\n\r\n/*\r\n * Initial tests\r\n */\r\n\r\nconst tests = [\r\n    {\r\n        ext: 'ogg',\r\n        type: 'audio/ogg; codecs=\"vorbis\"'\r\n    }, {\r\n        ext: 'mp3',\r\n        type: 'audio/mpeg;'\r\n    }, {\r\n        ext: 'opus',\r\n        type: 'audio/ogg; codecs=\"opus\"'\r\n    }, {\r\n        ext: 'wav',\r\n        type: 'audio/wav; codecs=\"1\"'\r\n    }, {\r\n        ext: 'm4a',\r\n        type: 'audio/x-m4a;'\r\n    }, {\r\n        ext: 'm4a',\r\n        type: 'audio/aac;'\r\n    }\r\n];\r\n\r\nlet el = document.createElement('audio');\r\nif (el) {\r\n    tests.forEach(function(test) {\r\n        const canPlayType = !!el.canPlayType(test.type);\r\n        if (canPlayType && extensions.indexOf(test.ext) === -1) {\r\n            extensions.push(test.ext);\r\n        }\r\n        canPlay[test.ext] = canPlayType;\r\n    });\r\n    el = null;\r\n}\r\n\r\n/*\r\n * find a supported file\r\n */\r\n\r\nfunction getFileExtension(url) {\r\n    if (typeof url !== 'string') {\r\n        return '';\r\n    }\r\n    // from DataURL\r\n    if (url.slice(0, 5) === 'data:') {\r\n        const match = url.match(/data:audio\\/(ogg|mp3|opus|wav|m4a)/i);\r\n        if (match && match.length > 1) {\r\n            return match[1].toLowerCase();\r\n        }\r\n    }\r\n    // from Standard URL\r\n    url = url.split('?')[0];\r\n    url = url.slice(url.lastIndexOf('/') + 1);\r\n\r\n    const a = url.split('.');\r\n    if (a.length === 1 || (a[0] === '' && a.length === 2)) {\r\n        return '';\r\n    }\r\n    return a.pop().toLowerCase();\r\n}\r\n\r\nfunction getSupportedFile(fileNames) {\r\n    let name;\r\n\r\n    if (Array.isArray(fileNames)) {\r\n        // if array get the first one that works\r\n        for (let i = 0; i < fileNames.length; i++) {\r\n            name = fileNames[i];\r\n            const ext = getFileExtension(name);\r\n            if (extensions.indexOf(ext) > -1) {\r\n                break;\r\n            }\r\n        }\r\n    } else if (typeof fileNames === 'object') {\r\n        // if not array and is object\r\n        Object.keys(fileNames).some(function(key) {\r\n            name = fileNames[key];\r\n            const ext = getFileExtension(name);\r\n            return extensions.indexOf(ext) > -1;\r\n        });\r\n    }\r\n    // if string just return\r\n    return name || fileNames;\r\n}\r\n\r\n/*\r\n * infer file types\r\n */\r\n\r\nfunction isAudioBuffer(data) {\r\n    return !!(data && window.AudioBuffer && data instanceof window.AudioBuffer);\r\n}\r\n\r\nfunction isArrayBuffer(data) {\r\n    return !!(data && window.ArrayBuffer && data instanceof window.ArrayBuffer);\r\n}\r\n\r\nfunction isMediaElement(data) {\r\n    return !!(data && window.HTMLMediaElement && data instanceof window.HTMLMediaElement);\r\n}\r\n\r\nfunction isMediaStream(data) {\r\n    return !!(\r\n        data && typeof data.getAudioTracks === 'function' && data.getAudioTracks().length &&\r\n        window.MediaStreamTrack && data.getAudioTracks()[0] instanceof window.MediaStreamTrack\r\n    );\r\n}\r\n\r\nfunction isOscillatorType(data) {\r\n    return !!(\r\n        data && typeof data === 'string' &&\r\n        (data === 'sine' || data === 'square' || data === 'sawtooth' || data === 'triangle')\r\n    );\r\n}\r\n\r\nfunction isURL(data) {\r\n    return !!(data && typeof data === 'string' && (data.indexOf('.') > -1 || data.slice(0, 5) === 'data:'));\r\n}\r\n\r\nfunction containsURL(config) {\r\n    if (!config || isMediaElement(config)) {\r\n        return false;\r\n    }\r\n    // string, array or object with src/url/data property that is string, array or arraybuffer\r\n    const src = getSrc(config);\r\n    return isURL(src) || isArrayBuffer(src) || (Array.isArray(src) && isURL(src[0]));\r\n}\r\n\r\nfunction getSrc(config) {\r\n    return config.src || config.url || config.data || config;\r\n}\r\n\r\nexport default {\r\n    canPlay,\r\n    containsURL,\r\n    extensions,\r\n    getFileExtension,\r\n    getSrc,\r\n    getSupportedFile,\r\n    isAudioBuffer,\r\n    isArrayBuffer,\r\n    isMediaElement,\r\n    isMediaStream,\r\n    isOscillatorType,\r\n    isURL\r\n};\r\n","import Effects from './effects';\r\n\r\nexport default function Group(context, destination) {\r\n    const sounds = [];\r\n    const effects = new Effects(context);\r\n    const gain = context.createGain();\r\n    let preMuteVolume = 1;\r\n    let group = null;\r\n\r\n    if (context) {\r\n        effects.setSource(gain);\r\n        effects.setDestination(destination || context.destination);\r\n    }\r\n\r\n    /*\r\n     * Add / remove\r\n     */\r\n\r\n    function find(soundOrId, callback) {\r\n        let found;\r\n\r\n        if (!soundOrId && soundOrId !== 0) {\r\n            return found;\r\n        }\r\n\r\n        sounds.some(function(sound) {\r\n            if (sound === soundOrId || sound.id === soundOrId) {\r\n                found = sound;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        if (found && callback) {\r\n            return callback(found);\r\n        }\r\n\r\n        return found;\r\n    }\r\n\r\n    function remove(soundOrId) {\r\n        find(soundOrId, (sound) => sounds.splice(sounds.indexOf(sound), 1));\r\n        return group;\r\n    }\r\n\r\n    function add(sound) {\r\n        sound.gain.disconnect();\r\n        sound.gain.connect(gain);\r\n\r\n        sounds.push(sound);\r\n\r\n        sound.once('destroy', remove);\r\n\r\n        return group;\r\n    }\r\n\r\n    /*\r\n     * Controls\r\n     */\r\n\r\n    function play(delay, offset) {\r\n        sounds.forEach((sound) => sound.play(delay, offset));\r\n        return group;\r\n    }\r\n\r\n    function pause() {\r\n        sounds.forEach((sound) => {\r\n            if (sound.playing) {\r\n                sound.pause();\r\n            }\r\n        });\r\n        return group;\r\n    }\r\n\r\n    function resume() {\r\n        sounds.forEach((sound) => {\r\n            if (sound.paused) {\r\n                sound.play();\r\n            }\r\n        });\r\n        return group;\r\n    }\r\n\r\n    function stop() {\r\n        sounds.forEach((sound) => sound.stop());\r\n        return group;\r\n    }\r\n\r\n    function seek(percent) {\r\n        sounds.forEach((sound) => sound.seek(percent));\r\n        return group;\r\n    }\r\n\r\n    function mute() {\r\n        preMuteVolume = group.volume;\r\n        group.volume = 0;\r\n        return group;\r\n    }\r\n\r\n    function unMute() {\r\n        group.volume = preMuteVolume || 1;\r\n        return group;\r\n    }\r\n\r\n    function setVolume(value) {\r\n        group.volume = value;\r\n        return group;\r\n    }\r\n\r\n    function fade(volume, duration) {\r\n        if (context) {\r\n            const param = gain.gain;\r\n            const time = context.currentTime;\r\n\r\n            param.cancelScheduledValues(time);\r\n            param.setValueAtTime(param.value, time);\r\n            // param.setValueAtTime(volume, time + duration);\r\n            param.linearRampToValueAtTime(volume, time + duration);\r\n            // param.setTargetAtTime(volume, time, duration);\r\n            // param.exponentialRampToValueAtTime(Math.max(volume, 0.0001), time + duration);\r\n        } else {\r\n            sounds.forEach((sound) => sound.fade(volume, duration));\r\n        }\r\n\r\n        return group;\r\n    }\r\n\r\n    /*\r\n     * Load\r\n     */\r\n\r\n    function load() {\r\n        sounds.forEach((sound) => sound.load());\r\n    }\r\n\r\n    /*\r\n     * Unload\r\n     */\r\n\r\n    function unload() {\r\n        sounds.forEach((sound) => sound.unload());\r\n    }\r\n\r\n    /*\r\n     * Destroy\r\n     */\r\n\r\n    function destroy() {\r\n        while (sounds.length) {\r\n            sounds.pop()\r\n                .destroy();\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Api\r\n     */\r\n\r\n    group = {\r\n        add,\r\n        find,\r\n        remove,\r\n        play,\r\n        pause,\r\n        resume,\r\n        stop,\r\n        seek,\r\n        setVolume,\r\n        mute,\r\n        unMute,\r\n        fade,\r\n        load,\r\n        unload,\r\n        destroy,\r\n        gain,\r\n        get effects() {\r\n            return effects._nodes;\r\n        },\r\n        set effects(value) {\r\n            effects.removeAll().add(value);\r\n        },\r\n        get fx() {\r\n            return this.effects;\r\n        },\r\n        set fx(value) {\r\n            this.effects = value;\r\n        },\r\n        get sounds() {\r\n            return sounds;\r\n        },\r\n        get volume() {\r\n            return gain.gain.value;\r\n        },\r\n        set volume(value) {\r\n            if (isNaN(value)) {\r\n                return;\r\n            }\r\n\r\n            value = Math.min(Math.max(value, 0), 1);\r\n\r\n            if (context) {\r\n                gain.gain.cancelScheduledValues(context.currentTime);\r\n                gain.gain.value = value;\r\n                gain.gain.setValueAtTime(value, context.currentTime);\r\n            } else {\r\n                gain.gain.value = value;\r\n            }\r\n            sounds.forEach((sound) => {\r\n                if (!sound.context) {\r\n                    sound.groupVolume = value;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    return group;\r\n}\r\n\r\nGroup.Effects = Effects;\r\n","import events from 'events';\r\nconst {EventEmitter} = events;\r\n\r\nexport default class Emitter extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    off (type, listener) {\r\n        if (listener) {\r\n            return this.removeListener(type, listener);\r\n        }\r\n        if (type) {\r\n            return this.removeAllListeners(type);\r\n        }\r\n        return this.removeAllListeners();\r\n    }\r\n}\r\n","import Emitter from './emitter';\r\n\r\nconst ERROR_STATE = ['', 'ABORTED', 'NETWORK', 'DECODE', 'SRC_NOT_SUPPORTED'];\r\n\r\nexport default function Loader(url, deferLoad) {\r\n    const emitter = new Emitter();\r\n\r\n    let audioContext = null;\r\n    let data = null;\r\n    let isTouchLocked = false;\r\n    let progress = 0;\r\n    let request = null;\r\n    let timeout = null;\r\n\r\n    function removeListeners() {\r\n        emitter.off();\r\n\r\n        if (data && typeof data.removeEventListener === 'function') {\r\n            data.removeEventListener('load', readyHandler);\r\n            data.removeEventListener('canplaythrough', readyHandler);\r\n            data.removeEventListener('error', errorHandler);\r\n            data.onerror = null;\r\n        }\r\n\r\n        if (request) {\r\n            request.removeEventListener('progress', progressHandler);\r\n            request.removeEventListener('load', loadHandler);\r\n            request.removeEventListener('error', errorHandler);\r\n        }\r\n    }\r\n\r\n    function dispatchComplete(buffer) {\r\n        emitter.emit('progress', 1);\r\n        emitter.emit('loaded', buffer);\r\n        emitter.emit('complete', buffer);\r\n\r\n        removeListeners();\r\n    }\r\n\r\n    function progressHandler(event) {\r\n        if (event.lengthComputable) {\r\n            progress = event.loaded / event.total;\r\n            emitter.emit('progress', progress);\r\n        }\r\n    }\r\n\r\n    function errorHandler() {\r\n        cancelTimeout();\r\n\r\n        let status = '';\r\n\r\n        if (request) {\r\n            status = `${request.status} ${request.statusText}`;\r\n        } else if (data && data.error) {\r\n            status = ERROR_STATE[data.error.code];\r\n        }\r\n\r\n        if (emitter.listenerCount('error')) {\r\n            emitter.emit('error', new Error(`Load Error: ${status} ${url}`));\r\n        }\r\n\r\n        removeListeners();\r\n    }\r\n\r\n    function cancelTimeout() {\r\n        window.clearTimeout(timeout);\r\n    }\r\n\r\n    function decodeArrayBuffer(arraybuffer) {\r\n        audioContext.decodeAudioData(arraybuffer, (buffer) => {\r\n            data = buffer;\r\n            request = null;\r\n            progress = 1;\r\n            dispatchComplete(buffer);\r\n        },\r\n        errorHandler\r\n        );\r\n    }\r\n\r\n    function loadHandler() {\r\n        if (request.status >= 400) {\r\n            errorHandler();\r\n            return;\r\n        }\r\n        decodeArrayBuffer(request.response);\r\n    }\r\n\r\n    function readyHandler() {\r\n        cancelTimeout();\r\n        if (!data) {\r\n            return;\r\n        }\r\n        if (!data.readyState) {\r\n            errorHandler();\r\n            return;\r\n        }\r\n        progress = 1;\r\n        dispatchComplete(data);\r\n    }\r\n\r\n    function cancel() {\r\n        cancelTimeout();\r\n        removeListeners();\r\n\r\n        if (request && request.readyState !== 4) {\r\n            request.abort();\r\n        }\r\n        request = null;\r\n    }\r\n\r\n    function destroy() {\r\n        cancel();\r\n        request = null;\r\n        data = null;\r\n        audioContext = null;\r\n    }\r\n\r\n    // audio buffer\r\n\r\n    function loadArrayBuffer() {\r\n        if (url instanceof window.ArrayBuffer) {\r\n            decodeArrayBuffer(url);\r\n            return;\r\n        }\r\n        request = new XMLHttpRequest();\r\n        request.open('GET', url, true);\r\n        request.responseType = 'arraybuffer';\r\n        request.addEventListener('progress', progressHandler);\r\n        request.addEventListener('load', loadHandler);\r\n        request.addEventListener('error', errorHandler);\r\n        request.send();\r\n    }\r\n\r\n    // audio element\r\n\r\n    function loadAudioElement() {\r\n        if (!data || !data.tagName) {\r\n            data = document.createElement('audio');\r\n        }\r\n\r\n        if (!isTouchLocked) {\r\n            cancelTimeout();\r\n            timeout = window.setTimeout(readyHandler, 3000);\r\n            data.addEventListener('canplaythrough', readyHandler, false);\r\n            data.addEventListener('load', readyHandler, false);\r\n        }\r\n\r\n        data.addEventListener('error', errorHandler, false);\r\n        data.preload = 'auto';\r\n        data.onerror = errorHandler;\r\n        data.src = url;\r\n        data.load();\r\n\r\n        if (isTouchLocked) {\r\n            dispatchComplete(data);\r\n        }\r\n    }\r\n\r\n    function start(force = false) {\r\n        if (!url || (deferLoad && !force)) {\r\n            return;\r\n        }\r\n        if (audioContext) {\r\n            loadArrayBuffer();\r\n        } else {\r\n            loadAudioElement();\r\n        }\r\n    }\r\n\r\n    // reload\r\n\r\n    function load(newUrl) {\r\n        url = newUrl;\r\n        start();\r\n    }\r\n\r\n    const api = {\r\n        on: emitter.on.bind(emitter),\r\n        once: emitter.once.bind(emitter),\r\n        off: emitter.off.bind(emitter),\r\n        load,\r\n        start,\r\n        cancel,\r\n        destroy\r\n    };\r\n\r\n    Object.defineProperties(api, {\r\n        data: {\r\n            get: function() {\r\n                return data;\r\n            }\r\n        },\r\n        progress: {\r\n            get: function() {\r\n                return progress;\r\n            }\r\n        },\r\n        audioContext: {\r\n            set: function(value) {\r\n                audioContext = value;\r\n            }\r\n        },\r\n        isTouchLocked: {\r\n            set: function(value) {\r\n                isTouchLocked = value;\r\n            }\r\n        },\r\n        url: {\r\n            get: function() {\r\n                return url;\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n\r\nLoader.Group = function() {\r\n    const emitter = new Emitter();\r\n    const queue = [];\r\n    let numLoaded = 0;\r\n    let numTotal = 0;\r\n    let currentLoader = null;\r\n\r\n    function progressHandler(progress) {\r\n        const loaded = numLoaded + progress;\r\n        emitter.emit('progress', loaded / numTotal);\r\n    }\r\n\r\n    function completeHandler() {\r\n        numLoaded++;\r\n        removeListeners();\r\n        emitter.emit('progress', numLoaded / numTotal);\r\n        next();\r\n    }\r\n\r\n    function errorHandler(e) {\r\n        removeListeners();\r\n        if (emitter.listenerCount('error')) {\r\n            emitter.emit('error', e);\r\n        }\r\n        next();\r\n    }\r\n\r\n    function next() {\r\n        if (queue.length === 0) {\r\n            currentLoader = null;\r\n            emitter.emit('complete');\r\n            return;\r\n        }\r\n\r\n        currentLoader = queue.pop();\r\n        currentLoader.on('progress', progressHandler);\r\n        currentLoader.once('loaded', completeHandler);\r\n        currentLoader.once('error', errorHandler);\r\n        currentLoader.start();\r\n    }\r\n\r\n    function removeListeners() {\r\n        currentLoader.off('progress', progressHandler);\r\n        currentLoader.off('loaded', completeHandler);\r\n        currentLoader.off('error', errorHandler);\r\n    }\r\n\r\n    function add(loader) {\r\n        queue.push(loader);\r\n        numTotal++;\r\n        return loader;\r\n    }\r\n\r\n    function start() {\r\n        numTotal = queue.length;\r\n        next();\r\n    }\r\n\r\n    return Object.freeze({\r\n        on: emitter.on.bind(emitter),\r\n        once: emitter.once.bind(emitter),\r\n        off: emitter.off.bind(emitter),\r\n        add,\r\n        start\r\n    });\r\n};\r\n","export default function log(api) {\r\n    const title = 'sono ' + api.VERSION,\r\n        info = 'Supported:' + api.isSupported +\r\n        ' WebAudioAPI:' + api.hasWebAudio +\r\n        ' TouchLocked:' + api.isTouchLocked +\r\n        ' State:' + (api.context && api.context.state) +\r\n        ' Extensions:' + api.file.extensions;\r\n\r\n    if (navigator.userAgent.indexOf('Chrome') > -1) {\r\n        const args = [\r\n            '%c ♫ ' + title +\r\n            ' ♫ %c ' + info + ' ',\r\n            'color: #FFFFFF; background: #379F7A',\r\n            'color: #1F1C0D; background: #E0FBAC'\r\n        ];\r\n        console.log.apply(console, args);\r\n    } else if (window.console && window.console.log.call) {\r\n        console.log.call(console, title + ' ' + info);\r\n    }\r\n}\r\n","export default function pageVisibility(onHidden, onShown) {\r\n    let enabled = false;\r\n    let hidden = null;\r\n    let visibilityChange = null;\r\n\r\n    if (typeof document.hidden !== 'undefined') {\r\n        hidden = 'hidden';\r\n        visibilityChange = 'visibilitychange';\r\n    } else if (typeof document.mozHidden !== 'undefined') {\r\n        hidden = 'mozHidden';\r\n        visibilityChange = 'mozvisibilitychange';\r\n    } else if (typeof document.msHidden !== 'undefined') {\r\n        hidden = 'msHidden';\r\n        visibilityChange = 'msvisibilitychange';\r\n    } else if (typeof document.webkitHidden !== 'undefined') {\r\n        hidden = 'webkitHidden';\r\n        visibilityChange = 'webkitvisibilitychange';\r\n    }\r\n\r\n    function onChange() {\r\n        if (document[hidden]) {\r\n            onHidden();\r\n        } else {\r\n            onShown();\r\n        }\r\n    }\r\n\r\n    function enable(value) {\r\n        enabled = value;\r\n\r\n        if (enabled) {\r\n            document.addEventListener(visibilityChange, onChange, false);\r\n        } else {\r\n            document.removeEventListener(visibilityChange, onChange);\r\n        }\r\n    }\r\n\r\n    if (typeof visibilityChange !== 'undefined') {\r\n        enable(true);\r\n    }\r\n\r\n    return {\r\n        get enabled() {\r\n            return enabled;\r\n        },\r\n        set enabled(value) {\r\n            enable(value);\r\n        }\r\n    };\r\n}\r\n","export default function BufferSource(buffer, context, endedCallback) {\r\n    const api = {};\r\n    let ended = false;\r\n    let loop = false;\r\n    let paused = false;\r\n    let cuedAt = 0;\r\n    let playbackRate = 1;\r\n    let playing = false;\r\n    let sourceNode = null;\r\n    let startedAt = 0;\r\n\r\n    function createSourceNode() {\r\n        if (!sourceNode && context) {\r\n            sourceNode = context.createBufferSource();\r\n            sourceNode.buffer = buffer;\r\n        }\r\n        return sourceNode;\r\n    }\r\n\r\n    /*\r\n     * Controls\r\n     */\r\n\r\n    function stop() {\r\n        if (sourceNode) {\r\n            sourceNode.onended = null;\r\n            try {\r\n                sourceNode.disconnect();\r\n                sourceNode.stop(0);\r\n            } catch (e) {}\r\n            sourceNode = null;\r\n        }\r\n\r\n        paused = false;\r\n        cuedAt = 0;\r\n        playing = false;\r\n        startedAt = 0;\r\n    }\r\n\r\n    function pause() {\r\n        const elapsed = context.currentTime - startedAt;\r\n        stop();\r\n        cuedAt = elapsed;\r\n        playing = false;\r\n        paused = true;\r\n    }\r\n\r\n    function endedHandler() {\r\n        stop();\r\n        ended = true;\r\n        if (typeof endedCallback === 'function') {\r\n            endedCallback(api);\r\n        }\r\n    }\r\n\r\n    function play(delay = 0, offset = 0) {\r\n        if (playing) {\r\n            return;\r\n        }\r\n\r\n        delay = delay ? context.currentTime + delay : 0;\r\n\r\n        if (offset) {\r\n            cuedAt = 0;\r\n        }\r\n\r\n        if (cuedAt) {\r\n            offset = cuedAt;\r\n        }\r\n\r\n        while (offset > api.duration) {\r\n            offset = offset % api.duration;\r\n        }\r\n\r\n        createSourceNode();\r\n        sourceNode.onended = endedHandler;\r\n        sourceNode.start(delay, offset);\r\n\r\n        sourceNode.loop = loop;\r\n        sourceNode.playbackRate.value = playbackRate;\r\n\r\n        startedAt = context.currentTime - offset;\r\n        ended = false;\r\n        paused = false;\r\n        cuedAt = 0;\r\n        playing = true;\r\n    }\r\n\r\n\r\n    /*\r\n     * Destroy\r\n     */\r\n\r\n    function destroy() {\r\n        stop();\r\n        buffer = null;\r\n        context = null;\r\n        endedCallback = null;\r\n        sourceNode = null;\r\n    }\r\n\r\n    /*\r\n     * Getters & Setters\r\n     */\r\n\r\n    Object.defineProperties(api, {\r\n        play: {\r\n            value: play\r\n        },\r\n        pause: {\r\n            value: pause\r\n        },\r\n        stop: {\r\n            value: stop\r\n        },\r\n        destroy: {\r\n            value: destroy\r\n        },\r\n        currentTime: {\r\n            get: function() {\r\n                if (cuedAt) {\r\n                    return cuedAt;\r\n                }\r\n                if (startedAt) {\r\n                    let time = context.currentTime - startedAt;\r\n                    while (time > api.duration) {\r\n                        time = time % api.duration;\r\n                    }\r\n                    return time;\r\n                }\r\n                return 0;\r\n            },\r\n            set: function(value) {\r\n                cuedAt = value;\r\n            }\r\n        },\r\n        duration: {\r\n            get: function() {\r\n                return buffer ? buffer.duration : 0;\r\n            }\r\n        },\r\n        ended: {\r\n            get: function() {\r\n                return ended;\r\n            }\r\n        },\r\n        loop: {\r\n            get: function() {\r\n                return loop;\r\n            },\r\n            set: function(value) {\r\n                loop = !!value;\r\n                if (sourceNode) {\r\n                    sourceNode.loop = loop;\r\n                }\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                return paused;\r\n            }\r\n        },\r\n        playbackRate: {\r\n            get: function() {\r\n                return playbackRate;\r\n            },\r\n            set: function(value) {\r\n                playbackRate = value;\r\n                if (sourceNode) {\r\n                    sourceNode.playbackRate.value = playbackRate;\r\n                }\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                return playing;\r\n            }\r\n        },\r\n        progress: {\r\n            get: function() {\r\n                return api.duration ? api.currentTime / api.duration : 0;\r\n            }\r\n        },\r\n        sourceNode: {\r\n            get: function() {\r\n                return createSourceNode();\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n","export default navigator && /Firefox/i.test(navigator.userAgent);\r\n","import context from '../context';\r\n\r\nlet offlineCtx;\r\n/*\r\nIn contrast with a standard AudioContext, an OfflineAudioContext doesn't render\r\nthe audio to the device hardware;\r\ninstead, it generates it, as fast as it can, and outputs the result to an AudioBuffer.\r\n*/\r\nfunction getOfflineContext(numOfChannels, length, sampleRate) {\r\n    if (offlineCtx) {\r\n        return offlineCtx;\r\n    }\r\n    numOfChannels = numOfChannels || 2;\r\n    sampleRate = sampleRate || 44100;\r\n    length = sampleRate || numOfChannels;\r\n\r\n    const OfflineCtx = window.OfflineAudioContext || window.webkitOfflineAudioContext;\r\n\r\n    offlineCtx = (OfflineCtx ? new OfflineCtx(numOfChannels, length, sampleRate) : null);\r\n\r\n    return offlineCtx;\r\n}\r\n\r\n\r\n/*\r\n * clone audio buffer\r\n */\r\n\r\nfunction cloneBuffer(buffer, offset = 0, length = buffer.length) {\r\n    if (!context || context.isFake) {\r\n        return buffer;\r\n    }\r\n    const numChannels = buffer.numberOfChannels;\r\n    const cloned = context.createBuffer(numChannels, length, buffer.sampleRate);\r\n    for (let i = 0; i < numChannels; i++) {\r\n        cloned.getChannelData(i)\r\n            .set(buffer.getChannelData(i).slice(offset, offset + length));\r\n    }\r\n    return cloned;\r\n}\r\n\r\n/*\r\n * reverse audio buffer\r\n */\r\n\r\nfunction reverseBuffer(buffer) {\r\n    const numChannels = buffer.numberOfChannels;\r\n    for (let i = 0; i < numChannels; i++) {\r\n        Array.prototype.reverse.call(buffer.getChannelData(i));\r\n    }\r\n    return buffer;\r\n}\r\n\r\n/*\r\n * ramp audio param\r\n */\r\n\r\nfunction ramp(param, fromValue, toValue, duration, linear) {\r\n    if (context.isFake) {\r\n        return;\r\n    }\r\n\r\n    param.setValueAtTime(fromValue, context.currentTime);\r\n\r\n    if (linear) {\r\n        param.linearRampToValueAtTime(toValue, context.currentTime + duration);\r\n    } else {\r\n        param.exponentialRampToValueAtTime(toValue, context.currentTime + duration);\r\n    }\r\n}\r\n\r\n/*\r\n * get frequency from min to max by passing 0 to 1\r\n */\r\n\r\nfunction getFrequency(value) {\r\n    if (context.isFake) {\r\n        return 0;\r\n    }\r\n    // get frequency by passing number from 0 to 1\r\n    // Clamp the frequency between the minimum value (40 Hz) and half of the\r\n    // sampling rate.\r\n    const minValue = 40;\r\n    const maxValue = context.sampleRate / 2;\r\n    // Logarithm (base 2) to compute how many octaves fall in the range.\r\n    const numberOfOctaves = Math.log(maxValue / minValue) / Math.LN2;\r\n    // Compute a multiplier from 0 to 1 based on an exponential scale.\r\n    const multiplier = Math.pow(2, numberOfOctaves * (value - 1.0));\r\n    // Get back to the frequency value between min and max.\r\n    return maxValue * multiplier;\r\n}\r\n\r\n/*\r\n * Format seconds as timecode string\r\n */\r\n\r\nfunction timeCode(seconds, delim = ':') {\r\n    // const h = Math.floor(seconds / 3600);\r\n    // const m = Math.floor((seconds % 3600) / 60);\r\n    const m = Math.floor(seconds / 60);\r\n    const s = Math.floor((seconds % 3600) % 60);\r\n    // const hr = (h < 10 ? '0' + h + delim : h + delim);\r\n    const mn = (m < 10 ? '0' + m : m) + delim;\r\n    const sc = (s < 10 ? '0' + s : s);\r\n    // return hr + mn + sc;\r\n    return mn + sc;\r\n}\r\n\r\nexport default {\r\n    getOfflineContext,\r\n    cloneBuffer,\r\n    reverseBuffer,\r\n    ramp,\r\n    getFrequency,\r\n    timeCode\r\n};\r\n","export default function isSafeNumber(value) {\r\n    return typeof value === 'number' && !isNaN(value) && isFinite(value);\r\n}\r\n","export default function AudioSource(Type, data, context, onEnded) {\r\n    const sourceNode = context.createGain();\r\n    const source = create(data);\r\n    const api = {};\r\n    const pool = [];\r\n    const clones = [];\r\n    let numCreated = 0;\r\n    let singlePlay = false;\r\n\r\n    function createSourceNode() {\r\n        return sourceNode;\r\n    }\r\n\r\n    function disposeSource(src) {\r\n        src.stop();\r\n        if (!singlePlay) {\r\n            pool.push(src);\r\n        }\r\n    }\r\n\r\n    function onSourceEnded(src) {\r\n        if (src !== source && clones.length) {\r\n            const index = clones.indexOf(src);\r\n            clones.splice(index, 1);\r\n            disposeSource(src);\r\n        }\r\n        onEnded();\r\n    }\r\n\r\n    function create(buffer) {\r\n        return new Type(buffer, context, onSourceEnded);\r\n    }\r\n\r\n    function getSource() {\r\n        if (singlePlay || !source.playing) {\r\n            return source;\r\n        }\r\n\r\n        if (pool.length > 0) {\r\n            return pool.pop();\r\n        }\r\n\r\n        numCreated++;\r\n        if (data.tagName) {\r\n            return create(data.cloneNode());\r\n        }\r\n        return create(data);\r\n    }\r\n\r\n    function play(delay, offset) {\r\n        const src = getSource();\r\n        if (sourceNode) {\r\n            src.sourceNode.connect(sourceNode);\r\n        }\r\n        if (src !== source) {\r\n            clones.push(src);\r\n        }\r\n        src.play(delay, offset);\r\n    }\r\n\r\n    function stop() {\r\n        source.stop();\r\n        while (clones.length) {\r\n            disposeSource(clones.pop());\r\n        }\r\n    }\r\n\r\n    function pause() {\r\n        source.pause();\r\n        clones.forEach(src => src.pause());\r\n    }\r\n\r\n    function load(url) {\r\n        stop();\r\n        pool.length = 0;\r\n        source.load(url);\r\n    }\r\n\r\n    function destroy() {\r\n        source.destroy();\r\n        while (clones.length) {\r\n            clones.pop().destroy();\r\n        }\r\n        while (pool.length) {\r\n            pool.pop().destroy();\r\n        }\r\n        sourceNode.disconnect();\r\n    }\r\n\r\n    /*\r\n     * Getters & Setters\r\n     */\r\n\r\n    Object.defineProperties(api, {\r\n        play: {\r\n            value: play\r\n        },\r\n        pause: {\r\n            value: pause\r\n        },\r\n        stop: {\r\n            value: stop\r\n        },\r\n        load: {\r\n            value: load\r\n        },\r\n        destroy: {\r\n            value: destroy\r\n        },\r\n        currentTime: {\r\n            get: function() {\r\n                return source.currentTime || 0;\r\n            },\r\n            set: function(value) {\r\n                source.currentTime = value;\r\n                clones.forEach(src => (src.currentTime = value));\r\n            }\r\n        },\r\n        duration: {\r\n            get: function() {\r\n                return source.duration || 0;\r\n            }\r\n        },\r\n        ended: {\r\n            get: function() {\r\n                return source.ended && clones.every(src => src.ended);\r\n            }\r\n        },\r\n        info: {\r\n            get: function() {\r\n                return {\r\n                    pooled: pool.length,\r\n                    active: clones.length + 1,\r\n                    created: numCreated + 1\r\n                };\r\n            }\r\n        },\r\n        loop: {\r\n            get: function() {\r\n                return source.loop;\r\n            },\r\n            set: function(value) {\r\n                source.loop = !!value;\r\n                clones.forEach(src => (src.loop = !!value));\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                return source.paused;\r\n            }\r\n        },\r\n        playbackRate: {\r\n            get: function() {\r\n                return source.playbackRate;\r\n            },\r\n            set: function(value) {\r\n                source.playbackRate = value;\r\n                clones.forEach(src => (src.playbackRate = value));\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                return source.playing;\r\n            }\r\n        },\r\n        progress: {\r\n            get: function() {\r\n                return source.progress;\r\n            }\r\n        },\r\n        singlePlay: {\r\n            get: function() {\r\n                return singlePlay;\r\n            },\r\n            set: function(value) {\r\n                singlePlay = value;\r\n            }\r\n        },\r\n        sourceNode: {\r\n            get: function() {\r\n                return createSourceNode();\r\n            }\r\n        },\r\n        volume: {\r\n            get: function() {\r\n                return source.volume;\r\n            },\r\n            set: function(value) {\r\n                if (source.hasOwnProperty('volume')) {\r\n                    source.volume = value;\r\n                    clones.forEach(src => (src.volume = value));\r\n                }\r\n            }\r\n        },\r\n        groupVolume: {\r\n            get: function() {\r\n                return source.groupVolume;\r\n            },\r\n            set: function(value) {\r\n                if (!source.hasOwnProperty('groupVolume')) {\r\n                    return;\r\n                }\r\n                source.groupVolume = value;\r\n                clones.forEach(src => (src.groupVolume = value));\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n","export default function MediaSource(el, context, onEnded) {\r\n    const api = {};\r\n    let ended = false;\r\n    let endedCallback = onEnded;\r\n    let delayTimeout = null;\r\n    let loop = false;\r\n    let paused = false;\r\n    let playbackRate = 1;\r\n    let playing = false;\r\n    let sourceNode = null;\r\n    let groupVolume = 1;\r\n    let volume = 1;\r\n\r\n    function createSourceNode() {\r\n        if (!sourceNode && context) {\r\n            sourceNode = context.createMediaElementSource(el);\r\n        }\r\n        return sourceNode;\r\n    }\r\n\r\n    /*\r\n     * Load\r\n     */\r\n\r\n    function load(url) {\r\n        el.src = url;\r\n        el.load();\r\n        ended = false;\r\n        paused = false;\r\n        playing = false;\r\n    }\r\n\r\n    /*\r\n     * Controls\r\n     */\r\n\r\n    function readyHandler() {\r\n        el.removeEventListener('canplaythrough', readyHandler);\r\n        if (playing) {\r\n            el.play();\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Ended handler\r\n     */\r\n\r\n    function endedHandler() {\r\n\r\n        if (loop) {\r\n            el.currentTime = 0;\r\n            // fixes bug where server doesn't support seek:\r\n            if (el.currentTime > 0) {\r\n                el.load();\r\n            }\r\n            el.play();\r\n\r\n            return;\r\n        }\r\n\r\n        ended = true;\r\n        paused = false;\r\n        playing = false;\r\n\r\n        if (typeof endedCallback === 'function') {\r\n            endedCallback(api);\r\n        }\r\n    }\r\n\r\n    function play(delay, offset) {\r\n        clearTimeout(delayTimeout);\r\n\r\n        el.volume = volume * groupVolume;\r\n        el.playbackRate = playbackRate;\r\n\r\n        if (offset) {\r\n            el.currentTime = offset;\r\n        }\r\n\r\n        if (delay) {\r\n            delayTimeout = setTimeout(play, delay);\r\n        } else {\r\n            // el.load();\r\n            el.play();\r\n        }\r\n\r\n        ended = false;\r\n        paused = false;\r\n        playing = true;\r\n\r\n        el.removeEventListener('ended', endedHandler);\r\n        el.addEventListener('ended', endedHandler, false);\r\n\r\n        if (el.readyState < 1) {\r\n            el.removeEventListener('canplaythrough', readyHandler);\r\n            el.addEventListener('canplaythrough', readyHandler, false);\r\n            // el.load();\r\n            el.play();\r\n        }\r\n    }\r\n\r\n    function pause() {\r\n        clearTimeout(delayTimeout);\r\n\r\n        if (!el) {\r\n            return;\r\n        }\r\n\r\n        el.pause();\r\n        playing = false;\r\n        paused = true;\r\n    }\r\n\r\n    function stop() {\r\n        clearTimeout(delayTimeout);\r\n\r\n        if (!el) {\r\n            return;\r\n        }\r\n\r\n        el.pause();\r\n\r\n        try {\r\n            el.currentTime = 0;\r\n            // fixes bug where server doesn't support seek:\r\n            if (el.currentTime > 0) {\r\n                el.load();\r\n            }\r\n        } catch (e) {}\r\n\r\n        playing = false;\r\n        paused = false;\r\n    }\r\n\r\n    /*\r\n     * Destroy\r\n     */\r\n\r\n    function destroy() {\r\n        el.removeEventListener('ended', endedHandler);\r\n        el.removeEventListener('canplaythrough', readyHandler);\r\n        stop();\r\n        el = null;\r\n        context = null;\r\n        endedCallback = null;\r\n        sourceNode = null;\r\n    }\r\n\r\n    /*\r\n     * Getters & Setters\r\n     */\r\n\r\n    Object.defineProperties(api, {\r\n        play: {\r\n            value: play\r\n        },\r\n        pause: {\r\n            value: pause\r\n        },\r\n        stop: {\r\n            value: stop\r\n        },\r\n        load: {\r\n            value: load\r\n        },\r\n        destroy: {\r\n            value: destroy\r\n        },\r\n        currentTime: {\r\n            get: function() {\r\n                return el ? el.currentTime : 0;\r\n            },\r\n            set: function(value) {\r\n                if (el) {\r\n                    el.currentTime = value;\r\n                }\r\n            }\r\n        },\r\n        duration: {\r\n            get: function() {\r\n                return el ? el.duration : 0;\r\n            }\r\n        },\r\n        ended: {\r\n            get: function() {\r\n                return ended;\r\n            }\r\n        },\r\n        loop: {\r\n            get: function() {\r\n                return loop;\r\n            },\r\n            set: function(value) {\r\n                loop = !!value;\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                return paused;\r\n            }\r\n        },\r\n        playbackRate: {\r\n            get: function() {\r\n                return playbackRate;\r\n            },\r\n            set: function(value) {\r\n                playbackRate = value;\r\n                if (el) {\r\n                    el.playbackRate = playbackRate;\r\n                }\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                return playing;\r\n            }\r\n        },\r\n        progress: {\r\n            get: function() {\r\n                return el && el.duration ? el.currentTime / el.duration : 0;\r\n            }\r\n        },\r\n        sourceNode: {\r\n            get: function() {\r\n                return createSourceNode();\r\n            }\r\n        },\r\n        volume: {\r\n            get: function() {\r\n                return volume;\r\n            },\r\n            set: function(value) {\r\n                volume = value;\r\n                if (el) {\r\n                    el.volume = volume * groupVolume;\r\n                }\r\n            }\r\n        },\r\n        groupVolume: {\r\n            get: function() {\r\n                return groupVolume;\r\n            },\r\n            set: function(value) {\r\n                groupVolume = value;\r\n                if (el) {\r\n                    el.volume = volume * groupVolume;\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n","export default function MicrophoneSource(stream, context) {\r\n    let ended = false,\r\n        paused = false,\r\n        cuedAt = 0,\r\n        playing = false,\r\n        sourceNode = null, // MicrophoneSourceNode\r\n        startedAt = 0;\r\n\r\n    function createSourceNode() {\r\n        if (!sourceNode && context) {\r\n            sourceNode = context.createMediaStreamSource(stream);\r\n            // HACK: stops moz garbage collection killing the stream\r\n            // see https://support.mozilla.org/en-US/questions/984179\r\n            if (navigator.mozGetUserMedia) {\r\n                window.mozHack = sourceNode;\r\n            }\r\n        }\r\n        return sourceNode;\r\n    }\r\n\r\n    /*\r\n     * Controls\r\n     */\r\n\r\n    function play(delay) {\r\n        delay = delay ? context.currentTime + delay : 0;\r\n\r\n        createSourceNode();\r\n        sourceNode.start(delay);\r\n\r\n        startedAt = context.currentTime - cuedAt;\r\n        ended = false;\r\n        playing = true;\r\n        paused = false;\r\n        cuedAt = 0;\r\n    }\r\n\r\n    function stop() {\r\n        if (sourceNode) {\r\n            try {\r\n                sourceNode.stop(0);\r\n            } catch (e) {}\r\n            sourceNode = null;\r\n        }\r\n        ended = true;\r\n        paused = false;\r\n        cuedAt = 0;\r\n        playing = false;\r\n        startedAt = 0;\r\n    }\r\n\r\n    function pause() {\r\n        const elapsed = context.currentTime - startedAt;\r\n        stop();\r\n        cuedAt = elapsed;\r\n        playing = false;\r\n        paused = true;\r\n    }\r\n\r\n    /*\r\n     * Destroy\r\n     */\r\n\r\n    function destroy() {\r\n        stop();\r\n        context = null;\r\n        sourceNode = null;\r\n        stream = null;\r\n        window.mozHack = null;\r\n    }\r\n\r\n    /*\r\n     * Api\r\n     */\r\n\r\n    const api = {\r\n        play,\r\n        pause,\r\n        stop,\r\n        destroy,\r\n\r\n        duration: 0,\r\n        progress: 0\r\n    };\r\n\r\n    /*\r\n     * Getters & Setters\r\n     */\r\n\r\n    Object.defineProperties(api, {\r\n        currentTime: {\r\n            get: function() {\r\n                if (cuedAt) {\r\n                    return cuedAt;\r\n                }\r\n                if (startedAt) {\r\n                    return context.currentTime - startedAt;\r\n                }\r\n                return 0;\r\n            },\r\n            set: function(value) {\r\n                cuedAt = value;\r\n            }\r\n        },\r\n        ended: {\r\n            get: function() {\r\n                return ended;\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                return paused;\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                return playing;\r\n            }\r\n        },\r\n        sourceNode: {\r\n            get: function() {\r\n                return createSourceNode();\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n","export default function OscillatorSource(type, context) {\r\n    let ended = false,\r\n        paused = false,\r\n        cuedAt = 0,\r\n        playing = false,\r\n        sourceNode = null, // OscillatorSourceNode\r\n        startedAt = 0,\r\n        frequency = 200,\r\n        api = null;\r\n\r\n    function createSourceNode() {\r\n        if (!sourceNode && context) {\r\n            sourceNode = context.createOscillator();\r\n            sourceNode.type = type;\r\n            sourceNode.frequency.value = frequency;\r\n        }\r\n        return sourceNode;\r\n    }\r\n\r\n    /*\r\n     * Controls\r\n     */\r\n\r\n    function play(delay) {\r\n        delay = delay || 0;\r\n        if (delay) {\r\n            delay = context.currentTime + delay;\r\n        }\r\n\r\n        createSourceNode();\r\n        sourceNode.start(delay);\r\n\r\n        if (cuedAt) {\r\n            startedAt = context.currentTime - cuedAt;\r\n        } else {\r\n            startedAt = context.currentTime;\r\n        }\r\n\r\n        ended = false;\r\n        playing = true;\r\n        paused = false;\r\n        cuedAt = 0;\r\n    }\r\n\r\n    function stop() {\r\n        if (sourceNode) {\r\n            try {\r\n                sourceNode.stop(0);\r\n            } catch (e) {}\r\n            sourceNode = null;\r\n        }\r\n        ended = true;\r\n        paused = false;\r\n        cuedAt = 0;\r\n        playing = false;\r\n        startedAt = 0;\r\n    }\r\n\r\n    function pause() {\r\n        const elapsed = context.currentTime - startedAt;\r\n        stop();\r\n        cuedAt = elapsed;\r\n        playing = false;\r\n        paused = true;\r\n    }\r\n\r\n    /*\r\n     * Destroy\r\n     */\r\n\r\n    function destroy() {\r\n        stop();\r\n        context = null;\r\n        sourceNode = null;\r\n    }\r\n\r\n    /*\r\n     * Api\r\n     */\r\n\r\n    api = {\r\n        play: play,\r\n        pause: pause,\r\n        stop: stop,\r\n        destroy: destroy\r\n    };\r\n\r\n    /*\r\n     * Getters & Setters\r\n     */\r\n\r\n    Object.defineProperties(api, {\r\n        currentTime: {\r\n            get: function() {\r\n                if (cuedAt) {\r\n                    return cuedAt;\r\n                }\r\n                if (startedAt) {\r\n                    return context.currentTime - startedAt;\r\n                }\r\n                return 0;\r\n            },\r\n            set: function(value) {\r\n                cuedAt = value;\r\n            }\r\n        },\r\n        duration: {\r\n            value: 0\r\n        },\r\n        ended: {\r\n            get: function() {\r\n                return ended;\r\n            }\r\n        },\r\n        frequency: {\r\n            get: function() {\r\n                return frequency;\r\n            },\r\n            set: function(value) {\r\n                frequency = value;\r\n                if (sourceNode) {\r\n                    sourceNode.frequency.value = value;\r\n                }\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                return paused;\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                return playing;\r\n            }\r\n        },\r\n        progress: {\r\n            value: 0\r\n        },\r\n        sourceNode: {\r\n            get: function() {\r\n                return createSourceNode();\r\n            }\r\n        }\r\n    });\r\n\r\n    return Object.freeze(api);\r\n}\r\n","import context from './context';\r\nimport BufferSource from './source/buffer-source';\r\nimport Effects from './effects';\r\nimport Emitter from './utils/emitter';\r\nimport file from './utils/file';\r\nimport firefox from './utils/firefox';\r\nimport utils from './utils/utils';\r\nimport isSafeNumber from './utils/isSafeNumber';\r\nimport Loader from './utils/loader';\r\nimport AudioSource from './source/audio-source';\r\nimport MediaSource from './source/media-source';\r\nimport MicrophoneSource from './source/microphone-source';\r\nimport OscillatorSource from './source/oscillator-source';\r\n\r\nexport default class Sound extends Emitter {\r\n    constructor(config) {\r\n        super();\r\n\r\n        this.id = config.id || null;\r\n\r\n        this._context = config.context || context;\r\n        this._destination = config.destination || this._context.destination;\r\n        this._effects = new Effects(this._context);\r\n        this._gain = this._context.createGain();\r\n        this._config = config;\r\n\r\n        this._data = null;\r\n        this._fadeTimeout = null;\r\n        this._isTouchLocked = false;\r\n        this._loader = null;\r\n        this._loop = false;\r\n        this._offset = 0;\r\n        this._playbackRate = 1;\r\n        this._playWhenReady = null;\r\n        this._source = null;\r\n        this._wave = null;\r\n        this._userData = {};\r\n\r\n        this._effects.setDestination(this._gain);\r\n        this._gain.connect(this._destination);\r\n\r\n        this._onEnded = this._onEnded.bind(this);\r\n        this._onLoad = this._onLoad.bind(this);\r\n        this._onLoadError = this._onLoadError.bind(this);\r\n    }\r\n\r\n    prepare(newConfig = null, force = false) {\r\n        const skipLoad = !force && !this._source && !!this._config.deferLoad;\r\n\r\n        if (newConfig) {\r\n            const configSrc = file.getSrc(newConfig);\r\n            const src = file.getSupportedFile(configSrc) || this._config.src;\r\n            this._config = Object.assign(this._config, newConfig, {src});\r\n        }\r\n\r\n        if (this._source && this._data && this._data.tagName) {\r\n            this._source.load(this._config.src);\r\n        } else {\r\n            this._loader = new Loader(this._config.src, skipLoad);\r\n            this._loader.audioContext = !!this._config.asMediaElement || this._context.isFake ? null : this._context;\r\n            this._loader.isTouchLocked = this._isTouchLocked;\r\n            this._loader.once('loaded', this._onLoad);\r\n            this._loader.once('error', this._onLoadError);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    load(config = null) {\r\n        this.stop();\r\n        this._source = null;\r\n\r\n        if (!config || file.containsURL(config)) {\r\n            if (this._loader) {\r\n                this._loader.destroy();\r\n            }\r\n            this.prepare(config, true);\r\n            this._loader.start();\r\n        } else {\r\n            this.data = config.data || config;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    play(delay, offset) {\r\n        if (!this._source || this._isTouchLocked) {\r\n            this._playWhenReady = () => {\r\n                if (this._source) {\r\n                    this.play(delay, offset);\r\n                }\r\n            };\r\n            if (!!this._config.deferLoad) {\r\n                if (!this._loader) {\r\n                    this.prepare(null, true);\r\n                }\r\n                this._loader.start(true);\r\n            }\r\n            return this;\r\n        }\r\n        this._playWhenReady = null;\r\n        this._effects.setSource(this._source.sourceNode);\r\n\r\n        if (this._offset && typeof offset === 'undefined') {\r\n            offset = this._offset;\r\n            this._offset = 0;\r\n        }\r\n\r\n        this._source.play(delay, offset);\r\n\r\n        if (this._source.hasOwnProperty('volume')) {\r\n            this._source.volume = this._gain.gain.value;\r\n        }\r\n\r\n        if (this._source.hasOwnProperty('loop')) {\r\n            this._source.loop = this._loop;\r\n        }\r\n\r\n        this.emit('play', this);\r\n\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        this._source && this._source.pause();\r\n        this.emit('pause', this);\r\n        return this;\r\n    }\r\n\r\n    stop(delay) {\r\n        this._source && this._source.stop(delay || 0);\r\n        this.emit('stop', this);\r\n        return this;\r\n    }\r\n\r\n    seek(value) {\r\n        this.currentTime = value;\r\n        return this;\r\n    }\r\n\r\n    fade(volume, duration = 1) {\r\n        if (!this._source) {\r\n            return this;\r\n        }\r\n\r\n        const param = this._gain.gain;\r\n\r\n        if (this._context && !this._context.isFake && !firefox) {\r\n            const time = this._context.currentTime;\r\n            param.cancelScheduledValues(time);\r\n            param.setValueAtTime(param.value, time);\r\n            param.linearRampToValueAtTime(volume, time + duration);\r\n        } else {\r\n            this._fadePolyfill(volume, duration);\r\n        }\r\n\r\n        this.emit('fade', this, volume);\r\n\r\n        return this;\r\n    }\r\n\r\n    _fadePolyfill(toVolume, duration) {\r\n        const ramp = (value, step) => {\r\n            this._fadeTimeout = window.setTimeout(() => {\r\n                this.volume = this.volume + (value - this.volume) * 0.2;\r\n                if (Math.abs(this.volume - value) > 0.05) {\r\n                    ramp(value, step);\r\n                    return;\r\n                }\r\n                this.volume = value;\r\n            }, step * 1000);\r\n        };\r\n\r\n        window.clearTimeout(this._fadeTimeout);\r\n        ramp(toVolume, duration / 10);\r\n\r\n        return this;\r\n    }\r\n\r\n    unload() {\r\n        this._source && this._source.destroy();\r\n        this._loader && this._loader.destroy();\r\n        this._data = null;\r\n        this._playWhenReady = null;\r\n        this._source = null;\r\n        this._loader = null;\r\n        this._config.deferLoad = true;\r\n        this.emit('unload', this);\r\n    }\r\n\r\n    reload() {\r\n        return this.load(null, true);\r\n    }\r\n\r\n    destroy() {\r\n        this._source && this._source.destroy();\r\n        this._effects && this._effects.destroy();\r\n        this._gain && this._gain.disconnect();\r\n        if (this._loader) {\r\n            this._loader.off('loaded');\r\n            this._loader.off('error');\r\n            this._loader.destroy();\r\n        }\r\n        this._gain = null;\r\n        this._context = null;\r\n        this._destination = null;\r\n        this._data = null;\r\n        this._playWhenReady = null;\r\n        this._source = null;\r\n        this._effects = null;\r\n        this._loader = null;\r\n        this._config = null;\r\n        this.emit('destroy', this);\r\n        this.off();\r\n    }\r\n\r\n    waveform(length) {\r\n        if (!this._wave) {\r\n            this._wave = utils.waveform();\r\n        }\r\n        if (!this._data) {\r\n            this.once('ready', () => this._wave(this._data, length));\r\n        }\r\n        return this._wave(this._data, length);\r\n    }\r\n\r\n    get context() {\r\n        return this._context;\r\n    }\r\n\r\n    get currentTime() {\r\n        return this._source ? this._source.currentTime : this._offset;\r\n    }\r\n\r\n    set currentTime(value) {\r\n        if (this._source) {\r\n            const playing = this._source.playing;\r\n            this._source.stop();\r\n            this._source.currentTime = value;\r\n            if (playing) {\r\n                this.play(0, value);\r\n            }\r\n        } else {\r\n            this._offset = value;\r\n        }\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    set data(value) {\r\n        if (!value) {\r\n            return;\r\n        }\r\n        this._data = value;\r\n        this._createSource(value);\r\n    }\r\n\r\n    get duration() {\r\n        return this._source ? this._source.duration : 0;\r\n    }\r\n\r\n    get effects() {\r\n        return this._effects._nodes;\r\n    }\r\n\r\n    set effects(value) {\r\n        this._effects.removeAll().add(value);\r\n    }\r\n\r\n    get fx() {\r\n        return this.effects;\r\n    }\r\n\r\n    set fx(value) {\r\n        this.effects = value;\r\n    }\r\n\r\n    get ended() {\r\n        return !!this._source && this._source.ended;\r\n    }\r\n\r\n    get frequency() {\r\n        return this._source ? this._source.frequency : 0;\r\n    }\r\n\r\n    set frequency(value) {\r\n        if (this._source && this._source.hasOwnProperty('frequency')) {\r\n            this._source.frequency = value;\r\n        }\r\n    }\r\n\r\n    get gain() {\r\n        return this._gain;\r\n    }\r\n\r\n    // for media element source\r\n    get groupVolume() {\r\n        return this._source.groupVolume;\r\n    }\r\n\r\n    set groupVolume(value) {\r\n        if (this._source && this._source.hasOwnProperty('groupVolume')) {\r\n            this._source.groupVolume = value;\r\n        }\r\n    }\r\n\r\n    set isTouchLocked(value) {\r\n        this._isTouchLocked = value;\r\n        if (this._loader) {\r\n            this._loader.isTouchLocked = value;\r\n        }\r\n        if (!value && this._playWhenReady) {\r\n            this._playWhenReady();\r\n        }\r\n    }\r\n\r\n    get loader() {\r\n        return this._loader;\r\n    }\r\n\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n\r\n    set loop(value) {\r\n        this._loop = !!value;\r\n\r\n        if (this._source && this._source.hasOwnProperty('loop') && this._source.loop !== this._loop) {\r\n            this._source.loop = this._loop;\r\n        }\r\n    }\r\n\r\n    get singlePlay() {\r\n        return this._config.singlePlay;\r\n    }\r\n\r\n    set singlePlay(value) {\r\n        this._config.singlePlay = value;\r\n        this._source.singlePlay = value;\r\n    }\r\n\r\n    get config() {\r\n        return this._config;\r\n    }\r\n\r\n    get paused() {\r\n        return !!this._source && this._source.paused;\r\n    }\r\n\r\n    get playing() {\r\n        return !!this._source && this._source.playing;\r\n    }\r\n\r\n    get playbackRate() {\r\n        return this._playbackRate;\r\n    }\r\n\r\n    set playbackRate(value) {\r\n        this._playbackRate = value;\r\n        if (this._source) {\r\n            this._source.playbackRate = value;\r\n        }\r\n    }\r\n\r\n    get progress() {\r\n        return this._source ? this._source.progress || 0 : 0;\r\n    }\r\n\r\n    get sourceInfo() {\r\n        return this._source && this._source.info ? this._source.info : {};\r\n    }\r\n\r\n    get sourceNode() {\r\n        return this._source ? this._source.sourceNode : null;\r\n    }\r\n\r\n    get volume() {\r\n        return this._gain.gain.value;\r\n    }\r\n\r\n    set volume(value) {\r\n        if (!isSafeNumber(value)) {\r\n            return;\r\n        }\r\n\r\n        window.clearTimeout(this._fadeTimeout);\r\n\r\n        value = Math.min(Math.max(value, 0), 1);\r\n\r\n        const param = this._gain.gain;\r\n        const time = this._context.currentTime;\r\n        param.cancelScheduledValues(time);\r\n        param.value = value;\r\n        if (!firefox) {\r\n            param.setValueAtTime(value, time);\r\n        }\r\n\r\n        if (this._source && this._source.hasOwnProperty('volume')) {\r\n            this._source.volume = value;\r\n        }\r\n    }\r\n\r\n    get userData() {\r\n        return this._userData;\r\n    }\r\n\r\n    _createSource(data) {\r\n        const isAudioBuffer = file.isAudioBuffer(data);\r\n        if (isAudioBuffer || file.isMediaElement(data)) {\r\n            const Fn = isAudioBuffer ? BufferSource : MediaSource;\r\n            this._source = new AudioSource(Fn, data, this._context, this._onEnded);\r\n            this._source.singlePlay = !!this._config.singlePlay;\r\n            this._source.playbackRate = this._playbackRate;\r\n            this._source.currentTime = this._offset;\r\n        } else if (file.isMediaStream(data)) {\r\n            this._source = new MicrophoneSource(data, this._context);\r\n        } else if (file.isOscillatorType((data && data.type) || data)) {\r\n            this._source = new OscillatorSource(data.type || data, this._context);\r\n        } else {\r\n            throw new Error('Cannot detect data type: ' + data);\r\n        }\r\n\r\n        this._effects.setSource(this._source.sourceNode);\r\n\r\n        this.emit('ready', this);\r\n\r\n        if (this._playWhenReady) {\r\n            this._playWhenReady();\r\n        }\r\n    }\r\n\r\n    _onEnded() {\r\n        this.emit('ended', this);\r\n    }\r\n\r\n    _onLoad(data) {\r\n        this._data = data;\r\n        this.emit('loaded', this);\r\n        this._createSource(data);\r\n    }\r\n\r\n    _onLoadError(err) {\r\n        if (this.listenerCount('error')) {\r\n            this.emit('error', this, err);\r\n            return;\r\n        }\r\n        console.error('Sound load error', this._loader.url);\r\n    }\r\n}\r\n\r\n// expose for unit tests\r\nSound.__source = {\r\n    BufferSource,\r\n    MediaSource,\r\n    MicrophoneSource,\r\n    OscillatorSource\r\n};\r\n","import Group from '../group';\r\n\r\nexport default function SoundGroup(context, destination) {\r\n    const group = new Group(context, destination);\r\n    const sounds = group.sounds;\r\n    let playbackRate = 1,\r\n        loop = false,\r\n        src;\r\n\r\n    function getSource() {\r\n        if (!sounds.length) {\r\n            return;\r\n        }\r\n\r\n        src = sounds.slice(0)\r\n            .sort((a, b) => b.duration - a.duration)[0];\r\n    }\r\n\r\n    const add = group.add;\r\n    group.add = function(sound) {\r\n        add(sound);\r\n        getSource();\r\n        return group;\r\n    };\r\n\r\n    const remove = group.remove;\r\n    group.remove = function(soundOrId) {\r\n        remove(soundOrId);\r\n        getSource();\r\n        return group;\r\n    };\r\n\r\n    Object.defineProperties(group, {\r\n        currentTime: {\r\n            get: function() {\r\n                return src ? src.currentTime : 0;\r\n            },\r\n            set: function(value) {\r\n                this.stop();\r\n                this.play(0, value);\r\n            }\r\n        },\r\n        duration: {\r\n            get: function() {\r\n                return src ? src.duration : 0;\r\n            }\r\n        },\r\n        // ended: {\r\n        //     get: function() {\r\n        //         return src ? src.ended : false;\r\n        //     }\r\n        // },\r\n        loop: {\r\n            get: function() {\r\n                return loop;\r\n            },\r\n            set: function(value) {\r\n                loop = !!value;\r\n                sounds.forEach(function(sound) {\r\n                    sound.loop = loop;\r\n                });\r\n            }\r\n        },\r\n        paused: {\r\n            get: function() {\r\n                // return src ? src.paused : false;\r\n                return !!src && src.paused;\r\n            }\r\n        },\r\n        progress: {\r\n            get: function() {\r\n                return src ? src.progress : 0;\r\n            }\r\n        },\r\n        playbackRate: {\r\n            get: function() {\r\n                return playbackRate;\r\n            },\r\n            set: function(value) {\r\n                playbackRate = value;\r\n                sounds.forEach(function(sound) {\r\n                    sound.playbackRate = playbackRate;\r\n                });\r\n            }\r\n        },\r\n        playing: {\r\n            get: function() {\r\n                // return src ? src.playing : false;\r\n                return !!src && src.playing;\r\n            }\r\n        }\r\n    });\r\n\r\n    return group;\r\n}\r\n","import iOS from './iOS';\r\nimport dummy from './dummy';\r\n\r\nexport default function touchLock(context, callback) {\r\n    const locked = iOS;\r\n\r\n    function unlock() {\r\n        if (context && context.state === 'suspended') {\r\n            context.resume()\r\n                .then(() => {\r\n                    dummy(context);\r\n                    unlocked();\r\n                });\r\n        } else {\r\n            unlocked();\r\n        }\r\n    }\r\n\r\n    function unlocked() {\r\n        document.body.removeEventListener('touchstart', unlock);\r\n        document.body.removeEventListener('touchend', unlock);\r\n        callback();\r\n    }\r\n\r\n    function addListeners() {\r\n        document.body.addEventListener('touchstart', unlock, false);\r\n        document.body.addEventListener('touchend', unlock, false);\r\n    }\r\n\r\n    if (locked) {\r\n        if (document.readyState === 'loading') {\r\n            document.addEventListener('DOMContentLoaded', addListeners);\r\n        } else {\r\n            addListeners();\r\n        }\r\n    }\r\n\r\n    return locked;\r\n}\r\n","import 'core-js/fn/object/assign';\r\nimport context from './context';\r\nimport Effects from './effects';\r\nimport file from './utils/file';\r\nimport Group from './group';\r\nimport Loader from './utils/loader';\r\nimport log from './utils/log';\r\nimport pageVisibility from './utils/pageVisibility';\r\nimport Sound from './sound';\r\nimport SoundGroup from './utils/sound-group';\r\nimport touchLock from './utils/touchLock';\r\nimport utils from './utils/utils';\r\n\r\nconst VERSION = '2.1.6';\r\nconst bus = new Group(context, context.destination);\r\n\r\n/*\r\n* Get Sound by id\r\n*/\r\n\r\nfunction get(id) {\r\n    return bus.find(id);\r\n}\r\n\r\n/*\r\n* Create group\r\n*/\r\n\r\nfunction group(sounds) {\r\n    const soundGroup = new SoundGroup(context, bus.gain);\r\n    if (sounds) {\r\n        sounds.forEach((sound) => soundGroup.add(sound));\r\n    }\r\n    return soundGroup;\r\n}\r\n\r\n/*\r\n* Loading\r\n*/\r\n\r\nfunction add(config) {\r\n    const src = file.getSupportedFile(config.src || config.url || config.data || config);\r\n    const sound = new Sound(Object.assign({}, config || {}, {\r\n        src,\r\n        context,\r\n        destination: bus.gain\r\n    }));\r\n    sound.isTouchLocked = isTouchLocked;\r\n    if (config) {\r\n        sound.id = config.id || config.name || '';\r\n        sound.loop = !!config.loop;\r\n        sound.volume = config.volume;\r\n        sound.effects = config.effects || [];\r\n    }\r\n    bus.add(sound);\r\n    return sound;\r\n}\r\n\r\nfunction queue(config, loaderGroup) {\r\n    const sound = add(config).prepare();\r\n\r\n    if (loaderGroup) {\r\n        loaderGroup.add(sound.loader);\r\n    }\r\n    return sound;\r\n}\r\n\r\nfunction load(config) {\r\n    const src = config.src || config.url || config.data || config;\r\n    let sound, loader;\r\n\r\n    if (file.containsURL(src)) {\r\n        sound = queue(config);\r\n        loader = sound.loader;\r\n    } else if (Array.isArray(src) && file.containsURL(src[0].src || src[0].url)) {\r\n        sound = [];\r\n        loader = new Loader.Group();\r\n        src.forEach((url) => sound.push(queue(url, loader)));\r\n    } else {\r\n        const errorMessage = 'sono.load: No audio file URLs found in config.';\r\n        if (config.onError) {\r\n            config.onError('[ERROR] ' + errorMessage);\r\n        } else {\r\n            throw new Error(errorMessage);\r\n        }\r\n        return null;\r\n    }\r\n    if (config.onProgress) {\r\n        loader.on('progress', (progress) => config.onProgress(progress));\r\n    }\r\n    if (config.onComplete) {\r\n        loader.once('complete', () => {\r\n            loader.off('progress');\r\n            config.onComplete(sound);\r\n        });\r\n    }\r\n    loader.once('error', err => {\r\n        loader.off('error');\r\n        if (config.onError) {\r\n            config.onError(err);\r\n        } else {\r\n            console.error(err);\r\n        }\r\n    });\r\n    loader.start();\r\n\r\n    return sound;\r\n}\r\n\r\n/*\r\n* Create Sound\r\n*\r\n* Accepted values for param config:\r\n* Object config e.g. { id:'foo', url:['foo.ogg', 'foo.mp3'] }\r\n* Array (of files e.g. ['foo.ogg', 'foo.mp3'])\r\n* ArrayBuffer\r\n* HTMLMediaElement\r\n* Filename string (e.g. 'foo.ogg')\r\n* Oscillator type string (i.e. 'sine', 'square', 'sawtooth', 'triangle')\r\n*/\r\n\r\nfunction create(config) {\r\n    // try to load if config contains URLs\r\n    if (file.containsURL(config)) {\r\n        return load(config);\r\n    }\r\n\r\n    const sound = add(config);\r\n    sound.data = config.data || config;\r\n\r\n    return sound;\r\n}\r\n\r\n/*\r\n* Destroy\r\n*/\r\n\r\nfunction destroy(soundOrId) {\r\n    bus.find(soundOrId, (sound) => sound.destroy());\r\n    return sono;\r\n}\r\n\r\nfunction destroyAll() {\r\n    bus.destroy();\r\n    return sono;\r\n}\r\n\r\n/*\r\n* Controls\r\n*/\r\n\r\nfunction mute() {\r\n    bus.mute();\r\n    return sono;\r\n}\r\n\r\nfunction unMute() {\r\n    bus.unMute();\r\n    return sono;\r\n}\r\n\r\nfunction fade(volume, duration) {\r\n    bus.fade(volume, duration);\r\n    return sono;\r\n}\r\n\r\nfunction pauseAll() {\r\n    bus.pause();\r\n    return sono;\r\n}\r\n\r\nfunction resumeAll() {\r\n    bus.resume();\r\n    return sono;\r\n}\r\n\r\nfunction stopAll() {\r\n    bus.stop();\r\n    return sono;\r\n}\r\n\r\nfunction play(id, delay, offset) {\r\n    bus.find(id, (sound) => sound.play(delay, offset));\r\n    return sono;\r\n}\r\n\r\nfunction pause(id) {\r\n    bus.find(id, (sound) => sound.pause());\r\n    return sono;\r\n}\r\n\r\nfunction stop(id) {\r\n    bus.find(id, (sound) => sound.stop());\r\n    return sono;\r\n}\r\n\r\n/*\r\n* Mobile touch lock\r\n*/\r\n\r\nlet isTouchLocked = touchLock(context, () => {\r\n    isTouchLocked = false;\r\n    bus.sounds.forEach(sound => (sound.isTouchLocked = false));\r\n});\r\n\r\n/*\r\n* Page visibility events\r\n*/\r\n\r\nconst pageHiddenPaused = [];\r\n\r\n// pause currently playing sounds and store refs\r\nfunction onHidden() {\r\n    bus.sounds.forEach(sound => {\r\n        if (sound.playing) {\r\n            sound.pause();\r\n            pageHiddenPaused.push(sound);\r\n        }\r\n    });\r\n}\r\n\r\n// play sounds that got paused when page was hidden\r\nfunction onShown() {\r\n    while (pageHiddenPaused.length) {\r\n        pageHiddenPaused.pop().play();\r\n    }\r\n}\r\n\r\nconst pageVis = pageVisibility(onHidden, onShown);\r\n\r\nfunction register(name, fn, attachTo = Effects.prototype) {\r\n    attachTo[name] = fn;\r\n    sono[name] = fn;\r\n\r\n    return fn;\r\n}\r\n\r\nconst sono = {\r\n    canPlay: file.canPlay,\r\n    context,\r\n    create,\r\n    createGroup: group,\r\n    createSound: create,\r\n    destroyAll,\r\n    destroy,\r\n    effects: bus.effects,\r\n    extensions: file.extensions,\r\n    fade,\r\n    file,\r\n    gain: bus.gain,\r\n    getOfflineContext: utils.getOfflineContext,\r\n    get,\r\n    getSound: get,\r\n    group,\r\n    hasWebAudio: !context.isFake,\r\n    isSupported: file.extensions.length > 0,\r\n    load,\r\n    log: () => log(sono),\r\n    mute,\r\n    pause,\r\n    pauseAll,\r\n    play,\r\n    register,\r\n    resumeAll,\r\n    stop,\r\n    stopAll,\r\n    unMute,\r\n    utils,\r\n    VERSION,\r\n    get effects() {\r\n        return bus.effects;\r\n    },\r\n    set effects(value) {\r\n        bus.effects.removeAll().add(value);\r\n    },\r\n    get fx() {\r\n        return this.effects;\r\n    },\r\n    set fx(value) {\r\n        this.effects = value;\r\n    },\r\n    get isTouchLocked() {\r\n        return isTouchLocked;\r\n    },\r\n    get playInBackground() {\r\n        return !pageVis.enabled;\r\n    },\r\n    set playInBackground(value) {\r\n        pageVis.enabled = !value;\r\n\r\n        if (!value) {\r\n            onShown();\r\n        }\r\n    },\r\n    get sounds() {\r\n        return bus.sounds.slice(0);\r\n    },\r\n    get volume() {\r\n        return bus.volume;\r\n    },\r\n    set volume(value) {\r\n        bus.volume = value;\r\n    },\r\n    // expose for unit testing\r\n    __test: {\r\n        Effects,\r\n        Group,\r\n        Sound\r\n    }\r\n\r\n};\r\n\r\nexport default sono;\r\n","import context from '../core/context';\r\n\r\nexport default class AbstractDirectEffect {\r\n    constructor(node) {\r\n        this._node = this._in = this._out = node;\r\n    }\r\n\r\n    connect(node) {\r\n        this._node.connect(node._in || node);\r\n    }\r\n\r\n    disconnect(...args) {\r\n        this._node.disconnect(args);\r\n    }\r\n\r\n    update() {\r\n        throw new Error('update must be overridden');\r\n    }\r\n\r\n    get context() {\r\n        return context;\r\n    }\r\n\r\n    get numberOfInputs() {\r\n        return 1;\r\n    }\r\n\r\n    get numberOfOutputs() {\r\n        return 1;\r\n    }\r\n\r\n    get channelCount() {\r\n        return 1;\r\n    }\r\n\r\n    get channelCountMode() {\r\n        return 'max';\r\n    }\r\n\r\n    get channelInterpretation() {\r\n        return 'speakers';\r\n    }\r\n}\r\n","import AbstractDirectEffect from './abstract-direct-effect';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\nimport sono from '../core/sono';\r\n\r\nfunction noteFromPitch(frequency) {\r\n    const noteNum = 12 * (Math.log(frequency / 440) * Math.LOG2E);\r\n    return Math.round(noteNum) + 69;\r\n}\r\n\r\nfunction frequencyFromNoteNumber(note) {\r\n    return 440 * Math.pow(2, (note - 69) / 12);\r\n}\r\n\r\nfunction centsOffFromPitch(frequency, note) {\r\n    return Math.floor(1200 * Math.log(frequency / frequencyFromNoteNumber(note)) * Math.LOG2E);\r\n}\r\n\r\nclass Analyser extends AbstractDirectEffect {\r\n    constructor({fftSize = 2048, minDecibels = -100, maxDecibels = -30, smoothing = 0.9, useFloats = false} = {}) {\r\n        super(sono.context.createAnalyser());\r\n\r\n        this._useFloats = !!useFloats;\r\n        this._waveform = null;\r\n        this._frequencies = null;\r\n\r\n        this._node.fftSize = fftSize;\r\n\r\n        this.update({minDecibels, maxDecibels, smoothing});\r\n    }\r\n\r\n    update({minDecibels, maxDecibels, smoothing}) {\r\n        if (isSafeNumber(smoothing)) {\r\n            this._node.smoothingTimeConstant = smoothing;\r\n        }\r\n        if (isSafeNumber(minDecibels)) {\r\n            this._node.minDecibels = minDecibels;\r\n        }\r\n        if (isSafeNumber(maxDecibels)) {\r\n            this._node.maxDecibels = maxDecibels;\r\n        }\r\n    }\r\n\r\n    getWaveform() {\r\n        const useFloats = this._useFloats && this._node.getFloatTimeDomainData;\r\n\r\n        if (!this._waveform) {\r\n            this._waveform = this._createArray(useFloats, this._node.fftSize);\r\n        }\r\n\r\n        if (useFloats) {\r\n            this._node.getFloatTimeDomainData(this._waveform);\r\n        } else {\r\n            this._node.getByteTimeDomainData(this._waveform);\r\n        }\r\n\r\n        return this._waveform;\r\n    }\r\n\r\n    getFrequencies() {\r\n        const useFloats = this._useFloats && this._node.getFloatFrequencyData;\r\n\r\n        if (!this._frequencies) {\r\n            this._frequencies = this._createArray(useFloats, this._node.frequencyBinCount);\r\n        }\r\n\r\n        if (useFloats) {\r\n            this._node.getFloatFrequencyData(this._frequencies);\r\n        } else {\r\n            this._node.getByteFrequencyData(this._frequencies);\r\n        }\r\n\r\n        return this._frequencies;\r\n    }\r\n\r\n    getAmplitude(callback) {\r\n        if (!this._amplitudeWorker) {\r\n            this._createAmplitudeAnalyser();\r\n        }\r\n        this._amplitudeCallback = callback || this._amplitudeCallback;\r\n        const f = new Float32Array(this._node.fftSize);\r\n        f.set(this.getFrequencies(true));\r\n        this._amplitudeWorker.postMessage({\r\n            sum: 0,\r\n            length: f.byteLength,\r\n            numSamples: this._node.fftSize / 2,\r\n            b: f.buffer\r\n        }, [f.buffer]);\r\n    }\r\n\r\n    getPitch(callback) {\r\n        if (!this._pitchWorker) {\r\n            this._createPitchAnalyser();\r\n        }\r\n        this._pitchCallback = callback || this._pitchCallback;\r\n        const f = new Float32Array(this._node.fftSize);\r\n        f.set(this.getWaveform(true));\r\n        this._pitchWorker.postMessage({\r\n            sampleRate: sono.context.sampleRate,\r\n            b: f.buffer\r\n        }, [f.buffer]);\r\n    }\r\n\r\n    get frequencyBinCount() {\r\n        return this._node.frequencyBinCount;\r\n    }\r\n\r\n    get maxDecibels() {\r\n        return this._node.maxDecibels;\r\n    }\r\n\r\n    set maxDecibels(value) {\r\n        if (isSafeNumber(value)) {\r\n            this._node.maxDecibels = value;\r\n        }\r\n    }\r\n\r\n    get minDecibels() {\r\n        return this._node.minDecibels;\r\n    }\r\n\r\n    set minDecibels(value) {\r\n        if (isSafeNumber(value)) {\r\n            this._node.minDecibels = value;\r\n        }\r\n    }\r\n\r\n    get smoothing() {\r\n        return this._node.smoothingTimeConstant;\r\n    }\r\n\r\n    set smoothing(value) {\r\n        if (isSafeNumber(value)) {\r\n            this._node.smoothingTimeConstant = value;\r\n        }\r\n    }\r\n\r\n    _createArray(useFloats, length) {\r\n        return useFloats ? new Float32Array(length) : new Uint8Array(length);\r\n    }\r\n\r\n    _createAmplitudeAnalyser() {\r\n        //the worker returns a normalized value\r\n        //first a sum of all magnitudes devided by the byteLength, then devide  by half the fft (1channel)\r\n        const amplitudeBlob = new Blob([\r\n            `onmessage = function(e) {\r\n                var data = e.data;\r\n                var f = new Float32Array(data.b);\r\n                for (var i = 0; i < f.length; i++) {\r\n                    data.sum += f[i];\r\n                }\r\n                data.sum /= f.length;\r\n                postMessage(Math.max(1.0 - (data.sum / data.numSamples * -1.0), 0));\r\n            };`\r\n        ]);\r\n        const amplitudeBlobURL = URL.createObjectURL(amplitudeBlob);\r\n        this._amplitudeWorker = new Worker(amplitudeBlobURL);\r\n        this._amplitudeWorker.onmessage = event => {\r\n            if (!this._amplitudeCallback) {\r\n                return;\r\n            }\r\n            this._amplitudeCallback(event.data);\r\n        };\r\n    }\r\n\r\n    _createPitchAnalyser() {\r\n        const pitchBlob = new Blob([\r\n            `onmessage = function(e) {\r\n                var data = e.data;\r\n                var sampleRate = data.sampleRate;\r\n                var buf = new Float32Array(data.b);\r\n                var SIZE = buf.length;\r\n                var MAX_SAMPLES = Math.floor(SIZE / 2);\r\n                var bestOffset = -1;\r\n                var bestCorrel = 0;\r\n                var rms = 0;\r\n                var foundGoodCorrelation = false;\r\n                var correls = new Array(MAX_SAMPLES);\r\n                for (var i = 0; i < SIZE; i++) {\r\n                    var val = buf[i];\r\n                    rms += val * val;\r\n                }\r\n                rms = Math.sqrt(rms / SIZE);\r\n                if (rms < 0.01) {\r\n                    postMessage(-1);\r\n                } else {\r\n                    var lastCorrelation = 1;\r\n                    for (var offset = 0; offset < MAX_SAMPLES; offset++) {\r\n                        var correl = 0;\r\n                        for (var i = 0; i < MAX_SAMPLES; i++) {\r\n                            correl += Math.abs(buf[i] - buf[i + offset]);\r\n                        }\r\n                        correl = 1 - correl / MAX_SAMPLES;\r\n                        correls[offset] = correl;\r\n                        if (correl > 0.9 && correl > lastCorrelation) {\r\n                            foundGoodCorrelation = true;\r\n                            if (correl > bestCorrel) {\r\n                                bestCorrel = correl;\r\n                                bestOffset = offset;\r\n                            }\r\n                        } else if (foundGoodCorrelation) {\r\n                            var shift = (correls[bestOffset + 1] - correls[bestOffset - 1]) / correls[bestOffset];\r\n                            postMessage(sampleRate / (bestOffset + 8 * shift));\r\n                        }\r\n                        lastCorrelation = correl;\r\n                    }\r\n                    if (bestCorrel > 0.01) {\r\n                        postMessage(sampleRate / bestOffset);\r\n                    } else {\r\n                        postMessage(-1);\r\n                    }\r\n                }\r\n            };`\r\n        ]);\r\n\r\n        const pitchBlobURL = URL.createObjectURL(pitchBlob);\r\n        this._pitchWorker = new Worker(pitchBlobURL);\r\n\r\n        const noteStrings = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n        const pitchCallbackObject = {\r\n            hertz: 0,\r\n            note: '',\r\n            noteIndex: 0,\r\n            detuneCents: 0,\r\n            detune: ''\r\n        };\r\n\r\n        this._pitchWorker.onmessage = event => {\r\n            if (!this._pitchCallback) {\r\n                return;\r\n            }\r\n            const hz = event.data;\r\n            if (hz !== -1) {\r\n                const note = noteFromPitch(hz);\r\n                const detune = centsOffFromPitch(hz, note);\r\n                pitchCallbackObject.hertz = hz;\r\n                pitchCallbackObject.noteIndex = note % 12;\r\n                pitchCallbackObject.note = noteStrings[note % 12];\r\n                pitchCallbackObject.detuneCents = detune;\r\n                if (detune === 0) {\r\n                    pitchCallbackObject.detune = '';\r\n                } else if (detune < 0) {\r\n                    pitchCallbackObject.detune = 'flat';\r\n                } else {\r\n                    pitchCallbackObject.detune = 'sharp';\r\n                }\r\n            }\r\n            this._pitchCallback(pitchCallbackObject);\r\n        };\r\n    }\r\n}\r\n\r\nexport default sono.register('analyser', opts => new Analyser(opts));\r\n","import context from '../core/context';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\n\r\nexport default class AbstractEffect {\r\n    constructor(node = null, nodeOut = null, enabled = true) {\r\n        this._node = node;\r\n        this._nodeOut = nodeOut || node;\r\n        this._enabled;\r\n\r\n        this._in = this.context.createGain();\r\n        this._out = this.context.createGain();\r\n        this._wet = this.context.createGain();\r\n        this._dry = this.context.createGain();\r\n\r\n        this._in.connect(this._dry);\r\n        this._wet.connect(this._out);\r\n        this._dry.connect(this._out);\r\n\r\n        this.enable(enabled);\r\n    }\r\n\r\n    enable(b) {\r\n        if (b === this._enabled) {\r\n            return;\r\n        }\r\n\r\n        this._enabled = b;\r\n\r\n        this._in.disconnect();\r\n\r\n        if (b) {\r\n            this._in.connect(this._dry);\r\n            this._in.connect(this._node);\r\n            this._nodeOut.connect(this._wet);\r\n        } else {\r\n            this._nodeOut.disconnect();\r\n            this._in.connect(this._out);\r\n        }\r\n    }\r\n\r\n    get wet() {\r\n        return this._wet.gain.value;\r\n    }\r\n\r\n    set wet(value) {\r\n        this.setSafeParamValue(this._wet.gain, value);\r\n    }\r\n\r\n    get dry() {\r\n        return this._dry.gain.value;\r\n    }\r\n\r\n    set dry(value) {\r\n        this.setSafeParamValue(this._dry.gain, value);\r\n    }\r\n\r\n    connect(node) {\r\n        this._out.connect(node._in || node);\r\n    }\r\n\r\n    disconnect(...args) {\r\n        this._out.disconnect(args);\r\n    }\r\n\r\n    setSafeParamValue(param, value) {\r\n        if (!isSafeNumber(value)) {\r\n            console.warn(this, 'Attempt to set invalid value ' + value + ' on AudioParam');\r\n            return;\r\n        }\r\n        param.value = value;\r\n    }\r\n\r\n    update() {\r\n        throw new Error('update must be overridden');\r\n    }\r\n\r\n    get context() {\r\n        return context;\r\n    }\r\n\r\n    get numberOfInputs() {\r\n        return 1;\r\n    }\r\n\r\n    get numberOfOutputs() {\r\n        return 1;\r\n    }\r\n\r\n    get channelCount() {\r\n        return 1;\r\n    }\r\n\r\n    get channelCountMode() {\r\n        return 'max';\r\n    }\r\n\r\n    get channelInterpretation() {\r\n        return 'speakers';\r\n    }\r\n}\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\n\r\nclass Compressor extends AbstractEffect {\r\n    constructor({attack = 0.003, knee = 30, ratio = 12, release = 0.25, threshold = -24, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createDynamicsCompressor());\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({threshold, knee, ratio, attack, release});\r\n    }\r\n\r\n    update(options) {\r\n        // min decibels to start compressing at from -100 to 0\r\n        this.setSafeParamValue(this._node.threshold, options.threshold);\r\n        // decibel value to start curve to compressed value from 0 to 40\r\n        this.setSafeParamValue(this._node.knee, options.knee);\r\n        // amount of change per decibel from 1 to 20\r\n        this.setSafeParamValue(this._node.ratio, options.ratio);\r\n        // seconds to reduce gain by 10db from 0 to 1 - how quickly signal adapted when volume increased\r\n        this.setSafeParamValue(this._node.attack, options.attack);\r\n        // seconds to increase gain by 10db from 0 to 1 - how quickly signal adapted when volume redcuced\r\n        this.setSafeParamValue(this._node.release, options.release);\r\n    }\r\n\r\n    get threshold() {\r\n        return this._node.threshold.value;\r\n    }\r\n\r\n    set threshold(value) {\r\n        this.setSafeParamValue(this._node.threshold, value);\r\n    }\r\n\r\n    get knee() {\r\n        return this._node.knee.value;\r\n    }\r\n\r\n    set knee(value) {\r\n        this.setSafeParamValue(this._node.knee, value);\r\n    }\r\n\r\n    get ratio() {\r\n        return this._node.ratio.value;\r\n    }\r\n\r\n    set ratio(value) {\r\n        this.setSafeParamValue(this._node.ratio, value);\r\n    }\r\n\r\n    get attack() {\r\n        return this._node.attack.value;\r\n    }\r\n\r\n    set attack(value) {\r\n        this.setSafeParamValue(this._node.attack, value);\r\n    }\r\n\r\n    get release() {\r\n        return this._node.release.value;\r\n    }\r\n\r\n    set release(value) {\r\n        this.setSafeParamValue(this._node.release, value);\r\n    }\r\n}\r\n\r\nexport default sono.register('compressor', opts => new Compressor(opts));\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\nimport file from '../core/utils/file';\r\nimport Loader from '../core/utils/loader';\r\nimport Sound from '../core/sound';\r\n\r\nclass Convolver extends AbstractEffect {\r\n    constructor({impulse, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createConvolver(), null, false);\r\n\r\n        this._loader = null;\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({impulse});\r\n    }\r\n\r\n    _load(src) {\r\n        if (sono.context.isFake) {\r\n            return;\r\n        }\r\n        if (this._loader) {\r\n            this._loader.destroy();\r\n        }\r\n        this._loader = new Loader(src);\r\n        this._loader.audioContext = sono.context;\r\n        this._loader.once('complete', impulse => this.update({impulse}));\r\n        this._loader.once('error', error => console.error(error));\r\n        this._loader.start();\r\n    }\r\n\r\n    update({impulse}) {\r\n        if (!impulse) {\r\n            return this;\r\n        }\r\n\r\n        if (file.isAudioBuffer(impulse)) {\r\n            this._node.buffer = impulse;\r\n            this.enable(true);\r\n            return this;\r\n        }\r\n\r\n        if (impulse instanceof Sound) {\r\n            if (impulse.data) {\r\n                this.update({impulse: impulse.data});\r\n            } else {\r\n                impulse.once('ready', sound => this.update({\r\n                    impulse: sound.data\r\n                }));\r\n            }\r\n            return this;\r\n        }\r\n\r\n        if (file.isArrayBuffer(impulse)) {\r\n            this._load(impulse);\r\n            return this;\r\n        }\r\n\r\n        if (file.isURL(file.getSupportedFile(impulse))) {\r\n            this._load(file.getSupportedFile(impulse));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    get impulse() {\r\n        return this._node.buffer;\r\n    }\r\n\r\n    set impulse(impulse) {\r\n        this.update({impulse});\r\n    }\r\n}\r\n\r\nexport default sono.register('convolver', opts => new Convolver(opts));\r\n","import AbstractEffect from './abstract-effect';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\nimport sono from '../core/sono';\r\n\r\n// up-sample before applying curve for better resolution result 'none', '2x' or '4x'\r\n// oversample: '2x'\r\n// oversample: '4x'\r\n\r\nclass Distortion extends AbstractEffect {\r\n    constructor({level = 1, samples = 22050, oversample = 'none', wet = 1, dry = 0} = {}) {\r\n        super(sono.context.createWaveShaper(), null, false);\r\n\r\n        this._node.oversample = oversample || 'none';\r\n\r\n        this._samples = samples || 22050;\r\n\r\n        this._curve = new Float32Array(this._samples);\r\n\r\n        this._level;\r\n\r\n        this._enabled = false;\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({level});\r\n    }\r\n\r\n    update({level}) {\r\n        if (level === this._level || !isSafeNumber(level)) {\r\n            return;\r\n        }\r\n\r\n        this.enable(level > 0);\r\n\r\n        if (!this._enabled) {\r\n            return;\r\n        }\r\n\r\n        const k = level * 100;\r\n        const deg = Math.PI / 180;\r\n        const y = 2 / this._samples;\r\n\r\n        let x;\r\n        for (let i = 0; i < this._samples; ++i) {\r\n            x = i * y - 1;\r\n            this._curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\r\n        }\r\n\r\n        this._level = level;\r\n        this._node.curve = this._curve;\r\n    }\r\n\r\n    get level() {\r\n        return this._level;\r\n    }\r\n\r\n    set level(level) {\r\n        this.update({level});\r\n    }\r\n}\r\n\r\nexport default sono.register('distortion', opts => new Distortion(opts));\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\n\r\nclass Echo extends AbstractEffect {\r\n    constructor({delay = 0.5, feedback = 0.5, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createDelay(), sono.context.createGain());\r\n\r\n        this._delay = this._node;\r\n        this._feedback = this._nodeOut;\r\n\r\n        this._delay.connect(this._feedback);\r\n        this._feedback.connect(this._delay);\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({delay, feedback});\r\n    }\r\n\r\n    enable(value) {\r\n        super.enable(value);\r\n\r\n        if (this._feedback && value) {\r\n            this._feedback.connect(this._delay);\r\n        }\r\n    }\r\n\r\n    update(options) {\r\n        this.delay = options.delay;\r\n        this.feedback = options.feedback;\r\n    }\r\n\r\n    get delay() {\r\n        return this._delay.delayTime.value;\r\n    }\r\n\r\n    set delay(value) {\r\n        this.setSafeParamValue(this._delay.delayTime, value);\r\n    }\r\n\r\n    get feedback() {\r\n        return this._feedback.gain.value;\r\n    }\r\n\r\n    set feedback(value) {\r\n        this.setSafeParamValue(this._feedback.gain, value);\r\n    }\r\n}\r\n\r\nexport default sono.register('echo', opts => new Echo(opts));\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\n\r\nfunction safeOption(...args) {\r\n    let value = null;\r\n    for (let i = 0; i < args.length; i++) {\r\n        if (isSafeNumber(args[i])) {\r\n            value = args[i];\r\n            break;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode\r\n// For lowpass and highpass Q indicates how peaked the frequency is around the cutoff.\r\n// The greater the value is, the greater is the peak\r\nconst minFrequency = 40;\r\nconst maxFrequency = sono.context.sampleRate / 2;\r\n\r\nfunction getFrequency(value) {\r\n    // Logarithm (base 2) to compute how many octaves fall in the range.\r\n    const numberOfOctaves = Math.log(maxFrequency / minFrequency) / Math.LN2;\r\n    // Compute a multiplier from 0 to 1 based on an exponential scale.\r\n    const multiplier = Math.pow(2, numberOfOctaves * (value - 1.0));\r\n    // Get back to the frequency value between min and max.\r\n    return maxFrequency * multiplier;\r\n}\r\n\r\nclass Filter extends AbstractEffect {\r\n    constructor({\r\n        type = 'lowpass',\r\n        frequency = 1000,\r\n        detune = 0,\r\n        q = 0,\r\n        gain = 1,\r\n        peak = 0,\r\n        boost = 0,\r\n        width = 100,\r\n        sharpness = 0,\r\n        wet = 1,\r\n        dry = 0\r\n    } = {}) {\r\n        super(sono.context.createBiquadFilter());\r\n\r\n        this._node.type = type;\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({frequency, gain, detune, q, peak, boost, width, sharpness});\r\n    }\r\n\r\n    update(options) {\r\n        this.setSafeParamValue(this._node.frequency, options.frequency);\r\n        this.setSafeParamValue(this._node.gain, safeOption(options.boost, options.gain));\r\n        this.setSafeParamValue(this._node.detune, options.detune);\r\n\r\n        const q = safeOption(options.peak, options.width, options.sharpness, options.q);\r\n        this.setSafeParamValue(this._node.Q, q);\r\n    }\r\n\r\n    setByPercent({percent = 0.5}) {\r\n        this.update({\r\n            frequency: getFrequency(percent)\r\n        });\r\n    }\r\n\r\n    get type() {\r\n        return this._node.type;\r\n    }\r\n\r\n    set type(value) {\r\n        this._node.type = value;\r\n    }\r\n\r\n    get frequency() {\r\n        return this._node.frequency.value;\r\n    }\r\n\r\n    set frequency(value) {\r\n        this.setSafeParamValue(this._node.frequency, value);\r\n    }\r\n\r\n    get q() {\r\n        return this._node.Q.value;\r\n    }\r\n\r\n    set q(value) {\r\n        this.setSafeParamValue(this._node.Q, value);\r\n    }\r\n\r\n    get Q() {\r\n        return this.q;\r\n    }\r\n\r\n    set Q(value) {\r\n        this.q = value;\r\n    }\r\n\r\n    get peak() {\r\n        return this.q;\r\n    }\r\n\r\n    set peak(value) {\r\n        this.q = value;\r\n    }\r\n\r\n    get width() {\r\n        return this._node.frequency.value / this._node.Q.value;\r\n    }\r\n\r\n    set width(value) {\r\n        if (value <= 0) {\r\n            this.q = 0;\r\n            return;\r\n        }\r\n        this.q = this._node.frequency.value / value;\r\n    }\r\n\r\n    get sharpness() {\r\n        return this.q;\r\n    }\r\n\r\n    set sharpness(value) {\r\n        this.q = value;\r\n    }\r\n\r\n    get boost() {\r\n        return this._node.gain.value;\r\n    }\r\n\r\n    set boost(value) {\r\n        this.setSafeParamValue(this._node.gain, value);\r\n    }\r\n\r\n    get gain() {\r\n        return this.boost;\r\n    }\r\n\r\n    set gain(value) {\r\n        this.boost = value;\r\n    }\r\n\r\n    get detune() {\r\n        return this._node.detune.value;\r\n    }\r\n\r\n    set detune(value) {\r\n        this.setSafeParamValue(this._node.detune, value);\r\n    }\r\n\r\n    get maxFrequency() {\r\n        return sono.context.sampleRate / 2;\r\n    }\r\n}\r\n\r\nconst lowpass = sono.register('lowpass', ({frequency, peak, q} = {}) => {\r\n    return new Filter({type: 'lowpass', frequency, peak, q});\r\n});\r\n\r\nconst highpass = sono.register('highpass', ({frequency, peak, q} = {}) => {\r\n    return new Filter({type: 'highpass', frequency, peak, q});\r\n});\r\n\r\nconst lowshelf = sono.register('lowshelf', ({frequency, boost, gain} = {}) => {\r\n    return new Filter({type: 'lowshelf', frequency, boost, gain, q: 0});\r\n});\r\n\r\nconst highshelf = sono.register('highshelf', ({frequency, boost, gain} = {}) => {\r\n    return new Filter({type: 'highshelf', frequency, boost, gain, q: 0});\r\n});\r\n\r\nconst peaking = sono.register('peaking', ({frequency, width, boost, gain, q} = {}) => {\r\n    return new Filter({type: 'peaking', frequency, width, boost, gain, q});\r\n});\r\n\r\nconst bandpass = sono.register('bandpass', ({frequency, width, q} = {}) => {\r\n    return new Filter({type: 'bandpass', frequency, width, q});\r\n});\r\n\r\nconst notch = sono.register('notch', ({frequency, width, gain, q} = {}) => {\r\n    return new Filter({type: 'notch', frequency, width, gain, q});\r\n});\r\n\r\nconst allpass = sono.register('allpass', ({frequency, sharpness, q} = {}) => {\r\n    return new Filter({type: 'allpass', frequency, sharpness, q});\r\n});\r\n\r\nexport default sono.register('filter', opts => new Filter(opts));\r\n\r\nexport {\r\n    lowpass,\r\n    highpass,\r\n    bandpass,\r\n    lowshelf,\r\n    highshelf,\r\n    peaking,\r\n    notch,\r\n    allpass\r\n};\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\n\r\nclass MonoFlanger extends AbstractEffect {\r\n    constructor({delay = 0.005, feedback = 0.5, frequency = 0.002, gain = 0.25, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createDelay());\r\n\r\n        this._delay = this._node;\r\n        this._feedback = sono.context.createGain();\r\n        this._lfo = sono.context.createOscillator();\r\n        this._gain = sono.context.createGain();\r\n        this._lfo.type = 'sine';\r\n\r\n        this._delay.connect(this._feedback);\r\n        this._feedback.connect(this._in);\r\n\r\n        this._lfo.connect(this._gain);\r\n        this._gain.connect(this._delay.delayTime);\r\n        this._lfo.start(0);\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({delay, feedback, frequency, gain});\r\n    }\r\n\r\n    update(options) {\r\n        this.delay = options.delay;\r\n        this.frequency = options.frequency;\r\n        this.gain = options.gain;\r\n        this.feedback = options.feedback;\r\n    }\r\n\r\n    get delay() {\r\n        return this._delay.delayTime.value;\r\n    }\r\n\r\n    set delay(value) {\r\n        this.setSafeParamValue(this._delay.delayTime, value);\r\n    }\r\n\r\n    get frequency() {\r\n        return this._lfo.frequency.value;\r\n    }\r\n\r\n    set frequency(value) {\r\n        this.setSafeParamValue(this._lfo.frequency, value);\r\n    }\r\n\r\n    get gain() {\r\n        return this._gain.gain.value;\r\n    }\r\n\r\n    set gain(value) {\r\n        this.setSafeParamValue(this._gain.gain, value);\r\n    }\r\n\r\n    get feedback() {\r\n        return this._feedback.gain.value;\r\n    }\r\n\r\n    set feedback(value) {\r\n        this.setSafeParamValue(this._feedback.gain, value);\r\n    }\r\n}\r\n\r\nsono.register('monoFlanger', opts => new MonoFlanger(opts));\r\n\r\nclass StereoFlanger extends AbstractEffect {\r\n    constructor({delay = 0.003, feedback = 0.5, frequency = 0.5, gain = 0.005, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createChannelSplitter(2), sono.context.createChannelMerger(2));\r\n\r\n        this._splitter = this._node;\r\n        this._merger = this._nodeOut;\r\n        this._feedbackL = sono.context.createGain();\r\n        this._feedbackR = sono.context.createGain();\r\n        this._lfo = sono.context.createOscillator();\r\n        this._lfoGainL = sono.context.createGain();\r\n        this._lfoGainR = sono.context.createGain();\r\n        this._delayL = sono.context.createDelay();\r\n        this._delayR = sono.context.createDelay();\r\n\r\n        this._lfo.type = 'sine';\r\n\r\n        this._splitter.connect(this._delayL, 0);\r\n        this._splitter.connect(this._delayR, 1);\r\n\r\n        this._delayL.connect(this._feedbackL);\r\n        this._delayR.connect(this._feedbackR);\r\n\r\n        this._feedbackL.connect(this._delayR);\r\n        this._feedbackR.connect(this._delayL);\r\n\r\n        this._delayL.connect(this._merger, 0, 0);\r\n        this._delayR.connect(this._merger, 0, 1);\r\n\r\n        this._lfo.connect(this._lfoGainL);\r\n        this._lfo.connect(this._lfoGainR);\r\n        this._lfoGainL.connect(this._delayL.delayTime);\r\n        this._lfoGainR.connect(this._delayR.delayTime);\r\n        this._lfo.start(0);\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({delay, feedback, frequency, gain});\r\n    }\r\n\r\n    update(options) {\r\n        this.delay = options.delay;\r\n        this.frequency = options.frequency;\r\n        this.gain = options.gain;\r\n        this.feedback = options.feedback;\r\n    }\r\n\r\n    get delay() {\r\n        return this._delayL.delayTime.value;\r\n    }\r\n\r\n    set delay(value) {\r\n        this.setSafeParamValue(this._delayL.delayTime, value);\r\n        this._delayR.delayTime.value = this._delayL.delayTime.value;\r\n    }\r\n\r\n    get frequency() {\r\n        return this._lfo.frequency.value;\r\n    }\r\n\r\n    set frequency(value) {\r\n        this.setSafeParamValue(this._lfo.frequency, value);\r\n    }\r\n\r\n    get gain() {\r\n        return this._lfoGainL.gain.value;\r\n    }\r\n\r\n    set gain(value) {\r\n        this.setSafeParamValue(this._lfoGainL.gain, value);\r\n        this._lfoGainR.gain.value = 0 - this._lfoGainL.gain.value;\r\n    }\r\n\r\n    get feedback() {\r\n        return this._feedbackL.gain.value;\r\n    }\r\n\r\n    set feedback(value) {\r\n        this.setSafeParamValue(this._feedbackL.gain, value);\r\n        this._feedbackR.gain.value = this._feedbackL.gain.value;\r\n    }\r\n}\r\n\r\nsono.register('stereoFlanger', opts => new StereoFlanger(opts));\r\n\r\nexport default sono.register('flanger', (opts = {}) => {\r\n    return opts.stereo ? new StereoFlanger(opts) : new MonoFlanger(opts);\r\n});\r\n","export default function isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\n","import AbstractDirectEffect from './abstract-direct-effect';\r\nimport sono from '../core/sono';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\nimport isDefined from '../core/utils/isDefined';\r\n\r\nconst pannerDefaults = {\r\n    panningModel: 'HRTF',\r\n    distanceModel: 'linear',\r\n    refDistance: 1,\r\n    maxDistance: 1000,\r\n    rolloffFactor: 1,\r\n    coneInnerAngle: 360,\r\n    coneOuterAngle: 0,\r\n    coneOuterGain: 0\r\n};\r\n\r\nfunction safeNumber(x, y = 0) {\r\n    if (isSafeNumber(x)) {\r\n        return x;\r\n    }\r\n    return y;\r\n}\r\n\r\n// cross product of 2 vectors\r\nfunction cross(a, b) {\r\n    const ax = a.x,\r\n        ay = a.y,\r\n        az = a.z;\r\n    const bx = b.x,\r\n        by = b.y,\r\n        bz = b.z;\r\n    a.x = ay * bz - az * by;\r\n    a.y = az * bx - ax * bz;\r\n    a.z = ax * by - ay * bx;\r\n}\r\n\r\n// normalise to unit vector\r\nfunction normalize(vec3) {\r\n    if (vec3.x === 0 && vec3.y === 0 && vec3.z === 0) {\r\n        return vec3;\r\n    }\r\n    const length = Math.sqrt(vec3.x * vec3.x + vec3.y * vec3.y + vec3.z * vec3.z);\r\n    const invScalar = 1 / length;\r\n    vec3.x *= invScalar;\r\n    vec3.y *= invScalar;\r\n    vec3.z *= invScalar;\r\n    return vec3;\r\n}\r\n\r\nconst vecPool = {\r\n    pool: [],\r\n    get: function(x, y, z) {\r\n        const v = this.pool.length ? this.pool.pop() : {\r\n            x: 0,\r\n            y: 0,\r\n            z: 0\r\n        };\r\n        // check if a vector has been passed in\r\n        if (typeof x !== 'undefined' && isNaN(x) && 'x' in x && 'y' in x && 'z' in x) {\r\n            v.x = safeNumber(x.x);\r\n            v.y = safeNumber(x.y);\r\n            v.z = safeNumber(x.z);\r\n        } else {\r\n            v.x = safeNumber(x);\r\n            v.y = safeNumber(y);\r\n            v.z = safeNumber(z);\r\n        }\r\n        return v;\r\n    },\r\n    dispose: function(instance) {\r\n        this.pool.push(instance);\r\n    }\r\n};\r\n\r\nconst globalUp = vecPool.get(0, 1, 0);\r\nconst angle45 = Math.PI / 4;\r\nconst angle90 = Math.PI / 2;\r\n\r\nfunction setNodeOrientation(pannerNode, fw) {\r\n    // set the orientation of the source (where the audio is coming from)\r\n    // calculate up vec ( up = (forward cross (0, 1, 0)) cross forward )\r\n    const up = vecPool.get(fw.x, fw.y, fw.z);\r\n    cross(up, globalUp);\r\n    cross(up, fw);\r\n    normalize(up);\r\n    normalize(fw);\r\n    // set the audio context's listener position to match the camera position\r\n    pannerNode.setOrientation(fw.x, fw.y, fw.z, up.x, up.y, up.z);\r\n    // return the vecs to the pool\r\n    vecPool.dispose(fw);\r\n    vecPool.dispose(up);\r\n}\r\n\r\nfunction setNodePosition(nodeOrListener, vec) {\r\n    nodeOrListener.setPosition(vec.x, vec.y, vec.z);\r\n    vecPool.dispose(vec);\r\n}\r\n\r\nclass Panner extends AbstractDirectEffect {\r\n    constructor({\r\n        panningModel,\r\n        distanceModel,\r\n        refDistance,\r\n        maxDistance,\r\n        rolloffFactor,\r\n        coneInnerAngle,\r\n        coneOuterAngle,\r\n        coneOuterGain\r\n    } = {}) {\r\n        super(sono.context.createPanner());\r\n\r\n        // Default for stereo is 'HRTF' can also be 'equalpower'\r\n        this._node.panningModel = panningModel || pannerDefaults.panningModel;\r\n\r\n        // Distance model and attributes\r\n        // Can be 'linear' 'inverse' 'exponential'\r\n        this._node.distanceModel = distanceModel || pannerDefaults.distanceModel;\r\n        this._node.refDistance = isDefined(refDistance) ? refDistance : pannerDefaults.refDistance;\r\n        this._node.maxDistance = isDefined(maxDistance) ? maxDistance : pannerDefaults.maxDistance;\r\n        this._node.rolloffFactor = isDefined(rolloffFactor) ? rolloffFactor : pannerDefaults.rolloffFactor;\r\n        this._node.coneInnerAngle = isDefined(coneInnerAngle) ? coneInnerAngle : pannerDefaults.coneInnerAngle;\r\n        this._node.coneOuterAngle = isDefined(coneOuterAngle) ? coneOuterAngle : pannerDefaults.coneOuterAngle;\r\n        this._node.coneOuterGain = isDefined(coneOuterGain) ? coneOuterGain : pannerDefaults.coneOuterGain;\r\n        // set to defaults (needed in Firefox)\r\n        this._node.setPosition(0, 0, 0);\r\n        this._node.setOrientation(1, 0, 0);\r\n\r\n        this.set(0);\r\n    }\r\n\r\n    update({x, y, z}) {\r\n        const v = vecPool.get(x, y, z);\r\n\r\n        if (isSafeNumber(x) && !isSafeNumber(y) && !isSafeNumber(z)) {\r\n            // pan left to right with value from -1 to 1\r\n            x = v.x;\r\n\r\n            if (x > 1) {\r\n                x = 1;\r\n            }\r\n            if (x < -1) {\r\n                x = -1;\r\n            }\r\n\r\n            // creates a nice curve with z\r\n            x = x * angle45;\r\n            z = x + angle90;\r\n\r\n            if (z > angle90) {\r\n                z = Math.PI - z;\r\n            }\r\n\r\n            v.x = Math.sin(x);\r\n            v.y = 0;\r\n            v.z = Math.sin(z);\r\n        }\r\n        setNodePosition(this._node, v);\r\n    }\r\n\r\n    // set the position the audio is coming from)\r\n    setPosition(x, y, z) {\r\n        setNodePosition(this._node, vecPool.get(x, y, z));\r\n    }\r\n\r\n    // set the direction the audio is coming from)\r\n    setOrientation(x, y, z) {\r\n        setNodeOrientation(this._node, vecPool.get(x, y, z));\r\n    }\r\n\r\n    // set the position of who or what is hearing the audio (could be camera or some character)\r\n    setListenerPosition(x, y, z) {\r\n        setNodePosition(sono.context.listener, vecPool.get(x, y, z));\r\n    }\r\n\r\n    // set the position of who or what is hearing the audio (could be camera or some character)\r\n    setListenerOrientation(x, y, z) {\r\n        setNodeOrientation(sono.context.listener, vecPool.get(x, y, z));\r\n    }\r\n\r\n    get defaults() {\r\n        return pannerDefaults;\r\n    }\r\n\r\n    set defaults(value) {\r\n        Object.assign(pannerDefaults, value);\r\n    }\r\n\r\n    set(x, y, z) {\r\n        return this.update({x, y, z});\r\n    }\r\n}\r\n\r\nconst panner = sono.register('panner', opts => new Panner(opts));\r\n\r\nObject.defineProperties(panner, {\r\n    defaults: {\r\n        get: () => pannerDefaults,\r\n        set: (value) => Object.assign(pannerDefaults, value)\r\n    },\r\n    setListenerPosition: {\r\n        value: (x, y, z) => setNodePosition(sono.context.listener, vecPool.get(x, y, z))\r\n    },\r\n    setListenerOrientation: {\r\n        value: (x, y, z) => setNodeOrientation(sono.context.listener, vecPool.get(x, y, z))\r\n    }\r\n});\r\n\r\nexport default panner;\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\n\r\nclass Phaser extends AbstractEffect {\r\n    constructor({stages = 8, feedback = 0.5, frequency = 0.5, gain = 300, wet = 0.8, dry = 0.8} = {}) {\r\n        stages = stages || 8;\r\n\r\n        const filters = [];\r\n        for (let i = 0; i < stages; i++) {\r\n            filters.push(sono.context.createBiquadFilter());\r\n        }\r\n\r\n        const first = filters[0];\r\n        const last = filters[filters.length - 1];\r\n\r\n        super(first, last);\r\n\r\n        this._stages = stages;\r\n        this._feedback = sono.context.createGain();\r\n        this._lfo = sono.context.createOscillator();\r\n        this._lfoGain = sono.context.createGain();\r\n        this._lfo.type = 'sine';\r\n\r\n        for (let i = 0; i < filters.length; i++) {\r\n            const filter = filters[i];\r\n            filter.type = 'allpass';\r\n            filter.frequency.value = 1000 * i;\r\n            this._lfoGain.connect(filter.frequency);\r\n            // filter.Q.value = 10;\r\n\r\n            if (i > 0) {\r\n                filters[i - 1].connect(filter);\r\n            }\r\n        }\r\n\r\n        this._lfo.connect(this._lfoGain);\r\n        this._lfo.start(0);\r\n\r\n        this._nodeOut.connect(this._feedback);\r\n        this._feedback.connect(this._node);\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({frequency, gain, feedback});\r\n    }\r\n\r\n    enable(value) {\r\n        super.enable(value);\r\n\r\n        if (this._feedback) {\r\n            this._feedback.disconnect();\r\n        }\r\n\r\n        if (value && this._feedback) {\r\n            this._nodeOut.connect(this._feedback);\r\n            this._feedback.connect(this._node);\r\n        }\r\n    }\r\n\r\n    update(options) {\r\n        this.frequency = options.frequency;\r\n        this.gain = options.gain;\r\n        this.feedback = options.feedback;\r\n    }\r\n\r\n    get stages() {\r\n        return this._stages;\r\n    }\r\n\r\n    get frequency() {\r\n        return this._lfo.frequency.value;\r\n    }\r\n\r\n    set frequency(value) {\r\n        this.setSafeParamValue(this._lfo.frequency, value);\r\n    }\r\n\r\n    get gain() {\r\n        return this._lfoGain.gain.value;\r\n    }\r\n\r\n    set gain(value) {\r\n        this.setSafeParamValue(this._lfoGain.gain, value);\r\n    }\r\n\r\n    get feedback() {\r\n        return this._feedback.gain.value;\r\n    }\r\n\r\n    set feedback(value) {\r\n        this.setSafeParamValue(this._feedback.gain, value);\r\n    }\r\n}\r\n\r\nexport default sono.register('phaser', opts => new Phaser(opts));\r\n","import AbstractEffect from './abstract-effect';\r\nimport sono from '../core/sono';\r\nimport isSafeNumber from '../core/utils/isSafeNumber';\r\nimport isDefined from '../core/utils/isDefined';\r\n\r\nfunction createImpulseResponse({time, decay, reverse, buffer}) {\r\n    const rate = sono.context.sampleRate;\r\n    const length = Math.floor(rate * time);\r\n\r\n    let impulseResponse;\r\n\r\n    if (buffer && buffer.length === length) {\r\n        impulseResponse = buffer;\r\n    } else {\r\n        impulseResponse = sono.context.createBuffer(2, length, rate);\r\n    }\r\n\r\n    const left = impulseResponse.getChannelData(0);\r\n    const right = impulseResponse.getChannelData(1);\r\n\r\n    let n, e;\r\n    for (let i = 0; i < length; i++) {\r\n        n = reverse ? length - i : i;\r\n        e = Math.pow(1 - n / length, decay);\r\n        left[i] = (Math.random() * 2 - 1) * e;\r\n        right[i] = (Math.random() * 2 - 1) * e;\r\n    }\r\n\r\n    return impulseResponse;\r\n}\r\n\r\nclass Reverb extends AbstractEffect {\r\n    constructor({time = 1, decay = 5, reverse = false, wet = 1, dry = 1} = {}) {\r\n        super(sono.context.createConvolver());\r\n\r\n        this._convolver = this._node;\r\n\r\n        this._length = 0;\r\n        this._impulseResponse = null;\r\n        this._opts = {};\r\n\r\n        this.wet = wet;\r\n        this.dry = dry;\r\n        this.update({time, decay, reverse});\r\n    }\r\n\r\n    update({time, decay, reverse}) {\r\n        let changed = false;\r\n        if (time !== this._opts.time && isSafeNumber(time)) {\r\n            this._opts.time = time;\r\n            changed = true;\r\n        }\r\n        if (decay !== this._opts.decay && isSafeNumber(decay)) {\r\n            this._opts.decay = decay;\r\n            changed = true;\r\n        }\r\n        if (isDefined(reverse) && reverse !== this._reverse) {\r\n            this._opts.reverse = reverse;\r\n            changed = true;\r\n        }\r\n        if (!changed) {\r\n            return;\r\n        }\r\n\r\n        this._opts.buffer = time <= 0 ? null : createImpulseResponse(this._opts);\r\n        this._convolver.buffer = this._opts.buffer;\r\n    }\r\n\r\n    get time() {\r\n        return this._opts.time;\r\n    }\r\n\r\n    set time(value) {\r\n        this.update({time: value});\r\n    }\r\n\r\n    get decay() {\r\n        return this._opts.decay;\r\n    }\r\n\r\n    set decay(value) {\r\n        this.update({decay: value});\r\n    }\r\n\r\n    get reverse() {\r\n        return this._opts.reverse;\r\n    }\r\n\r\n    set reverse(value) {\r\n        this.update({reverse: value});\r\n    }\r\n}\r\n\r\nexport default sono.register('reverb', opts => new Reverb(opts));\r\n","import sono from '../core/sono';\r\n\r\nfunction microphone(connected, denied, error) {\r\n    navigator.getUserMedia =\r\n        navigator.mediaDevices.getUserMedia ||\r\n        navigator.getUserMedia ||\r\n        navigator.webkitGetUserMedia ||\r\n        navigator.mozGetUserMedia ||\r\n        navigator.msGetUserMedia;\r\n\r\n    error = error || function(err) {\r\n        console.error(err);\r\n    };\r\n\r\n    const isSupported = !!navigator.getUserMedia;\r\n    const api = {};\r\n    let stream = null;\r\n\r\n    function onConnect(micStream) {\r\n        stream = micStream;\r\n        connected(stream);\r\n    }\r\n\r\n    function onError(e) {\r\n        if (denied && e.name === 'PermissionDeniedError' || e === 'PERMISSION_DENIED') {\r\n            denied();\r\n        } else {\r\n            error(e.message || e);\r\n        }\r\n    }\r\n\r\n    function connect() {\r\n        if (!isSupported) {\r\n            return api;\r\n        }\r\n\r\n        if (navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({\r\n                audio: true\r\n            }).then(onConnect).catch(onError);\r\n        } else {\r\n            navigator.getUserMedia({\r\n                audio: true\r\n            }, onConnect, onError);\r\n        }\r\n        return api;\r\n    }\r\n\r\n    function disconnect() {\r\n        if (stream.stop) {\r\n            stream.stop();\r\n        } else {\r\n            stream.getAudioTracks()[0].stop();\r\n        }\r\n        stream = null;\r\n        return api;\r\n    }\r\n\r\n    return Object.assign(api, {\r\n        connect,\r\n        disconnect,\r\n        isSupported,\r\n        get stream() {\r\n            return stream;\r\n        }\r\n    });\r\n}\r\n\r\nexport default sono.register('microphone', microphone, sono.utils);\r\n","import sono from '../core/sono';\r\n\r\nfunction recorder(passThrough = false) {\r\n    const bufferLength = 4096;\r\n    const buffersL = [];\r\n    const buffersR = [];\r\n    let startedAt = 0;\r\n    let stoppedAt = 0;\r\n    let script = null;\r\n    let isRecording = false;\r\n    let soundOb = null;\r\n\r\n    const input = sono.context.createGain();\r\n    const output = sono.context.createGain();\r\n    output.gain.value = passThrough ? 1 : 0;\r\n\r\n    const node = {\r\n        _in: input,\r\n        _out: output,\r\n        connect(n) {\r\n            output.connect(n._in || n);\r\n        },\r\n        disconnect(...args) {\r\n            output.disconnect(args);\r\n        }\r\n    };\r\n\r\n    function mergeBuffers(buffers, length) {\r\n        const buffer = new Float32Array(length);\r\n        let offset = 0;\r\n        for (let i = 0; i < buffers.length; i++) {\r\n            buffer.set(buffers[i], offset);\r\n            offset += buffers[i].length;\r\n        }\r\n        return buffer;\r\n    }\r\n\r\n    function getBuffer() {\r\n        if (!buffersL.length) {\r\n            return sono.context.createBuffer(2, bufferLength, sono.context.sampleRate);\r\n        }\r\n        const recordingLength = buffersL.length * bufferLength;\r\n        const buffer = sono.context.createBuffer(2, recordingLength, sono.context.sampleRate);\r\n        buffer.getChannelData(0)\r\n            .set(mergeBuffers(buffersL, recordingLength));\r\n        buffer.getChannelData(1)\r\n            .set(mergeBuffers(buffersR, recordingLength));\r\n        return buffer;\r\n    }\r\n\r\n    function destroyScriptProcessor() {\r\n        if (script) {\r\n            script.onaudioprocess = null;\r\n            input.disconnect();\r\n            script.disconnect();\r\n        }\r\n    }\r\n\r\n    function createScriptProcessor() {\r\n        destroyScriptProcessor();\r\n\r\n        script = sono.context.createScriptProcessor(bufferLength, 2, 2);\r\n        input.connect(script);\r\n        script.connect(output);\r\n        script.connect(sono.context.destination);\r\n        // output.connect(sono.context.destination);\r\n\r\n\r\n        script.onaudioprocess = function(event) {\r\n            const inputL = event.inputBuffer.getChannelData(0);\r\n            const inputR = event.inputBuffer.getChannelData(1);\r\n\r\n            if (passThrough) {\r\n                const outputL = event.outputBuffer.getChannelData(0);\r\n                const outputR = event.outputBuffer.getChannelData(1);\r\n                outputL.set(inputL);\r\n                outputR.set(inputR);\r\n            }\r\n\r\n            if (isRecording) {\r\n                buffersL.push(new Float32Array(inputL));\r\n                buffersR.push(new Float32Array(inputR));\r\n            }\r\n        };\r\n    }\r\n\r\n    return {\r\n        start(sound) {\r\n            if (!sound) {\r\n                return;\r\n            }\r\n            createScriptProcessor();\r\n            buffersL.length = 0;\r\n            buffersR.length = 0;\r\n            startedAt = sono.context.currentTime;\r\n            stoppedAt = 0;\r\n            soundOb = sound;\r\n            sound.effects.add(node);\r\n            isRecording = true;\r\n        },\r\n        stop() {\r\n            soundOb.effects.remove(node);\r\n            soundOb = null;\r\n            stoppedAt = sono.context.currentTime;\r\n            isRecording = false;\r\n            destroyScriptProcessor();\r\n            return getBuffer();\r\n        },\r\n        getDuration() {\r\n            if (!isRecording) {\r\n                return stoppedAt - startedAt;\r\n            }\r\n            return sono.context.currentTime - startedAt;\r\n        },\r\n        get isRecording() {\r\n            return isRecording;\r\n        }\r\n    };\r\n}\r\n\r\nexport default sono.register('recorder', recorder, sono.utils);\r\n","import sono from '../core/sono';\r\n\r\nfunction waveform() {\r\n    let buffer,\r\n        wave;\r\n\r\n    return function(audioBuffer, length) {\r\n        if (!window.Float32Array || !window.AudioBuffer) {\r\n            return [];\r\n        }\r\n\r\n        const sameBuffer = buffer === audioBuffer;\r\n        const sameLength = wave && wave.length === length;\r\n        if (sameBuffer && sameLength) {\r\n            return wave;\r\n        }\r\n\r\n        wave = new Float32Array(length);\r\n\r\n        if (!audioBuffer) {\r\n            return wave;\r\n        }\r\n\r\n        // cache for repeated calls\r\n        buffer = audioBuffer;\r\n\r\n        const chunk = Math.floor(buffer.length / length),\r\n            resolution = 5, // 10\r\n            incr = Math.max(Math.floor(chunk / resolution), 1);\r\n        let greatest = 0;\r\n\r\n        for (let i = 0; i < buffer.numberOfChannels; i++) {\r\n            // check each channel\r\n            const channel = buffer.getChannelData(i);\r\n            for (let j = 0; j < length; j++) {\r\n                // get highest value within the chunk\r\n                for (let k = j * chunk, l = k + chunk; k < l; k += incr) {\r\n                    // select highest value from channels\r\n                    let a = channel[k];\r\n                    if (a < 0) {\r\n                        a = -a;\r\n                    }\r\n                    if (a > wave[j]) {\r\n                        wave[j] = a;\r\n                    }\r\n                    // update highest overall for scaling\r\n                    if (a > greatest) {\r\n                        greatest = a;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // scale up\r\n        const scale = 1 / greatest;\r\n        for (let i = 0; i < wave.length; i++) {\r\n            wave[i] *= scale;\r\n        }\r\n\r\n        return wave;\r\n    };\r\n}\r\n\r\nexport default sono.register('waveform', waveform, sono.utils);\r\n","import sono from '../core/sono';\r\n\r\nconst halfPI = Math.PI / 2;\r\nconst twoPI = Math.PI * 2;\r\n\r\nfunction waveformer(config) {\r\n\r\n    const style = config.style || 'fill', // 'fill' or 'line'\r\n        shape = config.shape || 'linear', // 'circular' or 'linear'\r\n        color = config.color || 0,\r\n        bgColor = config.bgColor,\r\n        lineWidth = config.lineWidth || 1,\r\n        percent = config.percent || 1,\r\n        originX = config.x || 0,\r\n        originY = config.y || 0,\r\n        transform = config.transform;\r\n\r\n    let canvas = config.canvas,\r\n        width = config.width || (canvas && canvas.width),\r\n        height = config.height || (canvas && canvas.height);\r\n\r\n    let ctx = null, currentColor, i, x, y,\r\n        radius, innerRadius, centerX, centerY;\r\n\r\n    if (!canvas && !config.context) {\r\n        canvas = document.createElement('canvas');\r\n        width = width || canvas.width;\r\n        height = height || canvas.height;\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n    }\r\n\r\n    if (shape === 'circular') {\r\n        radius = config.radius || Math.min(height / 2, width / 2);\r\n        innerRadius = config.innerRadius || radius / 2;\r\n        centerX = originX + width / 2;\r\n        centerY = originY + height / 2;\r\n    }\r\n\r\n    ctx = config.context || canvas.getContext('2d');\r\n\r\n    function clear() {\r\n        if (bgColor) {\r\n            ctx.fillStyle = bgColor;\r\n            ctx.fillRect(originX, originY, width, height);\r\n        } else {\r\n            ctx.clearRect(originX, originY, width, height);\r\n        }\r\n\r\n        ctx.lineWidth = lineWidth;\r\n\r\n        currentColor = null;\r\n\r\n        if (typeof color !== 'function') {\r\n            ctx.strokeStyle = color;\r\n            ctx.beginPath();\r\n        }\r\n    }\r\n\r\n    function updateColor(position, length, value) {\r\n        if (typeof color === 'function') {\r\n            const newColor = color(position, length, value);\r\n            if (newColor !== currentColor) {\r\n                currentColor = newColor;\r\n                ctx.stroke();\r\n                ctx.strokeStyle = currentColor;\r\n                ctx.beginPath();\r\n            }\r\n        }\r\n    }\r\n\r\n    function getValue(value, position, length) {\r\n        if (typeof transform === 'function') {\r\n            return transform(value, position, length);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function getWaveform(value, length) {\r\n        if (value && typeof value.waveform === 'function') {\r\n            return value.waveform(length);\r\n        }\r\n        if (value) {\r\n            return value;\r\n        }\r\n        if (config.waveform) {\r\n            return config.waveform;\r\n        }\r\n        if (config.sound) {\r\n            return config.sound.waveform(length);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function update(wave) {\r\n\r\n        clear();\r\n\r\n        if (shape === 'circular') {\r\n            const waveform = getWaveform(wave, 360);\r\n            const length = Math.floor(waveform.length * percent);\r\n\r\n            const step = twoPI / length;\r\n            let angle, magnitude, sine, cosine;\r\n\r\n            for (i = 0; i < length; i++) {\r\n                const value = getValue(waveform[i], i, length);\r\n                updateColor(i, length, value);\r\n\r\n                angle = i * step - halfPI;\r\n                cosine = Math.cos(angle);\r\n                sine = Math.sin(angle);\r\n\r\n                if (style === 'fill') {\r\n                    x = centerX + innerRadius * cosine;\r\n                    y = centerY + innerRadius * sine;\r\n                    ctx.moveTo(x, y);\r\n                }\r\n\r\n                magnitude = innerRadius + (radius - innerRadius) * value;\r\n                x = centerX + magnitude * cosine;\r\n                y = centerY + magnitude * sine;\r\n\r\n                if (style === 'line' && i === 0) {\r\n                    ctx.moveTo(x, y);\r\n                }\r\n\r\n                ctx.lineTo(x, y);\r\n            }\r\n\r\n            if (style === 'line') {\r\n                ctx.closePath();\r\n            }\r\n        } else {\r\n\r\n            const waveform = getWaveform(wave, width);\r\n            const maxX = width - lineWidth / 2;\r\n            let length = Math.min(waveform.length, maxX);\r\n            length = Math.floor(length * percent);\r\n            const stepX = maxX / length;\r\n\r\n            for (i = 0; i < length; i++) {\r\n                const value = getValue(waveform[i], i, length);\r\n                updateColor(i, length, value);\r\n\r\n                if (style === 'line' && i > 0) {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n\r\n                x = originX + i * stepX;\r\n                y = originY + height - Math.round(height * value);\r\n                y = Math.floor(Math.min(y, originY + height - lineWidth / 2));\r\n\r\n                if (style === 'fill') {\r\n                    x = Math.ceil(x + lineWidth / 2);\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x, originY + height);\r\n                } else {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    update.canvas = canvas;\r\n\r\n    if (config.waveform || config.sound) {\r\n        update();\r\n    }\r\n\r\n    return update;\r\n}\r\n\r\nexport default sono.register('waveformer', waveformer, sono.utils);\r\n"],"names":["isObject","require$$0","document","require$$1","require$$2","anObject","toPrimitive","IE8_DOM_DEFINE","dP","createDesc","global","core","$toString","has","hide","aFunction","ctx","redefine","cof","IObject","defined","toInteger","min","toIObject","toLength","toAbsoluteIndex","uid","$keys","enumBugKeys","toObject","gOPS","pIE","getKeys","DESCRIPTORS","$export","dummy","context","buffer","createBuffer","sampleRate","source","createBufferSource","connect","destination","start","stop","disconnect","FakeContext","startTime","Date","now","fn","param","fakeNode","window","Uint8Array","Float32Array","Array","currentTime","navigator","test","userAgent","desiredSampleRate","Ctx","AudioContext","webkitAudioContext","iOS","close","state","resume","setTimeout","Effects","_destination","_source","_nodes","node","add","remove","toggle","force","removeAll","keys","prototype","forEach","hasOwnProperty","key","bind","setSource","_updateConnections","setDestination","_connectToDestination","indexOf","isArray","n","i","length","push","l","splice","hasNode","arguments","pop","destroy","_connect","a","b","_in","lastNode","prev","extensions","canPlay","tests","el","createElement","canPlayType","type","ext","getFileExtension","url","slice","match","toLowerCase","split","lastIndexOf","getSupportedFile","fileNames","name","some","isAudioBuffer","data","AudioBuffer","isArrayBuffer","ArrayBuffer","isMediaElement","HTMLMediaElement","isMediaStream","getAudioTracks","MediaStreamTrack","isOscillatorType","isURL","containsURL","config","src","getSrc","Group","sounds","effects","gain","createGain","preMuteVolume","group","find","soundOrId","callback","found","sound","id","once","play","delay","offset","pause","playing","paused","seek","percent","mute","volume","unMute","setVolume","value","fade","duration","time","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","load","unload","fx","isNaN","Math","max","groupVolume","EventEmitter","events","Emitter","off","listener","removeListener","removeAllListeners","ERROR_STATE","Loader","deferLoad","emitter","audioContext","isTouchLocked","progress","request","timeout","removeListeners","removeEventListener","readyHandler","errorHandler","onerror","progressHandler","loadHandler","dispatchComplete","emit","event","lengthComputable","loaded","total","status","statusText","error","code","listenerCount","Error","cancelTimeout","clearTimeout","decodeArrayBuffer","arraybuffer","decodeAudioData","response","readyState","cancel","abort","loadArrayBuffer","XMLHttpRequest","open","responseType","addEventListener","send","loadAudioElement","tagName","preload","newUrl","api","on","defineProperties","Object","freeze","queue","numLoaded","numTotal","currentLoader","completeHandler","e","next","loader","log","title","VERSION","info","isSupported","hasWebAudio","file","args","apply","console","call","pageVisibility","onHidden","onShown","enabled","hidden","visibilityChange","mozHidden","msHidden","webkitHidden","onChange","enable","BufferSource","endedCallback","ended","loop","cuedAt","playbackRate","sourceNode","startedAt","createSourceNode","onended","elapsed","endedHandler","offlineCtx","getOfflineContext","numOfChannels","OfflineCtx","OfflineAudioContext","webkitOfflineAudioContext","cloneBuffer","isFake","numChannels","numberOfChannels","cloned","getChannelData","set","reverseBuffer","reverse","ramp","fromValue","toValue","linear","exponentialRampToValueAtTime","getFrequency","minValue","maxValue","numberOfOctaves","LN2","multiplier","pow","timeCode","seconds","delim","m","floor","s","mn","sc","isSafeNumber","isFinite","AudioSource","Type","onEnded","create","pool","clones","numCreated","singlePlay","disposeSource","onSourceEnded","index","getSource","cloneNode","every","MediaSource","delayTimeout","createMediaElementSource","MicrophoneSource","stream","createMediaStreamSource","mozGetUserMedia","mozHack","OscillatorSource","frequency","createOscillator","Sound","_context","_effects","_gain","_config","_data","_fadeTimeout","_isTouchLocked","_loader","_loop","_offset","_playbackRate","_playWhenReady","_wave","_userData","_onEnded","_onLoad","_onLoadError","prepare","newConfig","skipLoad","configSrc","assign","asMediaElement","firefox","_fadePolyfill","toVolume","step","abs","reload","waveform","utils","_createSource","Fn","err","__source","SoundGroup","sort","touchLock","locked","unlock","then","unlocked","body","addListeners","bus","get","soundGroup","loaderGroup","errorMessage","onError","onProgress","onComplete","sono","destroyAll","pauseAll","resumeAll","stopAll","pageHiddenPaused","pageVis","register","attachTo","__test","AbstractDirectEffect","_node","_out","update","noteFromPitch","noteNum","LOG2E","round","frequencyFromNoteNumber","note","centsOffFromPitch","Analyser","fftSize","minDecibels","maxDecibels","smoothing","useFloats","createAnalyser","_useFloats","_waveform","_frequencies","smoothingTimeConstant","getWaveform","getFloatTimeDomainData","_createArray","getByteTimeDomainData","getFrequencies","getFloatFrequencyData","frequencyBinCount","getByteFrequencyData","getAmplitude","_amplitudeWorker","_createAmplitudeAnalyser","_amplitudeCallback","f","postMessage","byteLength","getPitch","_pitchWorker","_createPitchAnalyser","_pitchCallback","amplitudeBlob","Blob","amplitudeBlobURL","URL","createObjectURL","Worker","onmessage","pitchBlob","pitchBlobURL","noteStrings","pitchCallbackObject","hz","detune","hertz","noteIndex","detuneCents","opts","AbstractEffect","nodeOut","_nodeOut","_enabled","_wet","_dry","setSafeParamValue","warn","Compressor","attack","knee","ratio","release","threshold","wet","dry","createDynamicsCompressor","options","Convolver","impulse","createConvolver","_load","Distortion","level","samples","oversample","createWaveShaper","_samples","_curve","_level","k","deg","PI","y","x","curve","Echo","feedback","createDelay","_delay","_feedback","delayTime","safeOption","minFrequency","maxFrequency","Filter","q","peak","boost","width","sharpness","createBiquadFilter","Q","setByPercent","lowpass","highpass","lowshelf","highshelf","peaking","bandpass","notch","allpass","MonoFlanger","_lfo","StereoFlanger","createChannelSplitter","createChannelMerger","_splitter","_merger","_feedbackL","_feedbackR","_lfoGainL","_lfoGainR","_delayL","_delayR","stereo","isDefined","pannerDefaults","safeNumber","cross","ax","ay","az","z","bx","by","bz","normalize","vec3","sqrt","invScalar","vecPool","v","instance","globalUp","angle45","angle90","setNodeOrientation","pannerNode","fw","up","setOrientation","dispose","setNodePosition","nodeOrListener","vec","setPosition","Panner","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","createPanner","sin","setListenerPosition","setListenerOrientation","panner","Phaser","stages","filters","first","last","_stages","_lfoGain","filter","createImpulseResponse","decay","rate","impulseResponse","left","right","random","Reverb","_convolver","_length","_impulseResponse","_opts","changed","_reverse","microphone","connected","denied","getUserMedia","mediaDevices","webkitGetUserMedia","msGetUserMedia","onConnect","micStream","message","catch","recorder","passThrough","bufferLength","buffersL","buffersR","stoppedAt","script","isRecording","soundOb","input","output","mergeBuffers","buffers","getBuffer","recordingLength","destroyScriptProcessor","onaudioprocess","createScriptProcessor","inputL","inputBuffer","inputR","outputL","outputBuffer","outputR","wave","audioBuffer","sameBuffer","sameLength","chunk","resolution","greatest","channel","j","incr","scale","halfPI","twoPI","waveformer","style","shape","color","bgColor","lineWidth","originX","originY","transform","canvas","height","currentColor","radius","innerRadius","centerX","centerY","getContext","clear","fillStyle","fillRect","clearRect","strokeStyle","beginPath","updateColor","position","newColor","stroke","getValue","angle","magnitude","sine","cosine","cos","moveTo","lineTo","closePath","maxX","stepX","ceil"],"mappings":"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"}